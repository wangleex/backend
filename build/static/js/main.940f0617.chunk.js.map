{"version":3,"sources":["../../../src/notification/NotificationSnackBar.tsx","../../../../src/components/servers/load-servers.ts","../../../../src/components/servers/ServerEdit.tsx","../../../../src/components/servers/ServerList.tsx","../../../src/utils/common-functions.ts","states/global/types.ts","states/global/reducer.ts","types/props/query-props.ts","states/global/context.tsx","styles/app.ts","components/adminViews/ServersTab.tsx","components/adminViews/TranslatorTab.tsx","components/adminViews/users/load-users.ts","types/requests/user-requests.ts","styles/user-style.ts","components/adminViews/users/UserEdit.tsx","components/adminViews/users/UserList.tsx","components/adminViews/UsersTab.tsx","types/requests/application-requests.ts","styles/application-style.ts","components/userViews/applications/ApplicationCreate.tsx","components/userViews/applications/ApplicationList.tsx","components/userViews/applications/load-applications.ts","components/userViews/ApplicationsTab.tsx","styles/help-style.ts","components/userViews/HelpTab.tsx","components/userViews/NotFoundTab.tsx","types/requests/query-requests.ts","styles/profile-style.ts","components/userViews/ProfileTab.tsx","states/query-argument.ts","states/viz-node.ts","states/schema-tree.ts","models/query.ts","components/userViews/queries/load-queries.ts","states/schema-history.ts","styles/query-style.ts","components/userViews/queries/queryCreateComponents/QueryCreateForm.tsx","components/userViews/queries/queryCreateComponents/QueryCreateViz.ts","components/userViews/queries/queryCreateComponents/QuerySchemaNodeInput.tsx","components/userViews/queries/queryCreateComponents/QuerySchemaViz.tsx","components/userViews/queries/QueryCreate.tsx","components/userViews/queries/queryHistoryComponents/QueryCreateResponseViz.ts","components/userViews/queries/queryHistoryComponents/QueryDetailPanel.tsx","components/userViews/queries/queryHistoryComponents/QueryRecordsList.tsx","components/userViews/queries/queryHistoryComponents/QueryResponseViz.tsx","components/userViews/queries/queryHistoryComponents/QueryRecordsPanel.tsx","components/userViews/queries/QueryHistory.tsx","components/userViews/queries/QueryList.tsx","components/userViews/QueriesTab.tsx","styles/social-media-style.ts","components/userViews/social-media/socket-singleton.ts","components/userViews/social-media/oauth.tsx","components/userViews/SocialMediaTab.tsx","components/AuthorizedNav.tsx","styles/unauthorized-front-style.ts","styles/login-style.ts","components/unauthorizedViews/LoginTab.tsx","components/unauthorizedViews/RegisterTab.tsx","components/UnauthorizedNav.tsx","styles/theme.ts","App.tsx","serviceWorker.ts","index.tsx","../../../src/endpoints/router-endpoints.ts","../../../src/states/snackbar-data.ts","../../../src/utils/value-checker.ts","../../../src/utils/common-values.tsx","../../../src/props/server-props.ts","../../../src/states/string-dict.ts","../../../src/utils/error-handlers.ts","../../../src/styles/server-style.ts","../../../src/endpoints/api-endpoints.ts","../../../src/styles/common-style.ts","../../../src/components/ServerManagement.tsx"],"names":["react_1","default","createElement","value_checker_1","isStringEmpty","GlobalActions","createDefaultState","user","localStorage","getItem","JSON","parse","queries","fullQuerySchemas","servers","users","applications","socialMedia","QueryRouteType","QueryListOption","reducer","state","action","type","SET_USER","newUser","payload","setItem","stringify","removeItem","setUser","REMOVE_USER","removeUser","SET_FULL_QUERIES","SET_FULL_SCHEMAS","SET_FULL_SERVERS","SET_FULL_USERS","SET_FULL_APPLICATIONS","SET_FULL_SOCIAL_MEDIA","Error","globalStore","createContext","dispatch","Provider","initialState","GlobalStateProvider","children","useReducer","value","appStyles","makeStyles","theme","root","display","drawer","width","flexShrink","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","easeOut","enteringScreen","menuButton","marginRight","spacing","hide","drawerHeader","mixins","toolbar","drawerPaper","content","flexGrow","padding","marginTop","contentShift","nameCardWrapper","nameCardHeader","margin","color","fontSize","nameCard","flexDirection","alignItems","linkNoStyle","textDecoration","linkActiveStyle","backgroundColor","fade","palette","primary","main","ServersTab","memo","props","updateTitle","routeType","useContext","useEffect","routerEndpoints","name","ServerManagement","data","onChange","newServers","TranslatorTab","translator","loadUsers","onUsersLoaded","mounted","a","axios","get","apiEndpoints","endpoints","usersList","url","response","errorString","getGeneralError","notificationData","makeError","newUsers","Map","map","u","email","makeEmpty","UserUpdateType","userStyles","commonPageStyles","errorButtonStyles","commonButtonStyles","formStyles","formContainer","buttons","UserEdit","useState","quota","toString","setQuota","isAdmin","setIsAdmin","quotaErrorMessage","setQuotaErrorMessage","generalError","setGeneralError","mutate","mutSetQuotaErrorMessage","mutClearQuotaErrorMessage","mutSetGeneralError","mutClearGeneralError","styles","submitForm","request","put","userUpdate","fieldError","error","isError","joinBoolean","getHTTPError","onSubmit","isValidNumber","numericQuota","UPDATE","onSave","onDiscard","DELETE","onDelete","className","titleStyle","helperTextStyle","disableGutters","maxWidth","Grid","container","item","xs","TextField","fullWidth","disabled","label","required","e","target","helperText","FormControlLabel","control","Checkbox","checked","clsx","buttonWrapper","Button","variant","startIcon","onClick","errorButton","buttonRightEnd","NotificationSnackBar","onClose","tableColumns","title","field","UserList","tableActions","icon","tooltip","Array","isArray","onEdit","form","options","showTitle","search","actionsColumnIndex","paginationType","pageSizeOptions","columns","actions","from","values","components","Container","icons","materialTableIcons","ApplicationRequestType","UsersTab","listError","setListError","passedUserEmail","useParams","history","paramName","useHistory","result","usersWithDefault","child","push","edit","urlBase","encodeURI","isEdit","decodeURI","rawEmail","delete","makeSuccess","set","message","applicationStyles","submitButtonWrapper","ApplicationCreate","existingApplication","setValues","fieldErrorMessages","setFieldErrorMessages","generalErrorMessage","setGeneralErrorMessage","mutSetFieldErrorMessages","mutClearFieldErrorMessages","mutSetGeneralErrorMessages","mutClearGeneralErrorMessages","onChangeValues","key","o","stringDict","update","onVerifyForm","isValueEmpty","unset","validate","isValidURL","submitRequest","application","applicationUpdate","callbackURL","home","onCreateNew","CREATE","onCreate","onUpdateExisting","onUpdate","onDeleteExisting","getValueWithDefault","isValueNonempty","multiline","ApplicationList","app","loadApplications","onApplicationsLoaded","applicationList","newApps","id","uuidv4","ApplicationsTab","selectedAppID","newApplications","applicationsWithDefault","onRedirectList","onCreateFinished","updatedApp","updated","onModificationFinished","onDeleteFinished","selectedApplication","exact","path","urlDynamic","to","helpStyle","section","redirectButton","marginBottom","HelpTab","help","window","open","pageEndpoints","projectMainPage","NotFoundTab","style","justifyContent","fontWeight","QueryUpdateType","profileStyles","grid","gridRowSeparated","borderBottom","grey","gridRow","itemName","itemValue","logOutButton","ProfileTab","profile","onLogOut","general","logOutCredential","base","Close","queryArgument","rawArg","meta","arg","inputType","ofType","description","vizNode","parent","rawSchema","node","info","arguments","selected","raw","rawArgs","args","getRawType","getRawOfType","this","getOutputObjectName","isFieldObject","kind","isObject","isList","isScalar","hasOwnProperty","createFromRaw","schema","__schema","allBaseTypes","types","reduce","acc","obj","startsWith","entryObjectName","queryType","createTree","currentObject","fields","objectName","baseType","addValueFieldToBase","baseObject","clonedBaseObject","childMap","candidateChild","has","selectedChildInputs","inputs","candidateChildArgs","length","i","findNode","tree","findNodeRecursive","targetId","QuerySchedule","schemaTree","createEmpty","getSerializableObject","serializeRecursive","currentNode","output","baseObjectName","flat","filter","elem","isAList","createFromSerializableObject","createRecursive","currentObj","nextBaseObjectName","nextBaseObjectFields","nextField","nextFieldName","nextChild","find","childBaseNode","createEmptyRoot","addNode","addNodeRecursive","targetNode","forEach","val","removeNode","index","findIndex","splice","replaceNode","newNode","queryIntermediate","q","schedule","source","loadQueriesAndSchemas","onSchemaLoaded","onQueriesLoaded","previousSchema","cachedRawSchema","query","queriesList","fetchAllQueriesResponse","fetchAllQueriesGeneralError","schemaChanged","allRawQueries","rawQuery","queryFullSchema","params","fetchRawSchemaRequest","fetchRawSchemaGeneralError","newQueries","newQuery","schemaHistory","addRecord","record","findIndexByNode","removeRecordByNode","startingNode","slice","queryStyles","queryCreateStyles","sideInputWrapper","minHeight","boxSizing","borderTopLeftRadius","borderBottomLeftRadius","sideInputTitle","wordBreak","sideInputFields","sideFieldWrapper","height","sideEmptyText","queryCreateWrapper","position","queryCreateInputPanel","top","bottom","overflow","queryCreateVizPanel","border","borderRadius","formSubmitSpacing","queryHistoryStyles","createStyles","historyWrapper","maxHeight","tabsWrapper","tabPanelWrapper","overflowY","intermediateWrapper","historyPanelWrapper","historyTableWrapper","historyTable","borderRight","historyTableHighlightedRow","responseVizWrapper","alignSelf","responseVizTextWrapper","responseVizEmptyTitle","responseVizErrorTitle","red","responseVizOutline","detailPanelWrapper","detailHelperText","detailTable","paddingBottom","detailVizOutline","removeElement","showElement","allSchedules","AD_HOC","PER_MINUTE","PER_HOUR","PER_DAY","PER_WEEK","PER_MONTH","queryCreateFormFields","QueryCreateForm","errorMessages","allSources","onUpdateQuery","onUpdateName","useCallback","onUpdateSource","onUpdateSchedule","FormControl","InputLabel","Select","labelId","MenuItem","FormHelperText","cachedFullSchema","cleanUpViz","createViz","onDeselectNode","onSelectNode","fullSchema","isImmutable","d3","nodeSize","rootData","x0","y0","descendants","savedChildren","$svg","containerElem","append","attr","$svgContainer","$container","call","on","newCoordinate","transform","apply","newScale","scale","k","$linksWrapper","$nodesWrapper","diagonal","x","d","y","circleFillCallback","nodes","links","$nodes","selectAll","datum","$nodesEnter","enter","stopPropagation","select","text","clone","lower","merge","exit","remove","$links","$linksEnter","eachBefore","QuerySchemaNodeInput","allInputs","nodeName","setInputs","newArgs","newArg","QuerySchemaViz","lastActiveNodeName","setActiveNode","deleteVizNode","onRefUpdate","ref","console","log","allSchemas","QueryCreate","addQuery","setAllSources","queryForm","setQueryForm","formErrorMessages","setFormErrorMessages","nodesHistory","setNodesHistory","activeRecord","setActiveRecord","querySourcesList","lastActiveNode","onValidateForm","isFormValid","m","isObjectEmpty","onSaveQuery","mutSetFormErrorMessages","mutClearFormErrorMessages","mutClearGeneralErrorMessage","ADD","queryUpdate","onSetQueryForm","newQueryForm","trim","onNodeSelected","h","onNodeDeselected","newHistory","onInputsChange","newInputs","onCloseSnackBar","basicForm","visualization","buttonRightGap","undefined","constructor","Object","previousData","cleanUpResponseViz","createResponseViz","entries","isHandle","cur","childrenSize","pageIndex","isPaginationNeeded","switchChildren","rawNodes","higher","unshift","includes","QueryDetailPanel","requestDelete","requestSubmit","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","Tooltip","IconButton","aria-label","component","QueryRecordsList","records","setActiveRecordIndex","activeRecordIndex","tableHeaders","string","tableRows","executionTimestamp","runtime","stickyHeader","QueryResponseViz","errors","Boolean","QueryRecordsPanel","allRecords","setAllRecords","queryName","queryHistoryRecordsList","TabPanel","other","aria-labelledby","QueryHistory","deleteQuery","submitQuery","activeTab","setActiveTab","onChangeTab","_","newValue","submitUpdate","onDeleteQuery","onSubmitQuery","EXECUTE","Paper","Tabs","indicatorColor","textColor","Tab","QueryList","NONE","option","setOption","setQuery","HISTORY","renderedRedirectNew","renderedRedirectHistory","renderedList","NEW","QueriesTab","selectedQueryID","alertMessage","setAlertMessage","newSchema","queriesWithDefault","onUpdateQueries","newItem","LIST","replace","size","socialMediaStyles","wrapperStyle","listItemStyle","authorizedTextStyle","textAlign","imageStyle","socketConnection","_socket","createSocket","io","provider","socialMediaAuth","endsWith","socketEndpoint","socket","OAuthComponent","onAuthorized","onError","popup","useRef","interval","current","close","isAuthenticated","clearInterval","startAuth","left","innerWidth","innerHeight","constructURL","setInterval","popupWindow","closed","notAuth","auth","ListItemText","ListItem","divider","src","imageURL","alt","loadSocialMedia","onSourcesLoaded","socialMediaList","curr","SocialMediaTab","newSources","onAuthMediaSource","socialMediaWithDefault","newMediaSource","old","newSource","onAuthError","sources","List","PrivateRoute","rest","render","location","pathname","AuthorizedNav","setTitle","isOpen","toggleMenuOpen","useTheme","AppBar","Toolbar","edge","Menu","Typography","noWrap","Drawer","anchor","classes","paper","ModalProps","keepMounted","activeClassName","ButtonBase","secondary","Divider","button","ListItemIcon","Search","Share","Explore","Web","People","Translate","Help","ServerRouteType","EDIT","unauthorizedFrontStyles","paddingTop","fullWidthTitle","menuButtonWrapper","loginStyles","fieldSeparation","functionalitySeparation","LoginTab","setEmail","password","setPassword","emailError","setEmailError","passwordError","setPasswordError","onSubmitForm","mutSetEmailError","mutClearEmailError","mutSetPasswordError","mutClearPasswordError","post","loginCredential","noValidate","RegisterTab","setErrors","mutSetErrors","mutClearErrors","onUpdateForm","oldInputs","invitationCode","registerCredential","UnauthorizedNav","unauthorizedRouterEndpoints","login","register","AppTheme","typography","fontFamily","join","App","isLoggedIn","$emptyMain","$fullMain","ThemeProvider","createMuiTheme","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","api_endpoints_1","APP_BASE_URL","r","metaQueries","invalid","str","emptyRegex","test","isNaN","APIMethod","authorization","APIAuthLevel","method","body","GET","USER","baseURL","multiple","getContrastText","colors_1","blueGrey"],"mappings":"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","file":"static/js/main.940f0617.chunk.js","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar core_1 = require(\"@material-ui/core\");\nvar clsx_1 = __importDefault(require(\"clsx\"));\nvar react_1 = __importStar(require(\"react\"));\nvar common_style_1 = require(\"../styles/common-style\");\nvar value_checker_1 = require(\"../utils/value-checker\");\nfunction SnackBarTransition(props) {\n    return react_1.default.createElement(core_1.Slide, __assign({}, props, { direction: \"up\" }));\n}\n/**\n * Used to display both error and success messages\n * @param props\n * @constructor\n */\nfunction NotificationSnackBar(props) {\n    var _a = props.data, message = _a.message, isError = _a.isError, onClose = props.onClose;\n    var isErrorMessageEmpty = message == null || value_checker_1.isStringEmpty(message);\n    var _b = __read(react_1.useState(!isErrorMessageEmpty), 2), isOpen = _b[0], setIsOpen = _b[1];\n    var onClickClose = react_1.useCallback(function () {\n        setIsOpen(false);\n        onClose();\n    }, [setIsOpen, onClose]);\n    react_1.useEffect(function () {\n        setIsOpen(!isErrorMessageEmpty);\n    }, [isErrorMessageEmpty]);\n    var styles = common_style_1.snackBarStyles();\n    return (react_1.default.createElement(core_1.Snackbar, { open: isOpen, TransitionComponent: SnackBarTransition, message: react_1.default.createElement(\"div\", { className: isError ? styles.content : clsx_1.default(styles.content, styles.success) }, message), action: react_1.default.createElement(core_1.Button, { color: \"secondary\", size: \"small\", onClick: onClickClose }, \"Close\") }));\n}\nexports.NotificationSnackBar = NotificationSnackBar;\n//# sourceMappingURL=NotificationSnackBar.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar api_endpoints_1 = require(\"@lion-frontend/shared/dist/endpoints/api-endpoints\");\nvar snackbar_data_1 = require(\"@lion-frontend/shared/dist/states/snackbar-data\");\nvar error_handlers_1 = require(\"@lion-frontend/shared/dist/utils/error-handlers\");\nvar axios_1 = __importDefault(require(\"axios\"));\nfunction loadServers(setServers, mounted) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response, data, errorString, serverList, serverMap;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, axios_1.default.get(api_endpoints_1.apiEndpoints.server.endpoints.serversList.url)];\n                case 1:\n                    response = _a.sent();\n                    data = response.data;\n                    errorString = error_handlers_1.getGeneralError(data);\n                    if (errorString != null) {\n                        return [2 /*return*/, snackbar_data_1.notificationData.makeError(errorString)];\n                    }\n                    if (mounted) {\n                        serverList = data.data;\n                        serverMap = new Map(serverList.map(function (s) { return [s.name, s]; }));\n                        setServers(serverMap);\n                    }\n                    return [2 /*return*/, snackbar_data_1.notificationData.makeEmpty()];\n            }\n        });\n    });\n}\nexports.loadServers = loadServers;\n//# sourceMappingURL=load-servers.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar api_endpoints_1 = require(\"@lion-frontend/shared/dist/endpoints/api-endpoints\");\nvar NotificationSnackBar_1 = require(\"@lion-frontend/shared/dist/notification/NotificationSnackBar\");\nvar router_endpoints_1 = require(\"@lion-frontend/shared/dist/endpoints/router-endpoints\");\nvar snackbar_data_1 = require(\"@lion-frontend/shared/dist/states/snackbar-data\");\nvar common_functions_1 = require(\"@lion-frontend/shared/dist/utils/common-functions\");\nvar error_handlers_1 = require(\"@lion-frontend/shared/dist/utils/error-handlers\");\nvar value_checker_1 = require(\"@lion-frontend/shared/dist/utils/value-checker\");\nvar core_1 = require(\"@material-ui/core\");\nvar ArrowBackOutlined_1 = __importDefault(require(\"@material-ui/icons/ArrowBackOutlined\"));\nvar DeleteOutlineOutlined_1 = __importDefault(require(\"@material-ui/icons/DeleteOutlineOutlined\"));\nvar SaveOutlined_1 = __importDefault(require(\"@material-ui/icons/SaveOutlined\"));\nvar axios_1 = __importDefault(require(\"axios\"));\nvar clsx_1 = __importDefault(require(\"clsx\"));\nvar react_1 = __importStar(require(\"react\"));\nvar react_router_dom_1 = require(\"react-router-dom\");\nvar server_style_1 = require(\"../../styles/server-style\");\nvar server_props_1 = require(\"../../props/server-props\");\nfunction isEdit(props) {\n    return 'server' in props;\n}\nfunction shouldShowError(str) {\n    return !value_checker_1.isStringEmpty(str);\n}\nfunction getErrorHelperText(str) {\n    return shouldShowError(str) ? str : '';\n}\nfunction ServerEdit(props) {\n    var _this = this;\n    // FIXME: Use StringDict instead to avoid duplicate code\n    var _a = __read(react_1.useState(isEdit(props) ? props.server.name : ''), 2), name = _a[0], setName = _a[1];\n    var _b = __read(react_1.useState(isEdit(props) ? props.server.url : ''), 2), url = _b[0], setUrl = _b[1];\n    var _c = __read(react_1.useState(isEdit(props) ? props.server.slug : ''), 2), slug = _c[0], setSlug = _c[1];\n    var _d = __read(react_1.useState(isEdit(props) ? props.server.description : ''), 2), description = _d[0], setDescription = _d[1];\n    var _e = __read(react_1.useState(isEdit(props) ? props.server.requireAuthentication : false), 2), requireAuthentication = _e[0], setRequireAuthentication = _e[1];\n    var _f = __read(react_1.useState(isEdit(props) ? props.server.requireAuthorization : false), 2), requireAuthorization = _f[0], setRequireAuthorization = _f[1];\n    var _g = __read(react_1.useState(''), 2), nameInvalidMessage = _g[0], setNameInvalidMessage = _g[1];\n    var _h = __read(react_1.useState(''), 2), urlInvalidMessage = _h[0], setUrlInvalidMessage = _h[1];\n    var _j = __read(react_1.useState(''), 2), slugInvalidMessage = _j[0], setSlugInvalidMessage = _j[1];\n    var _k = __read(react_1.useState(''), 2), descriptionInvalidMessage = _k[0], setDescriptionInvalidMessage = _k[1];\n    var _l = __read(common_functions_1.mutate(setNameInvalidMessage), 2), mutSetNameInvalidMessage = _l[0], mutClearNameInvalidMessage = _l[1];\n    var _m = __read(common_functions_1.mutate(setUrlInvalidMessage), 2), mutSetUrlInvalidMessage = _m[0], mutClearUrlInvalidMessage = _m[1];\n    var _o = __read(common_functions_1.mutate(setSlugInvalidMessage), 2), mutSetSlugInvalidMessage = _o[0], mutClearSlugInvalidMessage = _o[1];\n    var _p = __read(common_functions_1.mutate(setDescriptionInvalidMessage), 2), mutSetDescriptionInvalidMessage = _p[0], mutClearDescriptionInvalidMessage = _p[1];\n    var _q = __read(react_1.useState(snackbar_data_1.notificationData.makeEmpty()), 2), generalError = _q[0], setGeneralError = _q[1];\n    var _r = __read(common_functions_1.mutate(setGeneralError), 2), mutSetGeneralError = _r[0], mutClearGeneralError = _r[1];\n    var _s = __read(react_1.useState(server_props_1.ServerEditOption.NONE), 2), option = _s[0], setOption = _s[1];\n    var onUpdateName = function (e) {\n        setName(e.target.value);\n    };\n    var onUpdateUrl = function (e) {\n        setUrl(e.target.value);\n    };\n    var onUpdateSlug = function (e) {\n        setSlug(e.target.value);\n    };\n    var onUpdateDescription = function (e) {\n        setDescription(e.target.value);\n    };\n    var onUpdateAuthentication = function (e) {\n        setRequireAuthentication(e.target.checked);\n    };\n    var onUpdateAuthorization = function (e) {\n        setRequireAuthorization(e.target.checked);\n    };\n    // validate inputs\n    var onValidateInput = function () {\n        var errorMessage = 'This field cannot be empty';\n        var emptyMessage = '';\n        return !common_functions_1.joinBoolean([\n            value_checker_1.isStringEmpty(name) ? mutSetNameInvalidMessage(errorMessage) : mutClearNameInvalidMessage(emptyMessage),\n            !value_checker_1.isValidURL(url) ? mutSetUrlInvalidMessage(errorMessage) : mutClearUrlInvalidMessage(emptyMessage),\n            value_checker_1.isStringEmpty(slug) ? mutSetSlugInvalidMessage(errorMessage) : mutClearSlugInvalidMessage(emptyMessage),\n            value_checker_1.isStringEmpty(description) ? mutSetDescriptionInvalidMessage(errorMessage) : mutClearDescriptionInvalidMessage(emptyMessage),\n        ]);\n    };\n    var submitRequest = function (request) { return __awaiter(_this, void 0, void 0, function () {\n        var response, data, errorString, fieldError, isError, e_1;\n        var _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, axios_1.default.put(api_endpoints_1.apiEndpoints.server.endpoints.serverUpdate.url, request)];\n                case 1:\n                    response = _b.sent();\n                    data = response.data;\n                    errorString = error_handlers_1.getGeneralError(data);\n                    fieldError = (_a = data.error) === null || _a === void 0 ? void 0 : _a.fieldError;\n                    isError = common_functions_1.joinBoolean([\n                        errorString != null ? mutSetGeneralError(snackbar_data_1.notificationData.makeError(errorString)) : mutClearGeneralError(snackbar_data_1.notificationData.makeEmpty),\n                        (fieldError === null || fieldError === void 0 ? void 0 : fieldError.name) ? mutSetNameInvalidMessage(fieldError.name) : mutClearNameInvalidMessage(''),\n                        (fieldError === null || fieldError === void 0 ? void 0 : fieldError.description) ? mutSetDescriptionInvalidMessage(fieldError.description) : mutClearDescriptionInvalidMessage(''),\n                        (fieldError === null || fieldError === void 0 ? void 0 : fieldError.slug) ? mutSetSlugInvalidMessage(fieldError.slug) : mutClearSlugInvalidMessage(''),\n                        (fieldError === null || fieldError === void 0 ? void 0 : fieldError.url) ? mutSetUrlInvalidMessage(fieldError.url) : mutClearUrlInvalidMessage('')\n                    ]);\n                    return [2 /*return*/, !isError];\n                case 2:\n                    e_1 = _b.sent();\n                    mutSetGeneralError(snackbar_data_1.notificationData.makeError(error_handlers_1.getHTTPError(e_1)));\n                    return [2 /*return*/, false];\n                case 3: return [2 /*return*/];\n            }\n        });\n    }); };\n    var onSaveConfig = function () {\n        if (!onValidateInput()) {\n            return;\n        }\n        var newServer = {\n            name: name, url: url, slug: slug, description: description, requireAuthentication: requireAuthentication, requireAuthorization: requireAuthorization\n        };\n        var updateType = isEdit(props) ? server_props_1.ServerUpdateType.UPDATE : server_props_1.ServerUpdateType.ADD;\n        submitRequest({ data: newServer, type: updateType }).then(function (isOk) {\n            if (isOk) {\n                setOption(server_props_1.ServerEditOption.SAVE);\n                props.onSave(newServer);\n            }\n        });\n    };\n    var onDeleteConfig = function () { return __awaiter(_this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (isEdit(props)) {\n                submitRequest({ data: props.server, type: server_props_1.ServerUpdateType.DELETE }).then(function (isOk) {\n                    if (isOk) {\n                        setOption(server_props_1.ServerEditOption.DELETE);\n                        props.onDelete(props.server);\n                    }\n                });\n            }\n            else {\n                setGeneralError(snackbar_data_1.notificationData.makeError('Delete handler should only be invoked when editing existing server'));\n            }\n            return [2 /*return*/];\n        });\n    }); };\n    var onDiscardChange = function () {\n        setOption(server_props_1.ServerEditOption.BACK);\n    };\n    var styles = server_style_1.serverStyles();\n    var editForm = (react_1.default.createElement(react_1.default.Fragment, null,\n        react_1.default.createElement(\"div\", null,\n            react_1.default.createElement(\"h1\", { className: styles.titleStyle },\n                isEdit(props) ? 'Edit' : 'Create',\n                \" Server Configuration\"),\n            react_1.default.createElement(\"form\", { className: styles.form },\n                react_1.default.createElement(core_1.Grid, { container: true, spacing: 4 },\n                    react_1.default.createElement(core_1.Grid, { item: true, xs: 6 },\n                        react_1.default.createElement(core_1.TextField, { required: true, error: shouldShowError(nameInvalidMessage), helperText: getErrorHelperText(nameInvalidMessage), color: 'secondary', id: \"standard-required\", label: \"Server Name\", defaultValue: name, onChange: onUpdateName })),\n                    react_1.default.createElement(core_1.Grid, { item: true, xs: 6 },\n                        react_1.default.createElement(core_1.TextField, { required: true, error: shouldShowError(slugInvalidMessage), helperText: getErrorHelperText(slugInvalidMessage), color: 'secondary', id: \"standard-required\", label: \"Server Slug\", defaultValue: slug, onChange: onUpdateSlug })),\n                    react_1.default.createElement(core_1.Grid, { item: true, xs: 12 },\n                        react_1.default.createElement(core_1.TextField, { required: true, fullWidth: true, color: 'secondary', id: \"standard-required\", label: \"Server URL\", error: shouldShowError(urlInvalidMessage), helperText: getErrorHelperText(urlInvalidMessage), defaultValue: url, onChange: onUpdateUrl })),\n                    react_1.default.createElement(core_1.Grid, { item: true, xs: 6 },\n                        react_1.default.createElement(core_1.FormControlLabel, { control: react_1.default.createElement(core_1.Checkbox, { color: 'secondary', checked: requireAuthentication, onChange: onUpdateAuthentication }), label: 'Require Authentication', labelPlacement: \"end\" })),\n                    react_1.default.createElement(core_1.Grid, { item: true, xs: 6 },\n                        react_1.default.createElement(core_1.FormControlLabel, { control: react_1.default.createElement(core_1.Checkbox, { color: 'secondary', checked: requireAuthorization, onChange: onUpdateAuthorization }), label: 'Require Authorization', labelPlacement: \"end\" })),\n                    react_1.default.createElement(core_1.Grid, { item: true, xs: 12 },\n                        react_1.default.createElement(core_1.TextField, { required: true, multiline: true, fullWidth: true, id: \"standard-multiline-flexible\", label: \"Server Description\", color: 'secondary', error: shouldShowError(descriptionInvalidMessage), helperText: getErrorHelperText(descriptionInvalidMessage), value: description, onChange: onUpdateDescription })))),\n            react_1.default.createElement(\"div\", { className: styles.buttonWrapper },\n                react_1.default.createElement(core_1.Button, { color: \"secondary\", className: styles.buttonRightGap, startIcon: react_1.default.createElement(ArrowBackOutlined_1.default, null), onClick: onDiscardChange }, \"Back\"),\n                react_1.default.createElement(core_1.Button, { variant: \"contained\", color: \"secondary\", startIcon: react_1.default.createElement(SaveOutlined_1.default, null), onClick: onSaveConfig }, \"Save\"),\n                isEdit(props) && (react_1.default.createElement(core_1.Button, { className: clsx_1.default(styles.buttonRightEnd, styles.errorButton), variant: \"contained\", color: \"secondary\", startIcon: react_1.default.createElement(DeleteOutlineOutlined_1.default, null), onClick: onDeleteConfig }, \"Delete Server\")))),\n        react_1.default.createElement(NotificationSnackBar_1.NotificationSnackBar, { data: generalError, onClose: function () { return setGeneralError(snackbar_data_1.notificationData.makeEmpty()); } })));\n    if (option === server_props_1.ServerEditOption.NONE) {\n        return editForm;\n    }\n    else {\n        return react_1.default.createElement(react_router_dom_1.Redirect, { to: router_endpoints_1.routerEndpoints.servers.url });\n    }\n}\nexports.ServerEdit = ServerEdit;\n//# sourceMappingURL=ServerEdit.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar api_endpoints_1 = require(\"@lion-frontend/shared/dist/endpoints/api-endpoints\");\nvar NotificationSnackBar_1 = require(\"@lion-frontend/shared/dist/notification/NotificationSnackBar\");\nvar snackbar_data_1 = require(\"@lion-frontend/shared/dist/states/snackbar-data\");\nvar common_values_1 = require(\"@lion-frontend/shared/dist/utils/common-values\");\nvar error_handlers_1 = require(\"@lion-frontend/shared/dist/utils/error-handlers\");\nvar core_1 = require(\"@material-ui/core\");\nvar AddCircleOutlineOutlined_1 = __importDefault(require(\"@material-ui/icons/AddCircleOutlineOutlined\"));\nvar ArrowRightOutlined_1 = __importDefault(require(\"@material-ui/icons/ArrowRightOutlined\"));\nvar EditOutlined_1 = __importDefault(require(\"@material-ui/icons/EditOutlined\"));\nvar RefreshOutlined_1 = __importDefault(require(\"@material-ui/icons/RefreshOutlined\"));\nvar clsx_1 = __importDefault(require(\"clsx\"));\nvar material_table_1 = __importDefault(require(\"material-table\"));\nvar react_1 = __importStar(require(\"react\"));\nvar axios_1 = __importDefault(require(\"axios\"));\nvar react_router_dom_1 = require(\"react-router-dom\");\nvar router_endpoints_1 = require(\"@lion-frontend/shared/dist/endpoints/router-endpoints\");\nvar server_style_1 = require(\"../../styles/server-style\");\nvar tableColumns = [\n    { title: 'Name', field: 'name' },\n    { title: 'URL', field: 'url' }\n];\nfunction convertBoolToString(b) {\n    return b ? 'Yes' : 'No';\n}\nfunction ServerListDetailPanel(props) {\n    var styles = server_style_1.serverStyles();\n    return (react_1.default.createElement(\"div\", null,\n        react_1.default.createElement(core_1.Grid, { className: clsx_1.default(styles.grid, styles.indentedGrid), container: true, spacing: 2 },\n            react_1.default.createElement(core_1.Grid, { item: true, xs: 4 },\n                react_1.default.createElement(\"div\", { className: styles.detailPanelItemTitle }, \"Require Authorization\")),\n            react_1.default.createElement(core_1.Grid, { item: true, xs: 8 },\n                react_1.default.createElement(\"div\", { className: styles.detailPanelItemContent }, convertBoolToString(props.server.requireAuthorization))),\n            react_1.default.createElement(core_1.Grid, { item: true, xs: 4 },\n                react_1.default.createElement(\"div\", { className: styles.detailPanelItemTitle }, \"Require Authentication\")),\n            react_1.default.createElement(core_1.Grid, { item: true, xs: 8 },\n                react_1.default.createElement(\"div\", { className: styles.detailPanelItemContent }, convertBoolToString(props.server.requireAuthentication))),\n            react_1.default.createElement(core_1.Grid, { item: true, xs: 12 },\n                react_1.default.createElement(\"div\", { className: styles.detailPanelItemTitle }, \"Description\")),\n            react_1.default.createElement(core_1.Grid, { item: true, xs: 12 },\n                react_1.default.createElement(\"div\", { className: clsx_1.default(styles.detailPanelItemContent, styles.indentedGridItem) }, props.server.description)))));\n}\nfunction ServerList(props) {\n    var _this = this;\n    var styles = server_style_1.serverStyles();\n    var history = react_router_dom_1.useHistory();\n    var _a = __read(react_1.useState(snackbar_data_1.notificationData.makeEmpty()), 2), message = _a[0], setMessage = _a[1];\n    var onClickNew = function () {\n        history.push(router_endpoints_1.routerEndpoints.servers.create.url);\n    };\n    var tableActions = [\n        {\n            icon: function () { return react_1.default.createElement(EditOutlined_1.default, { color: 'secondary' }); },\n            tooltip: 'Edit Server',\n            onClick: function (e, server) {\n                if (Array.isArray(server)) {\n                    throw new Error('onClick in material table should not involve multiple server instances');\n                }\n                history.push(router_endpoints_1.routerEndpoints.servers.edit.urlBase + (server === null || server === void 0 ? void 0 : server.name));\n            }\n        }, {\n            icon: function () { return react_1.default.createElement(RefreshOutlined_1.default, { color: 'secondary' }); },\n            tooltip: 'Refresh Schema',\n            onClick: function (e, server) {\n                if (Array.isArray(server)) {\n                    throw new Error('onClick in material table should not involve multiple server instances');\n                }\n                ((function () { return __awaiter(_this, void 0, void 0, function () {\n                    var request, response, generalError, e_1;\n                    var _a;\n                    return __generator(this, function (_b) {\n                        switch (_b.label) {\n                            case 0:\n                                _b.trys.push([0, 2, , 3]);\n                                request = {\n                                    name: server.name\n                                };\n                                return [4 /*yield*/, axios_1.default.get(api_endpoints_1.apiEndpoints.server.endpoints.serverRefresh.url, { params: request })];\n                            case 1:\n                                response = (_b.sent()).data;\n                                generalError = error_handlers_1.getGeneralError(response);\n                                if (generalError) {\n                                    setMessage(snackbar_data_1.notificationData.makeError(generalError));\n                                }\n                                else {\n                                    setMessage(snackbar_data_1.notificationData.makeSuccess(\"Server \" + server.name + \" successfully refreshed\"));\n                                }\n                                console.log(\"clicked \" + ((_a = response.data) !== null && _a !== void 0 ? _a : ''));\n                                return [3 /*break*/, 3];\n                            case 2:\n                                e_1 = _b.sent();\n                                setMessage(snackbar_data_1.notificationData.makeError(error_handlers_1.getHTTPError(e_1)));\n                                return [3 /*break*/, 3];\n                            case 3: return [2 /*return*/];\n                        }\n                    });\n                }); })());\n            }\n        }\n    ];\n    return (react_1.default.createElement(\"div\", null,\n        react_1.default.createElement(\"h1\", { className: styles.titleStyle }, \"All Servers\"),\n        react_1.default.createElement(\"small\", { className: styles.helperTextStyle }, \"Click on \\\"Refresh\\\" to refresh the schema regularly\"),\n        react_1.default.createElement(\"div\", { className: styles.buttonWrapper },\n            react_1.default.createElement(core_1.Button, { className: styles.buttonRightEnd, color: \"secondary\", startIcon: react_1.default.createElement(AddCircleOutlineOutlined_1.default, null), onClick: onClickNew }, \"Add New Server\")),\n        react_1.default.createElement(material_table_1.default, { options: {\n                toolbar: false,\n                showTitle: false,\n                search: false,\n                actionsColumnIndex: -1,\n                paginationType: 'stepped',\n                pageSizeOptions: []\n            }, columns: tableColumns, actions: tableActions, data: Array.from(props.servers.values()), components: {\n                Container: function (props) { return react_1.default.createElement(\"div\", __assign({}, props)); }\n            }, icons: common_values_1.materialTableIcons, detailPanel: [\n                {\n                    icon: function () { return (react_1.default.createElement(ArrowRightOutlined_1.default, null)); },\n                    tooltip: 'Details',\n                    render: function (server) { return (react_1.default.createElement(ServerListDetailPanel, { server: server })); }\n                }\n            ] }),\n        react_1.default.createElement(NotificationSnackBar_1.NotificationSnackBar, { data: message, onClose: function () { return setMessage(snackbar_data_1.notificationData.makeEmpty()); } })));\n}\nexports.ServerList = ServerList;\n//# sourceMappingURL=ServerList.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction certify(trueCallback) {\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        trueCallback.apply(this, args);\n        return true;\n    };\n}\nexports.certify = certify;\nfunction falsify(falseCallback) {\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        falseCallback.apply(this, args);\n        return false;\n    };\n}\nexports.falsify = falsify;\n/**\n * Make the useState updating function to return true and false\n * THIS CANNOT BE USED AS A DEPENDENCY IN HOOKS BECAUSE IT'S NOT MEMOIZED\n *\n * @param trueCallback\n * @param falseCallback\n */\nfunction mutate(trueCallback, falseCallback) {\n    return [certify(trueCallback), falsify(falseCallback !== null && falseCallback !== void 0 ? falseCallback : trueCallback)];\n}\nexports.mutate = mutate;\nfunction joinBoolean(boolValues) {\n    return boolValues.reduce(function (acc, curr) { return acc || curr; }, false);\n}\nexports.joinBoolean = joinBoolean;\n//# sourceMappingURL=common-functions.js.map","import {Dispatch} from \"react\";\nimport {Query} from \"../../models/query\";\nimport {Server} from \"../../../servers-management/src/models/server\";\nimport {User, UserExtended} from \"../../models/user\";\nimport {Application} from \"../../models/application\";\nimport {SocialMediaSource} from \"../../models/social-media-source\";\n\nexport interface State {\n    user: User | null,\n    queries: Map<string, Query> | null,\n    fullQuerySchemas: Map<string, any> | null,\n    servers: Map<string, Server> | null,\n    users: Map<string, UserExtended> | null,\n    applications: Map<string, Application> | null,\n    socialMedia: Map<string, SocialMediaSource> | null,\n}\n\nexport interface Action {\n    type: GlobalActions,\n    payload: any | null,\n}\n\nexport type DispatchType = Dispatch<Action>;\n\nexport interface ContextProps {\n    state: State,\n    dispatch: DispatchType,\n}\n\nexport enum GlobalActions {\n    SET_USER,\n    REMOVE_USER,\n    SET_FULL_SCHEMAS,\n    SET_FULL_QUERIES,\n    SET_FULL_SERVERS,\n    SET_FULL_USERS,\n    SET_FULL_APPLICATIONS,\n    SET_FULL_SOCIAL_MEDIA,\n}\n\nexport function createDefaultState(): State {\n    return {\n        user: ((() => {\n            const user = localStorage.getItem('user');\n            if (user) {\n                return JSON.parse(user) as User;\n            } else {\n                return user as null;\n            }\n        })()),\n        queries: null,\n        fullQuerySchemas: null,\n        servers: null,\n        users: null,\n        applications: null,\n        socialMedia: null,\n    };\n}","import {Action, GlobalActions, State} from \"./types\";\n\nfunction setUser(state: State, action: Action) {\n    const newUser = action.payload;\n    if (newUser) {\n        localStorage.setItem('user', JSON.stringify(newUser));\n    } else {\n        localStorage.removeItem('user');\n    }\n    return {\n        ...state,\n        user: action.payload\n    };\n}\n\nfunction removeUser(state: State, action: Action) {\n    localStorage.removeItem('user');\n    return {\n        ...state,\n        user: null\n    };\n}\n\nexport const reducer = (state: State, action: Action) => {\n    switch (action.type) {\n        case GlobalActions.SET_USER:\n            return setUser(state, action);\n        case GlobalActions.REMOVE_USER:\n            return removeUser(state, action);\n        case GlobalActions.SET_FULL_QUERIES:\n            return {\n                ...state,\n                queries: action.payload\n            };\n        case GlobalActions.SET_FULL_SCHEMAS:\n            return {\n                ...state,\n                fullQuerySchemas: action.payload\n            };\n        case GlobalActions.SET_FULL_SERVERS:\n            return {\n                ...state,\n                servers: action.payload\n            }\n        case GlobalActions.SET_FULL_USERS:\n            return {\n                ...state,\n                users: action.payload\n            }\n        case GlobalActions.SET_FULL_APPLICATIONS:\n            return {\n                ...state,\n                applications: action.payload\n            }\n        case GlobalActions.SET_FULL_SOCIAL_MEDIA:\n            return {\n                ...state,\n                socialMedia: action.payload\n            }\n        default:\n            throw new Error('Invalid action type');\n    }\n};","import {StringDict} from \"@lion-frontend/shared/dist/states/string-dict\";\nimport React from \"react\";\nimport {Query} from \"../../models/query\";\nimport {QueryArgument} from \"../../states/query-argument\";\nimport {SchemaTree} from \"../../states/schema-tree\";\nimport {VizNode} from \"../../states/viz-node\";\nimport {ViewCommonProps} from \"./view-props\";\n\nexport enum QueryRouteType {\n    LIST, NEW, HISTORY\n}\n\nexport interface QueryProps extends ViewCommonProps {\n    routeType: QueryRouteType\n}\n\nexport interface QueryCreateProps {\n    addQuery(query: Query): void;\n}\n\nexport interface QueryHistoryProps {\n    query: Query,\n\n    deleteQuery(query: Query): void,\n\n    submitQuery(query: Query): void,\n}\n\nexport interface QueryHistoryTabPanelProps {\n    children?: React.ReactNode;\n    index: any;\n    value: any;\n}\n\nexport enum QueryListOption {\n    NEW, HISTORY, NONE\n}\n\nexport interface QueryListProps {\n    queries: Map<string, Query>\n}\n\nexport interface QueryCreateFormProps {\n    errorMessages: StringDict,\n    allSources: string[],\n    query: Query,\n\n    onUpdateQuery(newQuery: Query): void\n}\n\nexport interface QueryVizProps {\n    fullSchema: SchemaTree,\n    containerElem: HTMLElement,\n\n    onSelectNode?(data: VizNode): void,\n\n    onDeselectNode?(data: VizNode): void,\n}\n\nexport interface VizTypeMemoization {\n    [index: string]: any;\n}\n\nexport interface QuerySchemaNodeInputProps {\n    args: QueryArgument[] | null,\n    nodeName: string,\n\n    setInputs(newInputs: QueryArgument[]): void;\n}\n\nexport interface QuerySchemaVizProps {\n    fullSchema: SchemaTree,\n    lastActiveNodeName: string | null,\n    inputs: QueryArgument[] | null,\n\n    setActiveNode(vizNode: VizNode): void,\n\n    setInputs(inputs: QueryArgument[]): void,\n\n    deleteVizNode(node: VizNode): void,\n}","import React, {createContext, ReactNode, useReducer} from \"react\";\nimport {reducer} from \"./reducer\";\nimport {ContextProps, createDefaultState} from \"./types\";\n\nexport const globalStore = createContext<ContextProps>({\n    state: createDefaultState(),\n    dispatch: () => {\n    }\n});\nconst {Provider} = globalStore;\n\nconst initialState = createDefaultState();\nexport const GlobalStateProvider = ({children}: { children: ReactNode }) => {\n    const [state, dispatch] = useReducer(reducer, initialState);\n    return (<Provider value={{state, dispatch}}>{children}</Provider>);\n};","import {Theme} from \"@material-ui/core\";\nimport {fade, makeStyles} from \"@material-ui/core/styles\";\n\nconst drawerWidth = 240;\nexport const appStyles = makeStyles((theme: Theme) => ({\n    root: {\n        display: 'flex'\n    },\n    drawer: {\n        width: drawerWidth,\n        flexShrink: 0,\n    },\n    appBar: {\n        transition: theme.transitions.create(['margin', 'width'], {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n    },\n    appBarShift: {\n        width: `calc(100% - ${drawerWidth}px)`,\n        marginLeft: drawerWidth,\n        transition: theme.transitions.create(['margin', 'width'], {\n            easing: theme.transitions.easing.easeOut,\n            duration: theme.transitions.duration.enteringScreen,\n        }),\n    },\n    menuButton: {\n        marginRight: theme.spacing(2)\n    },\n    hide: {\n        display: 'none',\n    },\n    drawerHeader: {\n        display: 'flex',\n        ...theme.mixins.toolbar,\n    },\n    drawerPaper: {\n        width: drawerWidth,\n    },\n    content: {\n        flexGrow: 1,\n        padding: theme.spacing(4),\n        transition: theme.transitions.create('margin', {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n        marginLeft: -drawerWidth,\n        marginTop: '70px' // this is hardcoded to match the height of app bar\n    },\n    contentShift: {\n        transition: theme.transitions.create('margin', {\n            easing: theme.transitions.easing.easeOut,\n            duration: theme.transitions.duration.enteringScreen,\n        }),\n        marginLeft: 0\n    },\n    nameCardWrapper: {\n        width: `100%`\n    },\n    nameCardHeader: {\n        margin: '0 0',\n        color: '#212121',\n        fontSize: '1.5rem'\n    },\n    nameCard: {\n        width: '100%',\n        marginTop: '64px', // this is hardcoded to match the height of app bar\n        padding: theme.spacing(0, 0, 2, 2),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'flex-start'\n    },\n    linkNoStyle: {\n        textDecoration: 'none',\n        color: '#212121',\n        fontSize: '0.75rem'\n    },\n    linkActiveStyle: {\n        '&> div': {\n            backgroundColor: fade(theme.palette.primary.main, 0.8) // hack the active button color in drawer\n        }\n    }\n}));","import {ServerManagement} from \"@lion-frontend/servers-management/dist/components/ServerManagement\";\nimport {routerEndpoints} from \"@lion-frontend/shared/dist/endpoints/router-endpoints\";\nimport React, {memo, useContext, useEffect} from \"react\";\nimport {ServerRouteType} from \"../../../servers-management/src/props/server-props\";\nimport {globalStore} from \"../../states/global/context\";\nimport {GlobalActions} from \"../../states/global/types\";\nimport {ViewCommonProps} from \"../../types/props/view-props\";\n\ninterface ServersTabProps extends ViewCommonProps {\n    routeType: ServerRouteType,\n}\n\n/**\n * Modify and view servers\n */\nexport const ServersTab = memo((props: ServersTabProps) => {\n    const {updateTitle, routeType} = props;\n    const {state, dispatch} = useContext(globalStore);\n    useEffect(() => {\n        updateTitle(routerEndpoints.servers.name);\n    }, [updateTitle]);\n    return <ServerManagement\n        routeType={routeType}\n        data={state.servers}\n        onChange={newServers => dispatch({type: GlobalActions.SET_FULL_SERVERS, payload: newServers})}/>\n});\n","import React, {memo, useEffect} from \"react\";\nimport TranslationTool from \"translation_tool-lxwang2\";\nimport {routerEndpoints} from \"@lion-frontend/shared/dist/endpoints/router-endpoints\";\nimport {TranslatorPageProps} from \"../../types/props/translator-props\";\n\nexport const TranslatorTab = memo((props: TranslatorPageProps) => {\n    const {updateTitle} = props;\n    useEffect(() => {\n        updateTitle(routerEndpoints.translator.name);\n    }, [updateTitle]);\n    return (\n        <TranslationTool/>\n    )\n});","import {apiEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {getGeneralError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport axios from \"axios\";\nimport {UserResponse} from \"../../../types/responses/user-response\";\nimport {UserExtended} from \"../../../models/user\";\n\nexport async function loadUsers(onUsersLoaded: (users: Map<string, UserExtended>) => void, mounted: boolean) {\n    const response = (await axios.get(apiEndpoints.user.endpoints.usersList.url)).data as UserResponse;\n    const errorString = getGeneralError(response);\n    if (errorString) {\n        return notificationData.makeError(errorString);\n    }\n    if (mounted) {\n        const newUsers = new Map(response.data.map(u => [u.email, u]));\n        onUsersLoaded(newUsers);\n    }\n    return notificationData.makeEmpty();\n}","import {UserExtended} from \"../../models/user\";\n\nexport enum UserUpdateType {\n    DELETE, UPDATE\n}\n\nexport interface UserUpdateRequest {\n    type: UserUpdateType,\n    data: UserExtended\n}","import {\n    commonButtonStyles,\n    commonPageStyles,\n    errorButtonStyles,\n    formStyles\n} from \"@lion-frontend/shared/dist/styles/common-style\";\nimport {makeStyles, Theme} from \"@material-ui/core/styles\";\n\nexport const userStyles = makeStyles((theme: Theme) => ({\n    ...commonPageStyles(theme),\n    ...errorButtonStyles(theme),\n    ...commonButtonStyles(theme),\n    ...formStyles(theme),\n    formContainer: {\n        margin: `2.5rem auto 0 0`\n    },\n    buttons: {\n        marginTop: `2rem`\n    }\n}));","import {apiEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport {NotificationSnackBar} from \"@lion-frontend/shared/dist/notification/NotificationSnackBar\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {joinBoolean, mutate} from \"@lion-frontend/shared/dist/utils/common-functions\";\nimport {getGeneralError, getHTTPError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport {isValidNumber} from \"@lion-frontend/shared/dist/utils/value-checker\";\nimport {Button, Checkbox, Container, FormControlLabel, Grid, TextField} from \"@material-ui/core\";\nimport DeleteOutlineOutlinedIcon from '@material-ui/icons/DeleteOutlineOutlined';\nimport SaveOutlinedIcon from '@material-ui/icons/SaveOutlined';\nimport axios from \"axios\";\nimport clsx from \"clsx\";\nimport React, {useState} from \"react\";\nimport {userStyles} from \"../../../styles/user-style\";\nimport {UserEditProps} from \"../../../types/props/user-props\";\nimport {UserUpdateRequest, UserUpdateType} from \"../../../types/requests/user-requests\";\nimport {UserUpdateResponse} from \"../../../types/responses/user-response\";\n\n\nexport function UserEdit(props: UserEditProps) {\n    const [quota, setQuota] = useState(props.user.quota.toString());\n    const [isAdmin, setIsAdmin] = useState(true);\n    const [quotaErrorMessage, setQuotaErrorMessage] = useState('');\n    const [generalError, setGeneralError] = useState(notificationData.makeEmpty());\n\n    const [mutSetQuotaErrorMessage, mutClearQuotaErrorMessage] = mutate(setQuotaErrorMessage);\n    const [mutSetGeneralError, mutClearGeneralError] = mutate(setGeneralError);\n\n    const styles = userStyles();\n    const onModifyQuota = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setQuota(e.target.value);\n    };\n    const onModifyAdmin = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setIsAdmin(e.target.checked);\n    };\n    const onVerifyForm = () => {\n        return !(\n            isValidNumber(quota) ?\n                mutClearQuotaErrorMessage('') :\n                mutSetQuotaErrorMessage('Input must be a number')\n        );\n    };\n\n    const submitForm = async (request: UserUpdateRequest) => {\n        try {\n            const response = (await axios.put(apiEndpoints.user.endpoints.userUpdate.url, request))\n                .data as UserUpdateResponse;\n            const generalError = getGeneralError(response);\n            const fieldError = response.error?.fieldError;\n            const isError = joinBoolean([\n                generalError ? mutSetGeneralError(notificationData.makeError(generalError)) : mutClearGeneralError(notificationData.makeEmpty()),\n                fieldError?.quota ? mutSetQuotaErrorMessage(fieldError.quota) : mutClearQuotaErrorMessage(''),\n            ]);\n            return !isError;\n        } catch (e) {\n            setGeneralError(notificationData.makeError(getHTTPError(e)));\n            return false;\n        }\n    };\n    const onSubmit = async () => {\n        if (!onVerifyForm()) {\n            return\n        }\n        // todo: send request here\n        const numericQuota = +quota;\n        const request: UserUpdateRequest = {\n            type: UserUpdateType.UPDATE,\n            data: {...props.user, quota: numericQuota}\n        };\n        if (await submitForm(request)) {\n            props.onSave(request.data);\n        }\n    };\n    const onDiscard = async () => {\n        // todo: send request here\n        const request: UserUpdateRequest = {\n            type: UserUpdateType.DELETE,\n            data: props.user\n        };\n        if (await submitForm(request)) {\n            props.onDelete(props.user.email);\n        }\n    };\n    return (\n        <>\n            <div>\n                <h1 className={styles.titleStyle}>Edit User</h1>\n                <small className={styles.helperTextStyle}>For quota, Please enter a decimal number; a number with more\n                    than\n                    3 digits after the decimal point will be truncated</small>\n                <Container className={styles.formContainer} disableGutters={true} maxWidth={\"md\"}>\n                    <Grid container spacing={4}>\n                        <Grid item xs={6}>\n                            <TextField\n                                fullWidth\n                                disabled\n                                color={'secondary'}\n                                label={\"Name\"}\n                                value={props.user.name}\n                            />\n                        </Grid>\n                        <Grid item xs={6}>\n                            <TextField\n                                disabled\n                                fullWidth\n                                color={'secondary'}\n                                label={\"Email Address\"}\n                                value={props.user.email}\n                            />\n                        </Grid>\n                        <Grid item xs={6}>\n                            <TextField\n                                required\n                                fullWidth\n                                color={'secondary'}\n                                label={\"Quota Limit\"}\n                                value={quota}\n                                error={!!(quotaErrorMessage as any)}\n                                onChange={onModifyQuota}\n                                helperText={(quotaErrorMessage as any) ?? ''}\n                            />\n                        </Grid>\n                        <Grid item xs={6}>\n                            <FormControlLabel\n                                control={\n                                    <Checkbox\n                                        checked={isAdmin}\n                                        color={'secondary'}\n                                        onChange={onModifyAdmin}\n                                    />\n                                }\n                                label={'Is administrator access granted'}\n                            />\n                        </Grid>\n                    </Grid>\n\n                    <div className={clsx(styles.buttonWrapper, styles.buttons)}>\n                        <Button\n                            variant={'contained'}\n                            color={'secondary'}\n                            startIcon={<SaveOutlinedIcon/>}\n                            onClick={onSubmit}\n                        >\n                            Save Configuration\n                        </Button>\n                        <Button\n                            className={clsx(styles.errorButton, styles.buttonRightEnd)}\n                            variant={'contained'}\n                            startIcon={<DeleteOutlineOutlinedIcon/>}\n                            onClick={onDiscard}\n                        >\n                            Delete User\n                        </Button>\n                    </div>\n                </Container>\n            </div>\n            <NotificationSnackBar data={generalError} onClose={() => setGeneralError(notificationData.makeEmpty())}/>\n        </>\n    )\n}","import {materialTableIcons} from \"@lion-frontend/shared/dist/utils/common-values\";\nimport EditOutlinedIcon from \"@material-ui/icons/EditOutlined\";\nimport MaterialTable, {Action} from \"material-table\";\nimport React, {memo} from \"react\";\nimport {UserExtended} from \"../../../models/user\";\nimport {userStyles} from \"../../../styles/user-style\";\nimport {UserListProps} from \"../../../types/props/user-props\";\n\nconst tableColumns = [\n    {title: 'User name', field: 'name'},\n    {title: 'Quota used', field: 'usedQuota'},\n    {title: 'Quota available', field: 'quota'}\n];\n\n\nexport const UserList = memo((props: UserListProps) => {\n    const tableActions: Action<UserExtended>[] = [\n        {\n            icon: () => <EditOutlinedIcon color='secondary'/>,\n            tooltip: 'Edit User',\n            onClick: (e, user) => {\n                if (Array.isArray(user)) {\n                    throw new Error('onClick in material table should not involve multiple user instances');\n                }\n                props.onEdit(user);\n            }\n        },\n    ];\n    const styles = userStyles();\n    return (\n        <div>\n            <h1 className={styles.titleStyle}>Manage Users</h1>\n            <div className={styles.form}>\n                <MaterialTable\n                    options={{\n                        toolbar: false,\n                        showTitle: false,\n                        search: false,\n                        actionsColumnIndex: -1,\n                        paginationType: 'stepped',\n                        pageSizeOptions: []\n                    }}\n                    columns={tableColumns}\n                    actions={tableActions}\n                    data={Array.from(props.users.values())}\n                    components={{\n                        Container: (props) => <div {...props}/>\n                    }}\n                    icons={materialTableIcons}\n                />\n            </div>\n        </div>\n    )\n});","import {NotificationSnackBar} from \"@lion-frontend/shared/dist/notification/NotificationSnackBar\";\nimport {notificationData, NotificationSnackBarData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {getHTTPError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport React, {memo, useContext, useEffect, useState} from \"react\";\nimport {useHistory, useParams} from \"react-router-dom\";\nimport {routerEndpoints} from \"@lion-frontend/shared/dist/endpoints/router-endpoints\";\nimport {UserExtended} from \"../../models/user\";\nimport {globalStore} from \"../../states/global/context\";\nimport {GlobalActions} from \"../../states/global/types\";\nimport {RouteParams} from \"../../../servers-management/src/props/server-props\";\nimport {UserProps} from \"../../types/props/user-props\";\nimport {loadUsers} from \"./users/load-users\";\nimport {UserEdit} from \"./users/UserEdit\";\nimport {UserList} from \"./users/UserList\";\n\n\nfunction escapeEmail(email: string) {\n    return encodeURI(email);\n}\n\nfunction restoreEmail(str: string) {\n    return decodeURI(str);\n}\n\n/**\n * View and modify users\n */\nexport const UsersTab = memo((props: UserProps) => {\n    const {updateTitle} = props;\n    const [listError, setListError] = useState<NotificationSnackBarData>(notificationData.makeEmpty());\n    const passedUserEmail = useParams<RouteParams>()[routerEndpoints.queries.history.paramName];\n    const {state, dispatch} = useContext(globalStore);\n    const history = useHistory();\n    useEffect(() => {\n        updateTitle(routerEndpoints.users.name);\n    }, [updateTitle]);\n    useEffect(() => {\n        let mounted = true;\n        if (state.users != null) {\n            return;\n        }\n        (async () => {\n            try {\n                const result = await loadUsers(\n                    (newUsers) => dispatch({type: GlobalActions.SET_FULL_USERS, payload: newUsers}),\n                    mounted\n                );\n                if (mounted) {\n                    setListError(result);\n                }\n            } catch (e) {\n                setListError(notificationData.makeError(getHTTPError(e)));\n            }\n        })();\n        return () => {\n            mounted = false;\n        }\n    }, [state, dispatch]);\n    const usersWithDefault = state.users ?? new Map<string, UserExtended>();\n    const onEditUser = (user: UserExtended) => {\n        if (user.email) {\n            history.push(routerEndpoints.users.edit.urlBase + escapeEmail(user.email));\n        }\n    };\n    const onSaveUser = (user: UserExtended) => {\n        const newUsers = new Map(usersWithDefault);\n        newUsers.set(user.email, user);\n        dispatch({type: GlobalActions.SET_FULL_USERS, payload: newUsers});\n        setListError(notificationData.makeSuccess('Successfully updated users'));\n        history.push(routerEndpoints.users.url);\n    };\n    const onDeleteUser = (rawEmail: string) => {\n        const newUsers = new Map(usersWithDefault);\n        if (newUsers.get(rawEmail)?.email === state.user?.email) {\n            newUsers.delete(rawEmail);\n            dispatch({type: GlobalActions.SET_USER, payload: null});\n            dispatch({type: GlobalActions.SET_FULL_USERS, payload: newUsers});\n            return;\n        }\n        newUsers.delete(rawEmail);\n        // setRedirectType(UserRedirectType.LIST);\n        dispatch({type: GlobalActions.SET_FULL_USERS, payload: newUsers});\n        setListError(notificationData.makeSuccess('Successfully updated users'));\n        history.push(routerEndpoints.users.url);\n    };\n\n    let child = <UserList users={usersWithDefault} onEdit={onEditUser}/>;\n    if (props.isEdit && passedUserEmail != null) {\n        const user = usersWithDefault.get(restoreEmail(passedUserEmail));\n        if (user != null) {\n            child = <UserEdit onDelete={onDeleteUser} onSave={onSaveUser} user={user}/>;\n        }\n    }\n    return (\n        <>\n            <div>\n                {child}\n            </div>\n            <NotificationSnackBar data={listError} onClose={() => setListError({isError: true, message: null})}/>\n        </>\n    )\n});","import {Application} from \"../../models/application\";\n\nexport enum ApplicationRequestType {\n    UPDATE, DELETE, CREATE\n}\n\nexport interface ApplicationUpdateRequest {\n    type: ApplicationRequestType,\n    data: Application\n}","import {\n    commonButtonStyles,\n    commonPageStyles,\n    errorButtonStyles,\n    formStyles\n} from \"@lion-frontend/shared/dist/styles/common-style\";\nimport {makeStyles, Theme} from \"@material-ui/core/styles\";\n\nexport const applicationStyles = makeStyles((theme: Theme) => ({\n    ...commonPageStyles(theme),\n    ...errorButtonStyles(theme),\n    ...commonButtonStyles(theme),\n    ...formStyles(theme),\n    submitButtonWrapper: {\n        marginTop: theme.spacing(4)\n    }\n}));","import {apiEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport {NotificationSnackBar} from \"@lion-frontend/shared/dist/notification/NotificationSnackBar\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {stringDict, StringDict} from \"@lion-frontend/shared/dist/states/string-dict\";\nimport {joinBoolean, mutate} from \"@lion-frontend/shared/dist/utils/common-functions\";\nimport {getGeneralError, getHTTPError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport {isValidURL} from \"@lion-frontend/shared/dist/utils/value-checker\";\nimport {Button, Container, Grid, TextField} from \"@material-ui/core\";\nimport DeleteOutlineOutlinedIcon from '@material-ui/icons/DeleteOutlineOutlined';\nimport SaveOutlinedIcon from '@material-ui/icons/SaveOutlined';\nimport SystemUpdateAltOutlinedIcon from '@material-ui/icons/SystemUpdateAltOutlined';\nimport axios from \"axios\";\nimport clsx from \"clsx\";\nimport React, {useState} from \"react\";\nimport {Application} from \"../../../models/application\";\nimport {applicationStyles} from \"../../../styles/application-style\";\nimport {ApplicationCreateProps} from \"../../../types/props/application-props\";\nimport {ApplicationRequestType, ApplicationUpdateRequest} from \"../../../types/requests/application-requests\";\nimport {ApplicationUpdateResponse} from \"../../../types/responses/application-responses\";\n\nconst nameField = 'name';\nconst callbackURLField = 'callbackURL';\nconst homeField = 'home';\nconst descriptionField = 'description';\n\n// FIXME: memoize necessary functions\nexport function ApplicationCreate(props: ApplicationCreateProps) {\n    const [values, setValues] = useState<StringDict>(\n        props.existingApplication ? (props.existingApplication as StringDict) : {}\n    );\n    const [fieldErrorMessages, setFieldErrorMessages] = useState<StringDict>({});\n    const [generalErrorMessage, setGeneralErrorMessage] = useState(notificationData.makeEmpty());\n\n    const [mutSetFieldErrorMessages, mutClearFieldErrorMessages] = mutate(setFieldErrorMessages);\n    const [mutSetGeneralErrorMessages, mutClearGeneralErrorMessages] = mutate(setGeneralErrorMessage);\n\n    const styles = applicationStyles();\n\n    const onChangeValues = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>, key: string) => {\n        const value = e.target.value as string;\n        setValues((o: StringDict) => stringDict.update(o, key, value));\n    };\n    const onVerifyForm = () => {\n        const isError = joinBoolean([\n            stringDict.isValueEmpty(values, nameField) ?\n                mutSetFieldErrorMessages((o: StringDict) => stringDict.update(o, nameField, 'Name must not be empty')) :\n                mutClearFieldErrorMessages((o: StringDict) => stringDict.unset(o, nameField)),\n            !stringDict.validate(values, callbackURLField, isValidURL) ?\n                mutSetFieldErrorMessages((o: StringDict) => stringDict.update(o, callbackURLField, 'callbackURL must not be empty')) :\n                mutClearFieldErrorMessages((o: StringDict) => stringDict.unset(o, callbackURLField)),\n            stringDict.isValueEmpty(values, homeField) ?\n                mutSetFieldErrorMessages((o: StringDict) => stringDict.update(o, homeField, 'Home must not be empty')) :\n                mutClearFieldErrorMessages((o: StringDict) => stringDict.unset(o, homeField))\n        ]);\n        return !isError;\n    };\n\n    const submitRequest = async (request: ApplicationUpdateRequest) => {\n        try {\n            const response = (await axios.put(apiEndpoints.application.endpoints.applicationUpdate.url, request))\n                .data as ApplicationUpdateResponse;\n            const generalError = getGeneralError(response);\n            const fieldError = response.error?.fieldError;\n            const isError = joinBoolean([\n                generalError ?\n                    mutSetGeneralErrorMessages(notificationData.makeError(generalError)) :\n                    mutClearGeneralErrorMessages(notificationData.makeEmpty()),\n                fieldError?.callbackURL ?\n                    mutSetFieldErrorMessages((o: StringDict) => stringDict.update(o, callbackURLField, fieldError.callbackURL)) :\n                    mutClearFieldErrorMessages((o: StringDict) => stringDict.unset(o, callbackURLField)),\n                fieldError?.home ?\n                    mutSetFieldErrorMessages((o: StringDict) => stringDict.update(o, homeField, fieldError.home)) :\n                    mutClearFieldErrorMessages((o: StringDict) => stringDict.unset(o, homeField)),\n                fieldError?.name ?\n                    mutSetFieldErrorMessages((o: StringDict) => stringDict.update(o, nameField, fieldError.name)) :\n                    mutClearFieldErrorMessages((o: StringDict) => stringDict.unset(o, nameField))\n            ]);\n            return !isError;\n        } catch (e) {\n            return !mutSetGeneralErrorMessages(notificationData.makeError(getHTTPError(e)));\n        }\n    };\n    const onCreateNew = async () => {\n        if (!onVerifyForm()) {\n            return;\n        }\n        const request: ApplicationUpdateRequest = {\n            type: ApplicationRequestType.CREATE,\n            data: values as Application\n        };\n        if (await submitRequest(request)) {\n            props.onCreate(values as Application);\n        }\n    };\n    const onUpdateExisting = async () => {\n        if (!onVerifyForm()) {\n            return;\n        }\n        const request: ApplicationUpdateRequest = {\n            type: ApplicationRequestType.UPDATE,\n            data: values as Application\n        };\n        if (await submitRequest(request)) {\n            props.onUpdate(values as Application);\n        }\n    };\n    const onDeleteExisting = async () => {\n        const request: ApplicationUpdateRequest = {\n            type: ApplicationRequestType.DELETE,\n            data: values as Application\n        };\n        if (await submitRequest(request)) {\n            props.onDelete(values as Application);\n        }\n    };\n\n    let buttons;\n    if (props.existingApplication) {\n        buttons = (\n            <div className={clsx(styles.submitButtonWrapper, styles.buttonWrapper)}>\n                <Button\n                    variant={'contained'}\n                    color={'secondary'}\n                    onClick={onUpdateExisting}\n                    startIcon={<SystemUpdateAltOutlinedIcon/>}\n                >\n                    Update Application\n                </Button>\n                <Button\n                    className={clsx(styles.buttonRightEnd, styles.errorButton)}\n                    variant={'contained'}\n                    onClick={onDeleteExisting}\n                    startIcon={<DeleteOutlineOutlinedIcon/>}\n                >\n                    Delete Application\n                </Button>\n            </div>\n        );\n    } else {\n        buttons = (\n            <div className={clsx(styles.submitButtonWrapper, styles.buttonWrapper)}>\n                <Button\n                    variant={'contained'}\n                    color={'secondary'}\n                    onClick={onCreateNew}\n                    startIcon={<SaveOutlinedIcon/>}\n                >\n                    Save Application\n                </Button>\n            </div>\n        );\n    }\n    return (\n        <>\n            <div>\n                <h1 className={styles.titleStyle}>\n                    {\n                        props.existingApplication ? 'Edit Application' : 'Create Application'\n                    }\n                </h1>\n                <Container className={styles.form} disableGutters={true} maxWidth={'sm'}>\n                    <Grid container spacing={4}>\n                        <Grid item xs={12}>\n                            <TextField\n                                required\n                                fullWidth\n                                color={'secondary'}\n                                value={stringDict.getValueWithDefault(values, nameField)}\n                                label={'Name'}\n                                error={stringDict.isValueNonempty(fieldErrorMessages, nameField)}\n                                helperText={stringDict.getValueWithDefault(fieldErrorMessages, nameField)}\n                                onChange={e => onChangeValues(e, nameField)}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField\n                                required\n                                fullWidth\n                                color={'secondary'}\n                                value={stringDict.getValueWithDefault(values, callbackURLField)}\n                                label={'Callback URL'}\n                                error={stringDict.isValueNonempty(fieldErrorMessages, callbackURLField)}\n                                helperText={stringDict.getValueWithDefault(fieldErrorMessages, callbackURLField)}\n                                onChange={e => onChangeValues(e, callbackURLField)}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField\n                                required\n                                fullWidth\n                                color={'secondary'}\n                                value={stringDict.getValueWithDefault(values, homeField)}\n                                label={'Home'}\n                                error={stringDict.isValueNonempty(fieldErrorMessages, homeField)}\n                                helperText={stringDict.getValueWithDefault(fieldErrorMessages, homeField)}\n                                onChange={e => onChangeValues(e, homeField)}\n                            />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField\n                                multiline\n                                fullWidth\n                                color={'secondary'}\n                                value={stringDict.getValueWithDefault(values, descriptionField)}\n                                label={'Description'}\n                                error={stringDict.isValueNonempty(fieldErrorMessages, descriptionField)}\n                                helperText={stringDict.getValueWithDefault(fieldErrorMessages, descriptionField)}\n                                onChange={e => onChangeValues(e, descriptionField)}\n                            />\n                        </Grid>\n                    </Grid>\n                    {buttons}\n                </Container>\n            </div>\n            <NotificationSnackBar data={generalErrorMessage}\n                                  onClose={() => setGeneralErrorMessage(notificationData.makeEmpty())}/>\n        </>\n    )\n}","import {materialTableIcons} from \"@lion-frontend/shared/dist/utils/common-values\";\nimport {Button} from \"@material-ui/core\";\nimport AddCircleOutlineOutlinedIcon from \"@material-ui/icons/AddCircleOutlineOutlined\";\nimport EditOutlinedIcon from \"@material-ui/icons/EditOutlined\";\nimport MaterialTable, {Action} from \"material-table\";\nimport React, {memo} from \"react\";\nimport {Application} from \"../../../models/application\";\nimport {applicationStyles} from \"../../../styles/application-style\";\nimport {ApplicationListProps} from \"../../../types/props/application-props\";\n\nconst tableColumns = [\n    {title: 'Name', field: 'name'},\n    {title: 'Home', field: 'home'}\n];\n\nexport const ApplicationList = memo((props: ApplicationListProps) => {\n    const styles = applicationStyles();\n    const tableActions: Action<Application>[] = [\n        {\n            icon: () => <EditOutlinedIcon color='secondary'/>,\n            tooltip: 'Edit Server',\n            onClick: (e, app) => {\n                if (Array.isArray(app)) {\n                    throw new Error('onClick in material table should not involve multiple application instances');\n                }\n                props.onEdit(app);\n            }\n        },\n    ];\n    return (\n        <div>\n            <h1>All Applications</h1>\n            <div className={styles.buttonWrapper}>\n                <Button\n                    className={styles.buttonRightEnd}\n                    color=\"secondary\"\n                    startIcon={<AddCircleOutlineOutlinedIcon/>}\n                    onClick={props.onCreate}\n                >\n                    Add New Application\n                </Button>\n            </div>\n            <MaterialTable\n                options={{\n                    toolbar: false,\n                    showTitle: false,\n                    search: false,\n                    actionsColumnIndex: -1,\n                    paginationType: 'stepped',\n                    pageSizeOptions: []\n                }}\n                columns={tableColumns}\n                actions={tableActions}\n                data={Array.from(props.applications.values())}\n                components={{\n                    Container: (props) => <div {...props}/>\n                }}\n                icons={materialTableIcons}\n            />\n        </div>\n    )\n});","import {Application} from \"../../../models/application\";\nimport axios from \"axios\";\nimport {apiEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport {ApplicationResponse} from \"../../../types/responses/application-responses\";\nimport {getGeneralError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {v4 as uuidv4} from \"uuid\";\n\nexport async function loadApplications(onApplicationsLoaded: (maps: Map<string, Application>) => void, mounted: boolean) {\n    const response = (await axios.get(apiEndpoints.application.endpoints.applicationList.url))\n        .data as ApplicationResponse;\n    const errorString = getGeneralError(response);\n    if (errorString) {\n        return notificationData.makeError(errorString);\n    }\n    if (mounted) {\n        const newApps = new Map(response.data.map(a => {\n            if (a.id != null) {\n                return [a.id, a];\n            } else {\n                const id = uuidv4();\n                return [id, {...a, id}];\n            }\n        }));\n        onApplicationsLoaded(newApps);\n    }\n    return notificationData.makeEmpty();\n}","import {NotificationSnackBar} from \"@lion-frontend/shared/dist/notification/NotificationSnackBar\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {getHTTPError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport React, {memo, useContext, useEffect, useState} from \"react\";\nimport {Redirect, Route, Switch, useHistory, useParams} from \"react-router-dom\";\nimport {v4 as uuidv4} from 'uuid';\nimport {routerEndpoints} from \"@lion-frontend/shared/dist/endpoints/router-endpoints\";\nimport {Application} from \"../../models/application\";\nimport {ApplicationsProps} from \"../../types/props/application-props\";\nimport {RouteParams} from \"../../../servers-management/src/props/server-props\";\nimport {ApplicationCreate} from \"./applications/ApplicationCreate\";\nimport {ApplicationList} from \"./applications/ApplicationList\";\nimport {GlobalActions} from \"../../states/global/types\";\nimport {globalStore} from \"../../states/global/context\";\nimport {loadApplications} from \"./applications/load-applications\";\n\n/**\n * View and modify applications\n */\nexport const ApplicationsTab = memo((props: ApplicationsProps) => {\n    const {updateTitle} = props;\n    // FIXME: use a more consistent redirection mechanism\n    const [listError, setListError] = useState(notificationData.makeEmpty());\n    const selectedAppID = useParams<RouteParams>()[routerEndpoints.applications.edit.paramName];\n    const history = useHistory();\n    const {state, dispatch} = useContext(globalStore);\n    useEffect(() => {\n        updateTitle(routerEndpoints.applications.name);\n    }, [updateTitle]);\n    useEffect(() => {\n        let mounted = true;\n        if (state.applications != null) {\n            return;\n        }\n        (async () => {\n            try {\n                const result = await loadApplications(\n                    (newApplications) => dispatch({type: GlobalActions.SET_FULL_APPLICATIONS, payload: newApplications}),\n                    mounted\n                );\n                if (mounted) {\n                    setListError(result);\n                }\n            } catch (e) {\n                setListError(notificationData.makeError(getHTTPError(e)));\n            }\n        })();\n        return () => {\n            mounted = false;\n        }\n    }, [state.applications, dispatch]);\n    const applicationsWithDefault = state.applications ?? new Map<string, Application>();\n    const onRedirectList = () => {\n        history.push(routerEndpoints.applications.url);\n    }\n    const onRedirectCreate = () => {\n        history.push(routerEndpoints.applications.create.url);\n    };\n    const onRedirectEdit = (app: Application) => {\n        history.push(routerEndpoints.applications.edit.urlBase + app.id);\n    };\n    const onCreateFinished = (app: Application) => {\n        const updatedApp = app.id ? app : {...app, id: uuidv4()};\n        const updated = new Map(applicationsWithDefault);\n        updated.set(updatedApp.id as string, updatedApp);\n        onRedirectList();\n        setListError(notificationData.makeSuccess('Successfully updated applications'));\n        dispatch({type: GlobalActions.SET_FULL_APPLICATIONS, payload: updated});\n    };\n    const onModificationFinished = onCreateFinished;\n    const onDeleteFinished = (app: Application) => {\n        if (!app.id) {\n            throw new Error('ID must be specified for deleting app to work');\n        }\n        const updated = new Map(applicationsWithDefault);\n        updated.delete(app.id as string);\n        onRedirectList();\n        setListError(notificationData.makeSuccess('Successfully updated applications'));\n        dispatch({type: GlobalActions.SET_FULL_APPLICATIONS, payload: updated});\n    };\n    const selectedApplication = applicationsWithDefault.get(selectedAppID);\n    return (\n        <div>\n            <Switch>\n                <Route exact path={routerEndpoints.applications.url}>\n                    <ApplicationList\n                        applications={applicationsWithDefault}\n                        onCreate={onRedirectCreate}\n                        onEdit={onRedirectEdit}\n                    />\n                    <NotificationSnackBar data={listError} onClose={() => setListError(notificationData.makeEmpty())}/>\n                </Route>\n                <Route exact path={routerEndpoints.applications.create.url}>\n                    <ApplicationCreate\n                        existingApplication={null}\n                        onCreate={onCreateFinished}\n                        onUpdate={onModificationFinished}\n                        onDelete={onDeleteFinished}\n                    />\n                </Route>\n                <Route path={routerEndpoints.applications.edit.urlDynamic}>\n                    {\n                        selectedApplication == null ? (\n                            <Redirect to={routerEndpoints.applications.url}/>\n                        ) : (\n                            <ApplicationCreate\n                                existingApplication={selectedApplication}\n                                onCreate={onCreateFinished}\n                                onUpdate={onModificationFinished}\n                                onDelete={onDeleteFinished}\n                            />\n                        )\n                    }\n                </Route>\n            </Switch>\n        </div>\n    );\n});","import {commonPageStyles} from \"@lion-frontend/shared/dist/styles/common-style\";\nimport {makeStyles, Theme} from \"@material-ui/core/styles\";\n\nexport const helpStyle = makeStyles((theme: Theme) => ({\n    ...commonPageStyles(theme),\n    content: {\n        margin: theme.spacing(6, 0),\n    },\n    section: {\n        margin: theme.spacing(5, 0),\n    },\n    redirectButton: {\n        marginBottom: theme.spacing(3)\n    }\n}));","import {pageEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport {Button, Container} from \"@material-ui/core\";\nimport OpenInNewOutlinedIcon from '@material-ui/icons/OpenInNewOutlined';\nimport React, {useEffect} from \"react\";\nimport {routerEndpoints} from \"@lion-frontend/shared/dist/endpoints/router-endpoints\";\nimport {helpStyle} from \"../../styles/help-style\";\nimport {HelpPageProps} from \"../../types/props/help-props\";\n\n\nexport function HelpTab(props: HelpPageProps) {\n    const {updateTitle} = props;\n    useEffect(() => {\n        updateTitle(routerEndpoints.help.name);\n    }, [updateTitle]);\n    const styles = helpStyle();\n    return (\n        <Container disableGutters={true} maxWidth={'md'}>\n            <h1 className={styles.titleStyle}>More Information</h1>\n            <article className={styles.content}>\n                <section className={styles.section}>\n                    <h3>Social Media Providers</h3>\n                    <p>In order to build queries for each social media provider, you need to log into an account and\n                        authorize this system to perform queries on your behalf.</p>\n                </section>\n                <section className={styles.section}>\n                    <h3>Applications</h3>\n                    <p>Applications are servers that receive your data when you query.</p>\n                    <p>By default we assume that you want access to the data processing server but if you have a server\n                        of your own that you want to have access to your data, then you can just add it here and when\n                        you submit a query it will receive the data.</p>\n                </section>\n                <section className={styles.section}>\n                    <h3>Queries</h3>\n                    <p>Queries represent traversals through a graph of relationships.</p>\n                    <p>Here you can create queries depending on social media providers that you've authorized.</p>\n                    <p>After you create a query, you can manage it to see the raw data from the query, what attributes\n                        you've chosen, the history, as well as update it.</p>\n                </section>\n            </article>\n            <Button\n                className={styles.redirectButton}\n                color={'secondary'}\n                startIcon={<OpenInNewOutlinedIcon/>}\n                onClick={() => window.open(pageEndpoints.projectMainPage.url, '_blank')}\n            >\n                Project Homepage\n            </Button>\n        </Container>\n    )\n}","import React from \"react\";\n\nexport function NotFoundTab() {\n    return (\n        <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n            <h1 style={{fontWeight: 300}}>You are trying to visit contents that do not exist!</h1>\n        </div>\n    )\n}","import {QueryIntermediate} from \"../../models/query\";\n\nexport interface QueryFullSchemaRequest {\n    source: string\n}\n\nexport interface QueryExecuteRequest {\n    data: {\n        queryName: string,\n    }\n}\n\nexport enum QueryUpdateType {\n    ADD, DELETE, EXECUTE // TODO: EXECUTE flag will be deprecated\n}\n\nexport interface QueryUpdateRequest {\n    type: QueryUpdateType,\n    data: QueryIntermediate,\n}\n\nexport interface QueryHistoryRecordsListRequest {\n    queryName: string\n}","import {commonButtonStyles, commonPageStyles, errorButtonStyles} from \"@lion-frontend/shared/dist/styles/common-style\";\nimport {grey} from \"@material-ui/core/colors\";\nimport {makeStyles, Theme} from \"@material-ui/core/styles\";\n\nexport const profileStyles = makeStyles((theme: Theme) => ({\n    ...commonPageStyles(theme),\n    ...errorButtonStyles(theme),\n    ...commonButtonStyles(theme),\n    grid: {\n        margin: theme.spacing(5, 0),\n    },\n    gridRowSeparated: {\n        borderBottom: `1px solid ${grey[\"200\"]}`\n    },\n    gridRow: {\n        padding: theme.spacing(2, 0)\n    },\n    itemName: {\n        fontWeight: 500\n    },\n    itemValue: {\n        fontWeight: 300\n    },\n    logOutButton: {\n        marginTop: theme.spacing(2)\n    }\n}));","import {apiEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport {NotificationSnackBar} from \"@lion-frontend/shared/dist/notification/NotificationSnackBar\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {getHTTPError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport {Button, Container, Grid} from \"@material-ui/core\";\nimport {Close} from \"@material-ui/icons\"\nimport axios from \"axios\";\nimport clsx from \"clsx\";\nimport React, {useContext, useEffect, useState} from \"react\";\nimport {useHistory} from \"react-router-dom\";\nimport {routerEndpoints} from \"@lion-frontend/shared/dist/endpoints/router-endpoints\";\nimport {globalStore} from \"../../states/global/context\";\nimport {GlobalActions} from \"../../states/global/types\";\nimport {profileStyles} from \"../../styles/profile-style\";\nimport {ProfilePageProps} from \"../../types/props/profile-props\";\n\nexport function ProfileTab(props: ProfilePageProps) {\n    const {updateTitle} = props;\n    const [generalError, setGeneralError] = useState(notificationData.makeEmpty());\n    const history = useHistory();\n    useEffect(() => {\n        updateTitle(routerEndpoints.profile.name);\n    }, [updateTitle]);\n    const {state, dispatch} = useContext(globalStore);\n    const onLogOut = async () => {\n        try {\n            await axios.get(apiEndpoints.general.endpoints.logOutCredential.url);\n            dispatch({payload: null, type: GlobalActions.REMOVE_USER});\n            history.push(routerEndpoints.base.url);\n        } catch (e) {\n            setGeneralError(notificationData.makeError(getHTTPError(e)));\n        }\n    };\n    const styles = profileStyles();\n    return (\n        <>\n            <div>\n                <h1 className={styles.titleStyle}>User Profile</h1>\n                <Container className={styles.grid} maxWidth={'sm'} disableGutters={true}>\n                    <Grid className={clsx(styles.gridRowSeparated, styles.gridRow)} container spacing={2}>\n                        <Grid className={styles.itemName} item xs={4}>\n                            Username\n                        </Grid>\n                        <Grid className={styles.itemValue} item xs={8}>\n                            {state.user?.name}\n                        </Grid>\n                    </Grid>\n                    <Grid className={styles.gridRow} container spacing={2}>\n                        <Grid className={styles.itemName} item xs={4}>\n                            Authorization Level\n                        </Grid>\n                        <Grid className={styles.itemValue} item xs={8}>\n                            {state.user?.isAdmin ? \"Administrator\" : \"User\"}\n                        </Grid>\n                    </Grid>\n                </Container>\n                <Button\n                    className={clsx(styles.errorButton, styles.logOutButton)}\n                    variant={'contained'}\n                    onClick={onLogOut}\n                    startIcon={<Close/>}\n                >\n                    LogOut\n                </Button>\n            </div>\n            <NotificationSnackBar data={generalError} onClose={() => setGeneralError(notificationData.makeEmpty())}/>\n        </>\n    )\n}\n","type SCALAR = string | number | boolean | string[] | number[] | boolean[];\n\n/**\n * Stores arguments to a query node\n */\nexport interface QueryArgument {\n    name: string,\n    meta: {\n        type: {\n            kind: string,\n            name: string | null,\n            ofType: null | {\n                kind: string,\n                name: string\n            },\n        },\n        description: null | string,\n        defaultValue: null | SCALAR,\n    },\n    value: null | SCALAR,\n}\n\nexport const queryArgument = {\n    create(rawArg: any) {\n        const argument: QueryArgument = {\n            name: rawArg.name as string,\n            meta: rawArg as any,\n            value: null\n        };\n        return argument;\n    },\n    getSerializableObject(arg: QueryArgument): any {\n        return {\n            name: arg.name,\n            value: arg.value,\n            inputType: {...arg.meta.type, ofType: null},\n            description: arg.meta.description,\n        };\n    },\n    isList(arg: QueryArgument) {\n        return arg.meta.type.kind === 'LIST';\n    },\n    getValueType(arg: QueryArgument) {\n        return arg.meta.type.name || arg.meta.type.ofType?.name;\n    }\n};","import {v4 as uuidv4} from 'uuid';\nimport {queryArgument, QueryArgument} from \"./query-argument\";\n\nexport interface VizNode {\n    parent: VizNode | null,\n    id: string,\n    info: {\n        raw: any,\n        arguments: QueryArgument[];\n        selected: boolean,\n    },\n    children: VizNode[],\n}\n\nexport const vizNode = {\n    create(parent: null | VizNode, rawSchema: any) {\n        const node: VizNode = {\n            parent,\n            id: uuidv4(),\n            info: {\n                arguments: [],\n                selected: false,\n                raw: rawSchema,\n            },\n            children: [],\n        };\n        const rawArgs = rawSchema.args as any[];\n        if (rawArgs) {\n            node.info.arguments = rawArgs.map(arg => queryArgument.create(arg));\n        }\n        return node;\n    },\n    getRawType(node: VizNode): any {\n        return node.info.raw.type\n    },\n    getRawOfType(node: VizNode): any {\n        return this.getRawType(node).ofType;\n    },\n    getOutputObjectName(node: VizNode): string | null {\n        if (!this.isFieldObject(node)) {\n            return node.info.raw.kind as string;\n        }\n        const type = this.getRawType(node);\n        if (type.name) {\n            return type.name as string;\n        }\n        const ofType = this.getRawOfType(node);\n        return ofType.name as string;\n    },\n    // FIXME: the implementation of isObject is wrong (but necessary to convert to the original format?)\n    isObject(node: VizNode) {\n        if (this.isFieldObject(node)) {\n            const type = this.getRawType(node);\n            if (type.kind !== 'SCALAR') {\n                const ofType = this.getRawOfType(node);\n                if (ofType) {\n                    if (ofType.kind === 'OBJECT') {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        }\n        return node.info.raw.kind === 'OBJECT';\n    },\n    // FIXME: the implementation of isList is wrong  (but necessary to convert to the original format?)\n    isList(node: VizNode) {\n        if (this.isFieldObject(node)) {\n            const type = this.getRawType(node);\n            if (type.kind === 'LIST') {\n                const ofType = this.getRawOfType(node);\n                if (ofType) {\n                    if (ofType.kind === 'LIST') {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        }\n        return node.info.raw.kind === 'LIST';\n    },\n    isScalar(node: VizNode) {\n        return !this.isObject(node) && !this.isList(node);\n    },\n    isFieldObject(node: VizNode) {\n        return !node.info.raw.hasOwnProperty('fields')\n    }\n};","import {queryArgument} from \"./query-argument\";\nimport {vizNode, VizNode} from \"./viz-node\";\n\n/**\n * Augments the raw format.\n * THis structure is by default not JSON serializable\n */\nexport interface SchemaTree {\n    readonly raw: any | null, // full schema\n    readonly root: VizNode | null, // selected schema\n}\n\nfunction createEmpty(): SchemaTree {\n    return {raw: null, root: null};\n}\n\nfunction createEmptyRoot(rawSchema: any): SchemaTree {\n    return {raw: rawSchema, root: null};\n}\n\nfunction createFromRaw(rawSchema: any): SchemaTree {\n    const schema = rawSchema.data.__schema;\n    const allBaseTypes = (schema.types as any[]).reduce((acc, obj) => {\n        const objName = obj.name as string;\n        if (objName.startsWith('__') || obj.kind === 'SCALAR') {\n            return acc;\n        }\n        acc[obj.name as string] = obj;\n        return acc;\n    }, {});\n    const entryObjectName = schema.queryType.name as string;\n    const root = (function createTree(currentObject: any, parent: VizNode | null): VizNode {\n        if (currentObject.hasOwnProperty('fields')) {\n            // a base object\n            const node = vizNode.create(parent, currentObject);\n            for (const item of currentObject.fields as any[]) {\n                node.children.push(createTree(item, node));\n            }\n            return node;\n        } else {\n            // a field object\n            const node = vizNode.create(parent, currentObject);\n            const objectName = vizNode.getOutputObjectName(node);\n            if (objectName != null) {\n                const baseType = allBaseTypes[objectName];\n                if (baseType) {\n                    node.children = [createTree(baseType, node)];\n                }\n            }\n            return node;\n        }\n    }(allBaseTypes[entryObjectName], null));\n    return {\n        raw: rawSchema,\n        root,\n    };\n}\n\nfunction createFromSerializableObject(obj: any, rawSchema: any): SchemaTree {\n    const tree = createFromRaw(rawSchema);\n    if (!tree.root) {\n        throw new Error('Fail to create tree from raw');\n    }\n    (function createRecursive(currentObj: any, node: VizNode) {\n        // currentObj will always be a field\n        // node can be either field or base\n        if (currentObj == null) {\n            return;\n        }\n        node.info.selected = true;\n        const nextBaseObjectName = currentObj.output.type.name;\n        const nextBaseObjectFields = currentObj.children;\n        if (nextBaseObjectName === node.info.raw.name) {\n            // node is a base\n            for (const nextField of nextBaseObjectFields) {\n                const nextFieldName = nextField.name;\n                const nextChild = node.children.find(child => child.info.raw.name === nextFieldName);\n                if (!nextChild) {\n                    continue;\n                }\n                createRecursive(nextField, nextChild);\n            }\n        } else {\n            for (const childBaseNode of node.children) {\n                if (childBaseNode.info.raw.name !== nextBaseObjectName) {\n                    continue;\n                }\n                childBaseNode.info.selected = true;\n                for (const nextField of nextBaseObjectFields) {\n                    const nextFieldName = nextField.name;\n                    const nextChild = childBaseNode.children.find(child => child.info.raw.name === nextFieldName);\n                    if (!nextChild) {\n                        continue;\n                    }\n                    createRecursive(nextField, nextChild);\n                }\n                break;\n            }\n        }\n    }(obj, tree.root));\n    return {...tree};\n}\n\n/**\n * Used when exporting schema to the original format.\n * Add \"value\" (from node arguments) to \"output\" base object's fields\n *\n * FIXME: This should be removed from the original format because it's unnecessary\n *\n * @param baseObject\n * @param children\n */\nfunction addValueFieldToBase(baseObject: any, children: any[]) {\n    if (!baseObject.fields) {\n        return baseObject;\n    }\n    const clonedBaseObject = JSON.parse(JSON.stringify(baseObject));\n    const fields = clonedBaseObject.fields;\n    const childMap = children.reduce((acc, child) => {\n        acc.set(child.name, child);\n        return acc;\n    }, new Map());\n    for (const candidateChild of fields) {\n        if (childMap.has(candidateChild.name)) {\n            const selectedChild = childMap.get(candidateChild.name);\n            const selectedChildInputs = selectedChild.inputs;\n            const candidateChildArgs = candidateChild.args;\n            if (selectedChildInputs.length === 0) {\n                continue;\n            }\n            if (selectedChildInputs.length !== candidateChildArgs.length) {\n                throw new Error('selectedChildInputs and candidateChildArgs must have the same length');\n            }\n            for (let i = 0; i < selectedChildInputs.length; i += 1) {\n                candidateChildArgs[i].value = selectedChildInputs[i].value;\n            }\n        }\n    }\n    return clonedBaseObject;\n}\n\n/**\n * Convert SchemaTree to original format\n * @param tree\n */\nfunction getSerializableObject(tree: SchemaTree) {\n    if (tree.root == null) {\n        throw new Error('Cannot serialize empty tree');\n    }\n    if (tree.raw == null) {\n        throw new Error('tree.raw required for serialization');\n    }\n    const schema = tree.raw.data.__schema;\n    const allBaseTypes = (schema.types as any[]).reduce((acc, obj) => {\n        acc[obj.name as string] = obj;\n        return acc;\n    }, {} as any);\n    const result = (function serializeRecursive(currentNode: VizNode): any {\n        if (!currentNode.info.selected) {\n            return null;\n        }\n        const node = {\n            name: '',\n            inputs: [] as any[],\n            output: {},\n            children: [] as any[],\n            selected: true,\n        };\n        if (currentNode.parent == null) {\n            // root node\n            node.name = 'query';\n        } else {\n            node.name = currentNode.info.raw.name as string;\n        }\n        if (vizNode.isFieldObject(currentNode)) {\n            // field node\n            node.inputs = currentNode.info.arguments.map(arg => queryArgument.getSerializableObject(arg));\n            const baseObjectName = vizNode.getOutputObjectName(currentNode);\n            if (!baseObjectName) {\n                throw new Error('Invalid BaseObjectName for field node');\n            }\n            node.children = currentNode.children.map(child => serializeRecursive(child))\n                .flat()\n                .filter(elem => elem != null);\n            node.output = {\n                type: addValueFieldToBase(allBaseTypes[baseObjectName], node.children),\n                isAList: vizNode.isList(currentNode).toString(),\n                isObject: vizNode.isObject(currentNode).toString(),\n                isScalar: vizNode.isScalar(currentNode).toString(),\n            };\n            return node;\n        } else {\n            // base node\n            const children = currentNode.children.map(child => serializeRecursive(child))\n                .flat()\n                .filter(elem => elem != null);\n            if (currentNode.parent == null) {\n                node.children = children;\n                node.output = {\n                    type: addValueFieldToBase(allBaseTypes[currentNode.info.raw.name], children),\n                    isAList: vizNode.isList(currentNode).toString(),\n                    isObject: vizNode.isObject(currentNode).toString(),\n                    isScalar: vizNode.isScalar(currentNode).toString(),\n                };\n                return node;\n            }\n            return children;\n        }\n    }(tree.root));\n    if (result == null) {\n        throw new Error('Fail to serialize because there are no elements marked as selected');\n    }\n    return result;\n}\n\nfunction findNode(tree: SchemaTree, id: string): VizNode | null {\n    if (tree.root == null) {\n        throw new Error('tree.root cannot be null');\n    }\n    return (function findNodeRecursive(node: VizNode, targetId: string): VizNode | null {\n        if (node.id === targetId) {\n            return node;\n        }\n        for (const child of node.children) {\n            const result = findNodeRecursive(child, targetId);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }(tree.root, id));\n}\n\nfunction addNode(tree: SchemaTree, node: VizNode): SchemaTree {\n    if (tree.root == null && node.parent == null) {\n        return {...tree, root: node};\n    }\n    if (node.parent == null || tree.root == null) {\n        throw new Error('addNode require node.parent and tree.root to be non-null');\n    }\n\n    (function addNodeRecursive(currentNode: VizNode, targetNode: VizNode) {\n        if (currentNode.id === targetNode.parent?.id) {\n            const children = currentNode.children;\n            if (children.find((val) => val.id === targetNode.id)) {\n                throw new Error('Node already exists');\n            }\n            children.push(targetNode);\n            return;\n        }\n        currentNode.children.forEach(node => addNodeRecursive(node, targetNode));\n    }(tree.root, node));\n\n    return {...tree};\n}\n\nfunction removeNode(tree: SchemaTree, id: string): SchemaTree {\n    if (tree.root == null) {\n        throw new Error('tree.root cannot be null');\n    }\n    if (tree.root.id === id) {\n        return {...tree, root: null};\n    }\n    const node = findNode(tree, id);\n    if (!node) {\n        throw new Error('target id not found');\n    }\n    const parent = node.parent;\n    if (!parent) {\n        throw new Error('Except for root, parent cannot be null');\n    }\n    const index = parent.children.findIndex(child => child.id === id);\n    if (index < 0) {\n        throw new Error('index must not be < 0');\n    }\n    parent.children = parent.children.splice(index, 1);\n    return {...tree};\n}\n\nfunction replaceNode(tree: SchemaTree, newNode: VizNode, id: string): SchemaTree {\n    if (tree.root == null) {\n        throw new Error('tree.root cannot be null');\n    }\n    if (tree.root.id === id) {\n        return {...tree, root: null};\n    }\n    const node = findNode(tree, id);\n    if (!node) {\n        throw new Error('target id not found');\n    }\n    if (findNode(tree, newNode.id)) {\n        throw new Error('newNode already exists')\n    }\n    const parent = node.parent;\n    if (!parent) {\n        throw new Error('Except for root, parent cannot be null');\n    }\n    const index = parent.children.findIndex(child => child.id === id);\n    if (index < 0) {\n        throw new Error('index must not be < 0');\n    }\n    parent.children[index] = newNode;\n    return {...tree};\n}\n\nexport const schemaTree = {\n    createEmpty,\n    getSerializableObject,\n    createFromSerializableObject,\n    createEmptyRoot,\n    createFromRaw,\n    addNode,\n    removeNode,\n    replaceNode\n};","import {v4 as uuidv4} from \"uuid\";\nimport {schemaTree, SchemaTree} from \"../states/schema-tree\";\n\nexport enum QuerySchedule {\n    AD_HOC = 'Ad hoc',\n    PER_MINUTE = 'Once a minute',\n    PER_HOUR = 'Once an hour',\n    PER_DAY = 'Once a day',\n    PER_WEEK = 'Once a week',\n    PER_MONTH = 'Once a month'\n}\n\nexport interface QueryHistoryRecord {\n    executionTimestamp: string,\n    runtime: number,\n    data: any\n}\n\nexport interface QueryIntermediate {\n    name: string,\n    source: string,\n    schedule: QuerySchedule,\n    schema: any,\n}\n\nexport interface QueryIntermediateErrors {\n    name: string,\n    source: string,\n    schedule: string\n}\n\nexport interface Query {\n    name: string,\n    source: string,\n    schedule: QuerySchedule,\n    schema: SchemaTree,\n    // this field is better provided by server for consistency since all other fields are not guaranteed to be unique\n    // if this field is not provided by server then ignore it when the object is sent along with requests\n    id?: string,\n}\n\nexport const queryIntermediate = {\n    toQuery(q: QueryIntermediate, rawSchema: any): Query {\n        return {\n            id: uuidv4(),\n            name: q.name,\n            schedule: q.schedule,\n            schema: schemaTree.createFromSerializableObject(q.schema, rawSchema),\n            source: q.source\n        }\n    },\n    fromQuery(q: Query): QueryIntermediate {\n        return {\n            name: q.name,\n            schedule: q.schedule,\n            schema: schemaTree.getSerializableObject(q.schema),\n            source: q.source\n        };\n    }\n};","import {apiEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {getGeneralError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport axios from \"axios\";\nimport {Query, queryIntermediate} from \"../../../models/query\";\nimport {QueryFullSchemaRequest} from \"../../../types/requests/query-requests\";\nimport {QueryFullSchemaResponse, QueryListResponse} from \"../../../types/responses/query-responses\";\n\nexport async function loadQueriesAndSchemas(\n    onSchemaLoaded: (schema: Map<string, any>) => void,\n    onQueriesLoaded: (queries: Map<string, Query>) => void,\n    previousSchema: Map<string, any>,\n    mounted: boolean\n) {\n    const cachedRawSchema = new Map(previousSchema);\n    const fetchAllQueriesResponse = (await axios.get(apiEndpoints.query.endpoints.queriesList.url)).data as QueryListResponse;\n    const fetchAllQueriesGeneralError = getGeneralError(fetchAllQueriesResponse);\n    if (fetchAllQueriesGeneralError) {\n        return notificationData.makeError(fetchAllQueriesGeneralError);\n    }\n    let schemaChanged = false;\n    const allRawQueries = fetchAllQueriesResponse.data;\n    for (const rawQuery of allRawQueries) {\n        if (!cachedRawSchema.has(rawQuery.source)) {\n            const request: QueryFullSchemaRequest = {\n                source: rawQuery.source,\n            };\n            const fetchRawSchemaRequest = (await axios.get(apiEndpoints.query.endpoints.queryFullSchema.url, {params: request})).data as QueryFullSchemaResponse;\n            const fetchRawSchemaGeneralError = getGeneralError(fetchRawSchemaRequest);\n            if (fetchRawSchemaGeneralError) {\n                return notificationData.makeError(fetchRawSchemaGeneralError);\n            }\n            cachedRawSchema.set(rawQuery.source, fetchRawSchemaRequest.data);\n            schemaChanged = true;\n        }\n    }\n    if (mounted) {\n        const newQueries = new Map(fetchAllQueriesResponse.data.map(q => {\n            const newQuery = queryIntermediate.toQuery(q, cachedRawSchema.get(q.source));\n            return [newQuery.id as string, newQuery];\n        }));\n        if (schemaChanged) {\n            onSchemaLoaded(cachedRawSchema);\n        }\n        onQueriesLoaded(newQueries);\n    }\n    return notificationData.makeEmpty();\n}","import {VizNode} from \"./viz-node\";\n\n/**\n * Stores the history of user clicking on the nodes\n */\nexport type SchemaHistory = ReadonlyArray<VizNode>;\n\nexport const schemaHistory = {\n    addRecord(history: SchemaHistory, record: VizNode) {\n        if (this.findIndexByNode(history, record) < 0) {\n            return [...history, record];\n        }\n        return history;\n    },\n    findIndexByNode(history: SchemaHistory, node: VizNode) {\n        return history.findIndex(record => {\n            return record.id === node.id;\n        });\n    },\n    removeRecordByNode(history: SchemaHistory, startingNode: VizNode): SchemaHistory | null {\n        const index = this.findIndexByNode(history, startingNode);\n        if (index < 0) {\n            return history;\n        }\n        return history.slice(0, index);\n    },\n};","import {\n    commonButtonStyles,\n    commonPageStyles,\n    errorButtonStyles,\n    formStyles\n} from \"@lion-frontend/shared/dist/styles/common-style\";\nimport {grey, red} from \"@material-ui/core/colors\";\nimport {createStyles, makeStyles, Theme} from \"@material-ui/core/styles\";\n\nexport const queryStyles = makeStyles((theme: Theme) => ({\n    ...commonPageStyles(theme),\n    ...errorButtonStyles(theme),\n    ...commonButtonStyles(theme),\n    ...formStyles(theme)\n}));\n\nexport const queryCreateStyles = makeStyles((theme: Theme) => ({\n    ...commonPageStyles(theme),\n    ...errorButtonStyles(theme),\n    ...commonButtonStyles(theme),\n    ...formStyles(theme),\n    sideInputWrapper: {\n        display: 'flex',\n        flexDirection: 'column',\n        padding: theme.spacing(2),\n        backgroundColor: `rgba(236, 239, 241, 0.8)`,\n        width: `100%`,\n        minHeight: `100%`,\n        boxSizing: `border-box`,\n        borderTopLeftRadius: `10px`,\n        borderBottomLeftRadius: `10px`\n    },\n    sideInputTitle: {\n        padding: 0,\n        margin: theme.spacing(1.5, 0),\n        wordBreak: `break-word`\n    },\n    sideInputFields: {\n        margin: theme.spacing(0.5, 0)\n    },\n    sideFieldWrapper: {\n        width: `100%`,\n        height: `100%`\n    },\n    sideEmptyText: {\n        color: grey[\"900\"]\n    },\n    queryCreateWrapper: {\n        width: `100%`,\n        height: `100%`,\n        position: `relative`,\n        marginTop: theme.spacing(4)\n    },\n    queryCreateInputPanel: {\n        width: `240px`,\n        maxWidth: `30%`,\n        position: `absolute`,\n        top: 0,\n        bottom: 0,\n        overflow: `auto`\n    },\n    queryCreateVizPanel: {\n        width: `100%`,\n        height: `100%`,\n        border: `1px solid ${theme.palette.primary.main}`,\n        borderRadius: `10px`\n    },\n    formSubmitSpacing: {\n        marginTop: theme.spacing(4)\n    }\n}));\n\n\nexport const queryHistoryStyles = makeStyles((theme: Theme) => createStyles({\n    ...commonPageStyles(theme),\n    ...errorButtonStyles(theme),\n    ...commonButtonStyles(theme),\n    ...formStyles(theme),\n    historyWrapper: {\n        width: `100%`,\n        maxHeight: `calc(100vh - 70px - 2.5rem - 32px - 32px - 10px)`, // appbar - title - top padding - bottom padding - extra spacing\n        display: `flex`,\n        flexDirection: `column`\n    },\n    tabsWrapper: {\n        padding: `1rem`,\n        borderBottom: `1px solid #F5F5F5`\n    },\n    tabPanelWrapper: {\n        height: `100%`,\n        display: `flex`,\n        flexDirection: `column`,\n        overflowY: `hidden`\n    },\n    intermediateWrapper: {\n        height: `100%`,\n        display: `flex`,\n        flexDirection: `column`,\n        overflowY: `auto`\n    },\n    historyPanelWrapper: {\n        height: `100%`,\n        width: `100%`,\n        display: `flex`,\n        flexDirection: `row`,\n        overflowY: `hidden`\n    },\n    historyTableWrapper: {\n        width: `30vw`,\n        overflowY: `auto`,\n        flexShrink: 0\n    },\n    historyTable: {\n        borderRight: `1px solid ${grey[\"100\"]}`\n    },\n    historyTableHighlightedRow: {\n        backgroundColor: grey[\"100\"]\n    },\n\n    responseVizWrapper: {\n        width: `100%`,\n        alignSelf: `stretch`,\n        display: `flex`,\n        flexDirection: `column`,\n        alignItems: `center`,\n        justifyContent: `center`,\n    },\n    responseVizTextWrapper: {\n        display: `flex`,\n        flexDirection: `column`,\n        alignItems: `center`,\n        justifyContent: `center`,\n        width: `100%`,\n        height: `100%`\n    },\n    responseVizEmptyTitle: {\n        color: grey[\"400\"],\n    },\n    responseVizErrorTitle: {\n        color: red[\"400\"],\n    },\n    responseVizOutline: {\n        width: `calc(100% - 4px - 4px)`,\n        alignSelf: `stretch`,\n        margin: `4px`,\n        border: `1px solid ${grey[\"100\"]}`\n    },\n\n    detailPanelWrapper: {\n        width: `100%`,\n        boxSizing: `border-box`,\n        padding: theme.spacing(1),\n        display: `flex`,\n        flexDirection: `column`,\n        overflowY: `auto`\n    },\n    detailHelperText: {\n        padding: 0,\n        margin: theme.spacing(1, 0.5),\n        color: grey[\"400\"],\n        fontSize: `0.8rem`\n    },\n    detailTable: {\n        flexShrink: 0,\n        paddingBottom: theme.spacing(1),\n        borderBottom: `1px solid ${grey[\"100\"]}`,\n        marginBottom: theme.spacing(1),\n    },\n    detailVizOutline: {\n        width: `calc(100% - 3rem)`,\n        alignSelf: `stretch`,\n        margin: `1rem 1.5rem`,\n        border: `1px solid ${grey[\"100\"]}`\n    },\n\n    removeElement: {\n        display: `none`\n    },\n    showElement: {\n        display: `flex`\n    }\n}));","import {stringDict} from \"@lion-frontend/shared/dist/states/string-dict\";\nimport {FormControl, FormHelperText, Grid, InputLabel, MenuItem, Select, TextField} from \"@material-ui/core\";\nimport React, {useCallback} from \"react\";\nimport {QuerySchedule} from \"../../../../models/query\";\nimport {queryCreateStyles} from \"../../../../styles/query-style\";\nimport {QueryCreateFormProps} from \"../../../../types/props/query-props\";\n\nexport const allSchedules = [\n    QuerySchedule.AD_HOC, QuerySchedule.PER_MINUTE, QuerySchedule.PER_HOUR,\n    QuerySchedule.PER_DAY, QuerySchedule.PER_WEEK, QuerySchedule.PER_MONTH\n];\n\nexport const queryCreateFormFields = {\n    name: 'name',\n    source: 'source',\n    schedule: 'schedule'\n};\n\n\n/**\n * Creates the form that inputs name, source, schedule\n * @param props\n * @constructor\n */\nexport function QueryCreateForm(props: QueryCreateFormProps) {\n    const {errorMessages, allSources, query, onUpdateQuery} = props;\n    const styles = queryCreateStyles();\n    const onUpdateName = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n        onUpdateQuery({...query, name: e.target.value as string});\n    }, [query, onUpdateQuery]);\n    const onUpdateSource = useCallback((e: React.ChangeEvent<{ value: unknown }>) => {\n        onUpdateQuery({...query, source: e.target.value as string});\n    }, [query, onUpdateQuery]);\n    const onUpdateSchedule = useCallback((e: React.ChangeEvent<{ value: unknown }>) => {\n        onUpdateQuery({...query, schedule: e.target.value as QuerySchedule});\n    }, [query, onUpdateQuery]);\n    return (\n        <div>\n            <h1 className={styles.titleStyle}>Basic Information</h1>\n            <form className={styles.form}>\n                <Grid container spacing={2}>\n                    <Grid item xs={6}>\n                        <TextField\n                            required\n                            fullWidth\n                            error={!stringDict.isValueEmpty(errorMessages, queryCreateFormFields.name)}\n                            label=\"Query Name\"\n                            color={'secondary'}\n                            helperText={stringDict.getValueWithDefault(errorMessages, queryCreateFormFields.name)}\n                            onChange={onUpdateName}\n                            value={query.name}\n                        />\n                    </Grid>\n                    <Grid item xs={3}>\n                        <FormControl\n                            color={'secondary'}\n                            fullWidth\n                            required\n                            error={!stringDict.isValueEmpty(errorMessages, queryCreateFormFields.source)}\n                        >\n                            <InputLabel id=\"select-source-label\">Source</InputLabel>\n                            <Select\n                                labelId=\"select-source-label\"\n                                value={query.source}\n                                onChange={onUpdateSource}>\n                                {\n                                    allSources.map(source => (\n                                        <MenuItem key={source} value={source}>{source}</MenuItem>))\n                                }\n                            </Select>\n                            <FormHelperText>{stringDict.getValueWithDefault(errorMessages, queryCreateFormFields.source)}</FormHelperText>\n                        </FormControl>\n                    </Grid>\n                    <Grid item xs={3}>\n                        <FormControl color={'secondary'} fullWidth>\n                            <InputLabel id=\"select-schedule-label\">Schedules</InputLabel>\n                            <Select\n                                labelId=\"select-schedule-label\"\n                                value={query.schedule}\n                                onChange={onUpdateSchedule}>\n                                {\n                                    allSchedules.map(schedule => (\n                                        <MenuItem key={schedule} value={schedule}>{schedule}</MenuItem>))\n                                }\n                            </Select>\n                        </FormControl>\n                    </Grid>\n                </Grid>\n            </form>\n        </div>\n    )\n}","import * as d3 from 'd3';\nimport {VizNode} from \"../../../../states/viz-node\";\nimport {QueryVizProps} from \"../../../../types/props/query-props\";\n\n// FIXME: Use closure instead\nlet cachedFullSchema: any = {};\n\nexport const cleanUpViz = () => {\n    cachedFullSchema = null;\n};\n\n/**\n * A wrapper to create the schema visualization\n * Source: https://observablehq.com/@d3/collapsible-tree\n */\nexport const createViz = (props: QueryVizProps) => {\n    if (!((props.onDeselectNode && props.onSelectNode) ||\n        (!props.onDeselectNode && !props.onDeselectNode))) {\n        throw new Error('props.onDeselectNode and props.onDeselectNode must be defined or not defined at the same time');\n    }\n    if (props.fullSchema === cachedFullSchema) {\n        return;\n    }\n    cachedFullSchema = props.fullSchema;\n\n    const isImmutable = !props.onDeselectNode && !props.onDeselectNode;\n    const width = 900;\n    const height = 500;\n    const tree = d3.tree().nodeSize([30, 300]);\n    const rootData = props.fullSchema.root;\n    const root = d3.hierarchy(rootData);\n    (root as any).x0 = height / 2;\n    (root as any).y0 = 0;\n    root.descendants().forEach((item: any) => {\n        item.savedChildren = item.children;\n        item.children = null;\n        item.selected = false;\n    });\n    const $svg = d3.select(props.containerElem)\n        .append('svg')\n        .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n        .attr(\"viewBox\", `0 0 ${width} ${height}`);\n    const $svgContainer = $svg.append('svg')\n        .style('overflow', 'visible')\n        .attr('x', width / 2)\n        .attr('y', height / 2);\n    const $container = $svgContainer.append('g');\n    $svg.call(\n        d3.zoom().on(\"zoom\", () => {\n            const newCoordinate = d3.event.transform.apply([width / 2, height / 2]);\n            const newScale = d3.event.transform.scale(1);\n            $svgContainer.attr(\"x\", newCoordinate[0]);\n            $svgContainer.attr('y', newCoordinate[1]);\n            $container.attr('transform', `scale(${newScale.k})`)\n        }) as any).on(\"dblclick.zoom\", null);\n    const $linksWrapper = $container.append('g');\n    const $nodesWrapper = $container.append('g');\n    const diagonal = d3.linkHorizontal().x((d: any) => d.y).y((d: any) => d.x);\n    const transition = $svg.transition()\n        .duration(200)\n        .attr(\"viewBox\", `0, 0, ${width}, ${height}`);\n    const circleFillCallback = (d: any) => {\n        if (d.data.info.selected) {\n            return `#ed1250`;\n        } else {\n            return d.data.info.children != null ? `#0277bd` : `#90a4ae`;\n        }\n    };\n\n    function update(source: any) {\n        const nodes = root.descendants();\n        const links = root.links();\n        tree(root);\n        const $nodes = $nodesWrapper.selectAll('g.nodes')\n            .data(nodes, (datum: any) => {\n                return datum.data.id;\n            });\n        const $nodesEnter = $nodes.enter()\n            .append('g')\n            .attr('class', 'nodes')\n            .attr(\"transform\", (d: any) => `translate(${source.y0},${source.x0})`)\n            .attr(\"cursor\", \"pointer\")\n            .on('click', function clickCallback(d: any) {\n                d3.event.stopPropagation();\n                const data = d.data;\n                let selected;\n                if (isImmutable) {\n                    d.selected = !d.selected;\n                    selected = d.selected;\n                } else {\n                    data.info.selected = !data.info.selected;\n                    selected = data.info.selected;\n                }\n                if (!selected) {\n                    props.onDeselectNode?.(data as VizNode);\n                    d.savedChildren = d.children;\n                    d.children = null;\n                } else {\n                    d.children = d.savedChildren;\n                    d.savedChildren = null;\n                    props.onSelectNode?.(data as VizNode);\n                }\n                if (!isImmutable) {\n                    d3.select(this)\n                        .select('circle')\n                        .attr('fill', circleFillCallback(d));\n                }\n                update(d);\n            });\n        $nodesEnter.append('circle')\n            .attr('class', 'node')\n            .attr('r', '5px')\n            .attr('fill', circleFillCallback);\n\n        $nodesEnter.append(\"text\")\n            .attr(\"dy\", \"0.31em\")\n            .attr(\"x\", (d: any) => d.data.children != null ? -10 : 10)\n            .attr(\"text-anchor\", (d: any) => d.data.children != null ? \"end\" : \"start\")\n            .text((d: any) => d.data.info.raw.name)\n            .clone(true).lower()\n            .attr(\"stroke-linejoin\", \"round\")\n            .attr(\"stroke-width\", 5)\n            .attr(\"stroke\", \"white\");\n\n        $nodes.merge($nodesEnter as any).transition(transition as any)\n            .attr(\"transform\", (d: any) => `translate(${d.y},${d.x})`)\n            .attr(\"fill-opacity\", 1)\n            .attr(\"stroke-opacity\", 1);\n\n        $nodes.exit().transition(transition as any).remove()\n            .attr(\"transform\", (d: any) => `translate(${source.y},${source.x})`)\n            .attr(\"fill-opacity\", 0)\n            .attr(\"stroke-opacity\", 0);\n\n        const $links = $linksWrapper.selectAll(\"path\")\n            .data(links, (d: any) => d.target.data.id);\n        const $linksEnter = $links.enter()\n            .append('path')\n            .attr(\"fill\", \"none\")\n            .attr(\"stroke\", `#424242`)\n            .attr(\"stroke-opacity\", 0.4)\n            .attr(\"stroke-width\", 1.5)\n            .attr(\"d\", (d: any) => {\n                const o = {x: source.x0, y: source.y0};\n                return diagonal({source: o, target: o} as any);\n            });\n\n        $links.merge($linksEnter as any).transition(transition as any)\n            .attr(\"d\", (d: any) => diagonal(d));\n\n        $links.exit().transition(transition as any).remove()\n            .attr(\"d\", (d: any) => {\n                const o = {x: source.x, y: source.y};\n                return diagonal({source: o, target: o} as any);\n            });\n\n        root.eachBefore((d: any) => {\n            d.x0 = d.x;\n            d.y0 = d.y;\n        });\n    }\n\n    update(root);\n};","import {TextField} from \"@material-ui/core\";\nimport React, {memo} from \"react\";\nimport {queryCreateStyles} from \"../../../../styles/query-style\";\nimport {QuerySchemaNodeInputProps} from \"../../../../types/props/query-props\";\n\n/**\n * Create the input boxes to type in values for nodes that have arguments\n */\nexport const QuerySchemaNodeInput = memo((props: QuerySchemaNodeInputProps) => {\n    const {args, nodeName, setInputs} = props;\n    const styles = queryCreateStyles();\n    let allInputs;\n    if (args == null) {\n        allInputs = (\n            <div className={styles.sideFieldWrapper}>\n                <small className={styles.sideEmptyText}>If selected node has input fields, they will show up\n                    here</small>\n            </div>\n        );\n    } else {\n        allInputs = args.map(arg => {\n            const name = arg.name;\n            const onTypeInputs = (e: React.ChangeEvent<HTMLInputElement>) => {\n                const newArgs = args.slice();\n                for (const newArg of newArgs) {\n                    if (newArg.name === name) {\n                        newArg.value = e.target.value;\n                        break;\n                    }\n                }\n                setInputs(newArgs);\n            };\n            return <TextField\n                className={styles.sideInputFields}\n                value={arg.value ?? ''}\n                color={'secondary'}\n                key={name}\n                id=\"standard-basic\"\n                label={name}\n                onChange={onTypeInputs}\n            />;\n        });\n    }\n    return (\n        <div className={styles.sideInputWrapper}>\n            <h3 className={styles.sideInputTitle}>{\n                nodeName === '' ? 'No node selected' : `Input fields for node ${nodeName}`\n            }</h3>\n            <div className={styles.sideFieldWrapper}>{allInputs}</div>\n            {\n                args != null && (\n                    <small>Note that values will be automatically saved</small>\n                )\n            }\n        </div>\n    );\n});","import React, {useCallback, useEffect} from \"react\";\nimport {VizNode} from \"../../../../states/viz-node\";\nimport {queryCreateStyles} from \"../../../../styles/query-style\";\nimport {QuerySchemaVizProps} from \"../../../../types/props/query-props\";\nimport {cleanUpViz, createViz} from \"./QueryCreateViz\";\nimport {QuerySchemaNodeInput} from \"./QuerySchemaNodeInput\";\n\n\n/**\n * Wrapper of createViz and QuerySchemaNodeInput\n * @param props\n * @constructor\n */\nexport function QuerySchemaViz(props: QuerySchemaVizProps) {\n    const {\n        fullSchema, lastActiveNodeName, inputs,\n        setActiveNode, setInputs, deleteVizNode\n    } = props;\n    // memoized properties\n    const styles = queryCreateStyles();\n    // memoized callbacks\n    useEffect(() => {\n        return () => {\n            cleanUpViz();\n        }\n    }, []);\n    const onSelectNode = useCallback((data: VizNode) => {\n        setActiveNode(data);\n    }, [setActiveNode]);\n    const onDeselectNode = useCallback((data: VizNode) => {\n        deleteVizNode(data);\n    }, [deleteVizNode]);\n    const onRefUpdate = useCallback((ref: HTMLElement | null) => {\n        if (ref == null) {\n            return;\n        }\n        console.log('rerendered createViz')\n        createViz({\n            fullSchema,\n            containerElem: ref,\n            onSelectNode,\n            onDeselectNode,\n        });\n    }, [fullSchema, onDeselectNode, onSelectNode]);\n    return (\n        <div className={styles.queryCreateWrapper}>\n            <div className={styles.queryCreateInputPanel}>\n                <QuerySchemaNodeInput\n                    args={inputs}\n                    nodeName={lastActiveNodeName ?? ''}\n                    setInputs={setInputs}\n                />\n            </div>\n            <div className={styles.queryCreateVizPanel}>\n                <div ref={onRefUpdate}/>\n            </div>\n        </div>\n    );\n}","import {apiEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport {NotificationSnackBar} from \"@lion-frontend/shared/dist/notification/NotificationSnackBar\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {stringDict, StringDict} from \"@lion-frontend/shared/dist/states/string-dict\";\nimport {joinBoolean, mutate} from \"@lion-frontend/shared/dist/utils/common-functions\";\nimport {getGeneralError, getHTTPError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport {isObjectEmpty, isStringEmpty} from \"@lion-frontend/shared/dist/utils/value-checker\";\nimport {Button} from \"@material-ui/core\";\nimport SaveOutlinedIcon from '@material-ui/icons/SaveOutlined';\nimport axios from \"axios\";\nimport clsx from \"clsx\";\nimport React, {useCallback, useEffect, useState} from \"react\";\nimport {Query, queryIntermediate} from \"../../../models/query\";\nimport {QueryArgument} from \"../../../states/query-argument\";\nimport {SchemaHistory, schemaHistory} from \"../../../states/schema-history\";\nimport {schemaTree} from \"../../../states/schema-tree\";\nimport {VizNode} from \"../../../states/viz-node\";\nimport {queryCreateStyles} from \"../../../styles/query-style\";\nimport {QueryCreateProps} from \"../../../types/props/query-props\";\nimport {QueryFullSchemaRequest, QueryUpdateRequest, QueryUpdateType} from \"../../../types/requests/query-requests\";\nimport {\n    QueryFullSchemaResponse,\n    QuerySourcesListResponse,\n    QueryUpdateResponse\n} from \"../../../types/responses/query-responses\";\nimport {allSchedules, QueryCreateForm, queryCreateFormFields} from \"./queryCreateComponents/QueryCreateForm\";\nimport {QuerySchemaViz} from \"./queryCreateComponents/QuerySchemaViz\";\n\n// FIXME: move this into the global states\nconst allSchemas: { [source: string]: any } = {};\n\nexport function QueryCreate(props: QueryCreateProps) {\n    // assumptions:\n    //  only fields can have arguments\n    //  all object names are unique\n    const {addQuery} = props;\n    const [allSources, setAllSources] = useState<string[]>([]);\n    const [queryForm, setQueryForm] = useState<Query>({\n        name: ``, source: ``, schedule: allSchedules[0], schema: schemaTree.createEmpty()\n    });\n    const [formErrorMessages, setFormErrorMessages] = useState<StringDict>({});\n    const [generalErrorMessage, setGeneralErrorMessage] = useState(notificationData.makeEmpty());\n\n    const [nodesHistory, setNodesHistory] = useState<SchemaHistory>([]);\n    const [activeRecord, setActiveRecord] = useState<VizNode | null>(null);\n    useEffect(() => {\n        (async () => {\n            try {\n                const response = (await axios.get(apiEndpoints.query.endpoints.querySourcesList.url))\n                    .data as QuerySourcesListResponse;\n                const generalError = getGeneralError(response);\n                if (generalError) {\n                    setGeneralErrorMessage(notificationData.makeError(generalError));\n                    return;\n                }\n                setGeneralErrorMessage(notificationData.makeEmpty());\n                setAllSources(response.data);\n            } catch (e) {\n                setGeneralErrorMessage(notificationData.makeError(getHTTPError(e)));\n            }\n        })();\n    }, []);\n\n    const styles = queryCreateStyles();\n    const onValidateForm = useCallback(() => {\n        let isFormValid = true;\n        if (isStringEmpty(queryForm.name)) {\n            setFormErrorMessages(m => stringDict.update(m, queryCreateFormFields.name, 'Name cannot be empty'));\n            isFormValid = false;\n        } else {\n            setFormErrorMessages(m => stringDict.unset(m, queryCreateFormFields.name));\n        }\n        if (isStringEmpty(queryForm.source)) {\n            setFormErrorMessages(m => stringDict.update(m, queryCreateFormFields.source, 'Schema cannot be empty'));\n            isFormValid = false;\n        } else {\n            setFormErrorMessages(m => stringDict.unset(m, queryCreateFormFields.source));\n        }\n        if (isObjectEmpty(queryForm.schema)) {\n            setGeneralErrorMessage(notificationData.makeError('Schema cannot be empty'));\n            isFormValid = false;\n        } else {\n            setGeneralErrorMessage(notificationData.makeEmpty());\n        }\n        return isFormValid\n    }, [queryForm, setFormErrorMessages]);\n\n    const onSaveQuery = useCallback(() => {\n        if (!(onValidateForm())) {\n            return\n        }\n        (async () => {\n            const [mutSetFormErrorMessages, mutClearFormErrorMessages] = mutate(setFormErrorMessages);\n            const [mutSetGeneralErrorMessages, mutClearGeneralErrorMessage] = mutate(setGeneralErrorMessage);\n            try {\n                const request: QueryUpdateRequest = {\n                    type: QueryUpdateType.ADD,\n                    data: queryIntermediate.fromQuery(queryForm),\n                };\n                const response = (await axios.put(apiEndpoints.query.endpoints.queryUpdate.url, request)).data as QueryUpdateResponse;\n                const generalError = getGeneralError(response);\n                const fieldError = response.error?.fieldError;\n                const isError = joinBoolean([\n                    generalError ?\n                        mutSetGeneralErrorMessages(notificationData.makeError(generalError)) :\n                        mutClearGeneralErrorMessage(notificationData.makeEmpty()),\n                    fieldError?.name ?\n                        mutSetFormErrorMessages(\n                            (m: StringDict) => stringDict.update(m, queryCreateFormFields.name, fieldError.name)\n                        ) :\n                        mutClearFormErrorMessages(\n                            (m: StringDict) => stringDict.unset(m, queryCreateFormFields.name)\n                        ),\n                    fieldError?.schedule ?\n                        mutSetFormErrorMessages(\n                            (m: StringDict) => stringDict.update(m, queryCreateFormFields.schedule, fieldError.schedule)\n                        ) :\n                        mutClearFormErrorMessages(\n                            (m: StringDict) => stringDict.unset(m, queryCreateFormFields.schedule)\n                        ),\n                    fieldError?.source ?\n                        mutSetFormErrorMessages(\n                            (m: StringDict) => stringDict.update(m, queryCreateFormFields.source, fieldError.source)\n                        ) :\n                        mutClearFormErrorMessages(\n                            (m: StringDict) => stringDict.unset(m, queryCreateFormFields.source)\n                        ),\n                ]);\n                if (!isError) {\n                    addQuery(queryForm);\n                }\n            } catch (e) {\n                setGeneralErrorMessage(notificationData.makeError(getHTTPError(e)));\n            }\n        })();\n    }, [onValidateForm, addQuery, queryForm]);\n    const onSetQueryForm = useCallback((newQueryForm: Query) => {\n        if (newQueryForm == null) {\n            return;\n        }\n        const source = newQueryForm.source;\n        if (source.trim() !== '') {\n            if (allSchemas.hasOwnProperty(source)) {\n                if (newQueryForm.schema.raw) {\n                    setQueryForm(newQueryForm);\n                } else {\n                    setQueryForm({...newQueryForm, schema: schemaTree.createFromRaw(allSchemas[source])});\n                }\n            } else {\n                // get schema\n                (async () => {\n                    const params: QueryFullSchemaRequest = {source: newQueryForm.source};\n                    try {\n                        const response = (await axios.get(\n                            apiEndpoints.query.endpoints.queryFullSchema.url,\n                            {params}\n                        )).data as QueryFullSchemaResponse;\n                        const generalError = getGeneralError(response);\n                        if (generalError) {\n                            setGeneralErrorMessage(notificationData.makeError(generalError));\n                            return;\n                        }\n                        setGeneralErrorMessage(notificationData.makeEmpty());\n                        allSchemas[source] = response.data;\n                        setQueryForm(() =>\n                            ({...newQueryForm, schema: schemaTree.createFromRaw(response.data)})\n                        );\n                    } catch (e) {\n                        setGeneralErrorMessage(notificationData.makeError(getHTTPError(e)));\n                    }\n                })();\n            }\n        } else {\n            setQueryForm(newQueryForm);\n        }\n    }, []);\n    const onNodeSelected = useCallback((node: VizNode) => {\n        setActiveRecord(activeRecord => {\n            if (activeRecord != null) {\n                setNodesHistory(h => schemaHistory.addRecord(h, activeRecord));\n            }\n            return node;\n        });\n    }, []);\n\n    const onNodeDeselected = useCallback((node: VizNode) => {\n        setNodesHistory(nodesHistory => {\n            const newHistory = schemaHistory.removeRecordByNode(nodesHistory, node);\n            if (newHistory == null) {\n                setActiveRecord(null);\n                return [];\n            } else {\n                setActiveRecord(newHistory[newHistory.length - 1]);\n                return newHistory.slice(0, newHistory.length - 1)\n            }\n        });\n    }, []);\n\n    /**\n     * When arguments to the nodes change\n     */\n    const onInputsChange = useCallback((newInputs: QueryArgument[]) => {\n        setActiveRecord(activeRecord => {\n            if (activeRecord == null) {\n                throw new Error('Active record must not be null for updating inputs');\n            }\n            activeRecord.info.arguments = newInputs;\n            return {...activeRecord};\n        });\n    }, []);\n\n    const onCloseSnackBar = useCallback(() => {\n        setGeneralErrorMessage(notificationData.makeEmpty());\n    }, []);\n\n    // not memoized\n    let lastActiveNode: VizNode | null;\n    if (activeRecord) {\n        lastActiveNode = activeRecord;\n    } else {\n        lastActiveNode = nodesHistory.length > 0 ? nodesHistory[nodesHistory.length - 1] : null\n    }\n\n    const basicForm = (\n        <QueryCreateForm\n            errorMessages={formErrorMessages}\n            allSources={allSources}\n            query={queryForm}\n            onUpdateQuery={onSetQueryForm}\n        />\n    );\n\n    const visualization = (\n        <div>\n            <h1 className={styles.titleStyle}>Configure Query</h1>\n            {\n                (queryForm.schema.root) ? (\n                    <QuerySchemaViz\n                        fullSchema={queryForm.schema}\n                        deleteVizNode={onNodeDeselected}\n                        inputs={activeRecord?.info.arguments ?? null}\n                        lastActiveNodeName={lastActiveNode?.info.raw.name}\n                        setActiveNode={onNodeSelected}\n                        setInputs={onInputsChange}\n                    />\n                ) : (\n                    <small>Source must be selected first</small>\n                )\n            }\n        </div>\n    );\n    return (\n        <>\n            <div>\n                {basicForm}\n                <br/>\n                {visualization}\n                <br/>\n                <div className={clsx(styles.buttonWrapper, styles.formSubmitSpacing)}>\n                    <Button\n                        variant=\"contained\"\n                        color=\"secondary\"\n                        className={styles.buttonRightGap}\n                        startIcon={<SaveOutlinedIcon/>}\n                        onClick={onSaveQuery}>\n                        Save Form\n                    </Button>\n                </div>\n            </div>\n            <NotificationSnackBar data={generalErrorMessage} onClose={onCloseSnackBar}/>\n        </>\n    );\n}","import * as d3 from \"d3\";\n\nconst MAX_CHILDREN_COUNT = 10;\n\ninterface QueryCreateResponseVizProps {\n    data: any,\n    containerElem: HTMLElement\n}\n\ninterface QueryResponseNode {\n    isHandle: boolean,\n    value: string,\n    children: QueryResponseNode[] | null\n}\n\n// FIXME: move this to shared\nfunction isObject(obj: any) {\n    // https://stackoverflow.com/questions/11182924/how-to-check-if-javascript-object-is-json\n    return obj !== undefined && obj !== null && obj.constructor === Object;\n}\n\nconst PREVIOUS_HANDLE_TOKEN = `Previous page`;\nconst NEXT_HANDLE_TOKEN = `Next page`;\n\n/**\n * Create tree from response. This is different from the SchemaTree\n * @param obj\n */\nfunction createTree(obj: any): QueryResponseNode[] {\n    const result: QueryResponseNode[] = [];\n    for (const [key, value] of Object.entries(obj)) {\n        const node: QueryResponseNode = {value: key, children: null, isHandle: false};\n        if (Array.isArray(value)) {\n            node.children = createTree(value.reduce((acc: any, cur: any, i) => {\n                acc[i + 1] = cur;\n                return acc;\n            }, {}));\n        } else if (isObject(value)) {\n            node.children = createTree(value);\n        } else {\n            node.value = `${key}: ${value}`;\n        }\n        if (node.children != null && node.children.length > MAX_CHILDREN_COUNT) {\n            const childrenSize = node.children.length;\n            node.children = [\n                {value: `${PREVIOUS_HANDLE_TOKEN} (total ${childrenSize} items)`, children: null, isHandle: true},\n                ...node.children,\n                {value: `${NEXT_HANDLE_TOKEN} (total ${childrenSize} items)`, children: null, isHandle: true},\n            ]\n        }\n        result.push(node);\n    }\n    return result;\n}\n\n// FIXME: use closure\nlet previousData: any = null;\n\nexport const cleanUpResponseViz = () => {\n    previousData = null\n};\n\nexport const createResponseViz = (props: QueryCreateResponseVizProps) => {\n    const {data, containerElem} = props;\n    if (data === previousData) {\n        return;\n    } else {\n        previousData = data;\n    }\n    const width = 900;\n    const height = 500;\n    const tree = d3.tree().nodeSize([30, 300]);\n    // assume that there is only one root node called \"data\"\n    const cleanedData = {'Query Result': data['data']};\n    const rootData = createTree(cleanedData)[0];\n    const root = d3.hierarchy(rootData);\n    (root as any).x0 = height / 2;\n    (root as any).y0 = 0;\n    root.descendants().forEach((item: any, index) => {\n        item.id = index;\n        item.savedChildren = item.children;\n        item.children = null;\n        item.selected = false;\n        item.pageIndex = 0;\n        item.isPaginationNeeded = item.savedChildren ? item.savedChildren.length > MAX_CHILDREN_COUNT : false;\n    });\n    const $svg = d3.select(containerElem)\n        .append('svg')\n        .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n        .attr(\"viewBox\", `0 0 ${width} ${height}`);\n    const $svgContainer = $svg.append('svg')\n        .style('overflow', 'visible')\n        .attr('x', width / 2)\n        .attr('y', height / 2);\n    const $container = $svgContainer.append('g');\n    $svg.call(\n        d3.zoom().on(\"zoom\", () => {\n            const newCoordinate = d3.event.transform.apply([width / 2, height / 2]);\n            const newScale = d3.event.transform.scale(1);\n            $svgContainer.attr(\"x\", newCoordinate[0]);\n            $svgContainer.attr('y', newCoordinate[1]);\n            $container.attr('transform', `scale(${newScale.k})`)\n        }) as any).on(\"dblclick.zoom\", null);\n    const $linksWrapper = $container.append('g');\n    const $nodesWrapper = $container.append('g');\n    const diagonal = d3.linkHorizontal().x((d: any) => d.y).y((d: any) => d.x);\n    const transition = $svg.transition()\n        .duration(200)\n        .attr(\"viewBox\", `0, 0, ${width}, ${height}`);\n    const circleFillCallback = (d: any) => {\n        if (d.data.isHandle) {\n            return `#4caf50`;\n        }\n        return d.data.children != null ? `#0277bd` : `#90a4ae`;\n    };\n\n    function update(source: any) {\n        const nodes = root.descendants();\n        const links = root.links();\n        tree(root);\n        const $nodes = $nodesWrapper.selectAll('g.nodes')\n            .data(nodes, (item: any) => item.id);\n        const $nodesEnter = $nodes.enter()\n            .append('g')\n            .attr('class', 'nodes')\n            .attr(\"transform\", (d: any) => `translate(${source.y0},${source.x0})`)\n            .attr(\"cursor\", \"pointer\")\n            .on('click', function clickCallback(d: any) {\n                d3.event.stopPropagation();\n                const switchChildren = (d: any) => {\n                    const rawNodes = d.savedChildren.slice(1, -1);\n                    const index = d.pageIndex;\n                    const lower = index * MAX_CHILDREN_COUNT;\n                    const higher = (index + 1) * MAX_CHILDREN_COUNT;\n                    d.children = rawNodes.slice(lower, higher);\n                    if (lower !== 0) {\n                        d.children.unshift(d.savedChildren[0]);\n                    }\n                    if (higher < d.savedChildren.length) {\n                        d.children.push(d.savedChildren[d.savedChildren.length - 1])\n                    }\n                };\n                const data = d.data;\n                data.selected = !data.selected;\n                if (!data.selected) {\n                    d.children = null;\n                } else {\n                    d.children = d.savedChildren;\n                    if (d.isPaginationNeeded) {\n                        switchChildren(d)\n                    }\n                }\n                if (data.isHandle) {\n                    if (data.value.includes(PREVIOUS_HANDLE_TOKEN)) {\n                        d.parent.pageIndex -= 1;\n                    } else {\n                        d.parent.pageIndex += 1;\n                    }\n                    switchChildren(d.parent);\n                }\n                update(d);\n            });\n        $nodesEnter.append('circle')\n            .attr('class', 'node')\n            .attr('r', '5px')\n            .attr('fill', circleFillCallback);\n\n        $nodesEnter.append(\"text\")\n            .attr(\"dy\", \"0.31em\")\n            .attr(\"x\", (d: any) => d.data.children != null ? -10 : 10)\n            .attr(\"text-anchor\", (d: any) => d.data.children != null ? \"end\" : \"start\")\n            .text((d: any) => d.data.value)\n            .clone(true).lower()\n            .attr(\"stroke-linejoin\", \"round\")\n            .attr(\"stroke-width\", 5)\n            .attr(\"stroke\", \"white\");\n\n        $nodes.merge($nodesEnter as any).transition(transition as any)\n            .attr(\"transform\", (d: any) => `translate(${d.y},${d.x})`)\n            .attr(\"fill-opacity\", 1)\n            .attr(\"stroke-opacity\", 1);\n\n        $nodes.exit().transition(transition as any).remove()\n            .attr(\"transform\", (d: any) => `translate(${source.y},${source.x})`)\n            .attr(\"fill-opacity\", 0)\n            .attr(\"stroke-opacity\", 0);\n\n        const $links = $linksWrapper.selectAll(\"path\")\n            .data(links, (item: any) => item.target.id);\n        const $linksEnter = $links.enter()\n            .append('path')\n            .attr(\"fill\", \"none\")\n            .attr(\"stroke\", `#424242`)\n            .attr(\"stroke-opacity\", 0.4)\n            .attr(\"stroke-width\", 1.5)\n            .attr(\"d\", (d: any) => {\n                const o = {x: source.x0, y: source.y0};\n                return diagonal({source: o, target: o} as any);\n            });\n\n        $links.merge($linksEnter as any).transition(transition as any)\n            .attr(\"d\", (d: any) => diagonal(d));\n\n        $links.exit().transition(transition as any).remove()\n            .attr(\"d\", (d: any) => {\n                const o = {x: source.x, y: source.y};\n                return diagonal({source: o, target: o} as any);\n            });\n\n        root.eachBefore((d: any) => {\n            d.x0 = d.x;\n            d.y0 = d.y;\n        });\n    }\n\n    update(root);\n};","import {NotificationSnackBar} from \"@lion-frontend/shared/dist/notification/NotificationSnackBar\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {IconButton, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Tooltip} from \"@material-ui/core\";\nimport ArrowUpwardOutlinedIcon from '@material-ui/icons/ArrowUpwardOutlined';\nimport CloseOutlinedIcon from '@material-ui/icons/CloseOutlined';\nimport React, {useCallback, useEffect, useState} from \"react\";\nimport {Query} from \"../../../../models/query\";\nimport {queryHistoryStyles} from \"../../../../styles/query-style\";\nimport {cleanUpViz, createViz} from \"../queryCreateComponents/QueryCreateViz\";\nimport {cleanUpResponseViz} from \"./QueryCreateResponseViz\";\n\ninterface QueryDetailPanelProps {\n    query: Query,\n\n    requestDelete(): void,\n\n    requestSubmit(): void,\n}\n\n/**\n * Wrapper around the ResponseViz\n * @param props\n * @constructor\n */\nexport function QueryDetailPanel(props: QueryDetailPanelProps) {\n    const {query, requestDelete, requestSubmit} = props;\n    const [generalError, setGeneralError] = useState(notificationData.makeEmpty());\n    const styles = queryHistoryStyles();\n    useEffect(() => () => {\n        cleanUpViz()\n    }, []);\n    const onRefUpdate = useCallback((ref: HTMLElement | null) => {\n        if (ref == null) {\n            cleanUpResponseViz();\n            return;\n        }\n        if (query.schema == null) {\n            return;\n        }\n        createViz({\n            fullSchema: query.schema,\n            containerElem: ref\n        });\n    }, [query]);\n    return (\n        <>\n            <div className={styles.detailPanelWrapper}>\n                <small className={styles.detailHelperText}>All fields and graphs are not editable; please create a new\n                    query\n                    if need to make changes</small>\n                <TableContainer className={styles.detailTable}>\n                    <Table>\n                        <TableHead>\n                            <TableRow>\n                                <TableCell align={'center'}>Name</TableCell>\n                                <TableCell align={'center'}>Source</TableCell>\n                                <TableCell align={'center'}>Schedule</TableCell>\n                                <TableCell align={'center'}>Actions</TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            <TableRow>\n                                <TableCell align={'center'}>{query.name}</TableCell>\n                                <TableCell align={'center'}>{query.source}</TableCell>\n                                <TableCell align={'center'}>{query.schedule}</TableCell>\n                                <TableCell align={'center'}>\n                                    <Tooltip title={\"delete query\"}>\n                                        <IconButton color={'secondary'} aria-label=\"delete query\" component={\"span\"}\n                                                    onClick={requestDelete}>\n                                            <CloseOutlinedIcon/>\n                                        </IconButton>\n                                    </Tooltip>\n                                    <Tooltip title={\"re-submit query\"}>\n                                        <IconButton color={'secondary'} aria-label=\"re-submit query\" component={\"span\"}\n                                                    onClick={requestSubmit}>\n                                            <ArrowUpwardOutlinedIcon/>\n                                        </IconButton>\n                                    </Tooltip>\n                                </TableCell>\n                            </TableRow>\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n                <div className={styles.detailVizOutline} ref={onRefUpdate}/>\n            </div>\n            <NotificationSnackBar data={generalError} onClose={() => setGeneralError(notificationData.makeEmpty())}/>\n        </>\n    )\n}","import {IconButton, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Tooltip} from \"@material-ui/core\";\nimport ChevronRightOutlinedIcon from '@material-ui/icons/ChevronRightOutlined';\nimport React from \"react\";\nimport {QueryHistoryRecord} from \"../../../../models/query\";\nimport {queryHistoryStyles} from \"../../../../styles/query-style\";\n\ninterface QueryRecordsListProps {\n    records: QueryHistoryRecord[],\n    activeRecordIndex: number,\n\n    setActiveRecordIndex(index: number): void,\n}\n\n/**\n * A list of query records\n * @param props\n * @constructor\n */\nexport function QueryRecordsList(props: QueryRecordsListProps) {\n    const {records, setActiveRecordIndex, activeRecordIndex} = props;\n    const styles = queryHistoryStyles();\n    const tableHeaders = ['Time', 'Runtime (ms)', 'Data'].map(string => {\n        return <TableCell key={string}>{string}</TableCell>;\n    });\n    const tableRows = records.map((record, index) => {\n        return (\n            <TableRow key={index} className={index === activeRecordIndex ? styles.historyTableHighlightedRow : ''}>\n                <TableCell>{record.executionTimestamp}</TableCell>\n                <TableCell>{record.runtime}</TableCell>\n                <TableCell>\n                    <Tooltip title={\"show more data\"}>\n                        <IconButton color={'secondary'} aria-label=\"show more data\" component={\"span\"}\n                                    onClick={() => setActiveRecordIndex(index)}>\n                            <ChevronRightOutlinedIcon/>\n                        </IconButton>\n                    </Tooltip>\n                </TableCell>\n            </TableRow>\n        )\n    });\n    return (\n        <TableContainer component={'div'} className={styles.historyTableWrapper}>\n            <Table className={styles.historyTable} stickyHeader>\n                <TableHead>\n                    <TableRow>\n                        {tableHeaders}\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {tableRows}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}","import React, {useCallback} from \"react\";\nimport {queryHistoryStyles} from \"../../../../styles/query-style\";\nimport {cleanUpResponseViz, createResponseViz} from \"./QueryCreateResponseViz\";\n\ninterface QueryResponseVizProps {\n    data: null | any,\n}\n\n/**\n * Wrapper around createResponseViz\n * @param props\n * @constructor\n */\nexport function QueryResponseViz(props: QueryResponseVizProps) {\n    const {data} = props;\n    const onRefUpdate = useCallback((ref: HTMLElement | null) => {\n        if (ref == null) {\n            cleanUpResponseViz();\n            return;\n        }\n        if (data == null) {\n            return;\n        }\n        createResponseViz({\n            data,\n            containerElem: ref\n        });\n    }, [data]);\n    // computed\n    const styles = queryHistoryStyles();\n    let child = null;\n    if (data == null) {\n        child = (\n            <div key={'empty-text'} className={styles.responseVizTextWrapper}>\n                <div>\n                    <h3 className={styles.responseVizEmptyTitle}>No record data selected</h3>\n                </div>\n            </div>\n        );\n    } else {\n        if (data.hasOwnProperty('errors')) {\n            const errors = data['errors'] as any[];\n            if (errors.length !== 0) {\n                child = (\n                    <div key={'error-text'} className={styles.responseVizTextWrapper}>\n                        <div>\n                            <h3 className={styles.responseVizErrorTitle}>Following error(s) occurred</h3>\n                            {errors.map((item, index) => {\n                                if (item.hasOwnProperty('message')) {\n                                    return (<p key={`error-message-detail-${index}`}>{item['message']}</p>)\n                                } else {\n                                    return null\n                                }\n                            }).filter(Boolean)}\n                        </div>\n                    </div>\n                )\n            }\n        }\n        if (child == null) {\n            child = (\n                <div key={'viz'} className={styles.responseVizOutline} ref={onRefUpdate}/>\n            )\n        }\n    }\n    return (\n        <div className={styles.responseVizWrapper}>{child}</div>\n    );\n}","import {apiEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport {NotificationSnackBar} from \"@lion-frontend/shared/dist/notification/NotificationSnackBar\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {getGeneralError, getHTTPError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport axios from 'axios';\nimport React, {useEffect, useState} from \"react\";\nimport {Query, QueryHistoryRecord} from \"../../../../models/query\";\nimport {queryHistoryStyles} from \"../../../../styles/query-style\";\nimport {QueryHistoryRecordsListRequest} from \"../../../../types/requests/query-requests\";\nimport {QueryHistoryRecordsListResponse} from \"../../../../types/responses/query-responses\";\nimport {QueryRecordsList} from \"./QueryRecordsList\";\nimport {QueryResponseViz} from \"./QueryResponseViz\";\n\n\ninterface QueryRecordsPanelProps {\n    query: Query\n}\n\n/**\n * Wrapper around records list and response viz\n * @param props\n * @constructor\n */\nexport function QueryRecordsPanel(props: QueryRecordsPanelProps) {\n    const {query} = props;\n    const [allRecords, setAllRecords] = useState<QueryHistoryRecord[]>([]);\n    const [activeRecordIndex, setActiveRecordIndex] = useState(-1);\n    const [generalError, setGeneralError] = useState(notificationData.makeEmpty());\n    const styles = queryHistoryStyles();\n    useEffect(() => {\n        (async () => {\n            try {\n                const request: QueryHistoryRecordsListRequest = {\n                    queryName: query.name\n                };\n                const response = (await axios.get(\n                        apiEndpoints.query.endpoints.queryHistoryRecordsList.url,\n                        {params: request})\n                ).data as QueryHistoryRecordsListResponse;\n                const generalError = getGeneralError(response);\n                if (generalError) {\n                    setGeneralError(notificationData.makeError(generalError));\n                    return;\n                }\n                setGeneralError(notificationData.makeEmpty());\n                setAllRecords(response.data);\n            } catch (e) {\n                setGeneralError(notificationData.makeError(getHTTPError(e)));\n            }\n        })();\n    }, [query]);\n    const data = activeRecordIndex >= 0 && activeRecordIndex < allRecords.length ?\n        allRecords[activeRecordIndex].data : null;\n    return (\n        <>\n            <div className={styles.historyPanelWrapper}>\n                <QueryRecordsList\n                    records={allRecords}\n                    setActiveRecordIndex={setActiveRecordIndex}\n                    activeRecordIndex={activeRecordIndex}\n                />\n                <QueryResponseViz data={data}/>\n            </div>\n            <NotificationSnackBar data={generalError} onClose={() => setGeneralError(notificationData.makeEmpty())}/>\n        </>\n    )\n}","import {apiEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport {NotificationSnackBar} from \"@lion-frontend/shared/dist/notification/NotificationSnackBar\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {getGeneralError, getHTTPError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport {Paper, Tab, Tabs} from \"@material-ui/core\";\nimport axios from \"axios\";\nimport clsx from \"clsx\";\nimport React, {useCallback, useState} from \"react\";\nimport {queryIntermediate} from \"../../../models/query\";\nimport {queryHistoryStyles} from \"../../../styles/query-style\";\nimport {QueryHistoryProps, QueryHistoryTabPanelProps} from \"../../../types/props/query-props\";\nimport {QueryUpdateRequest, QueryUpdateType} from \"../../../types/requests/query-requests\";\nimport {QueryUpdateResponse} from \"../../../types/responses/query-responses\";\nimport {QueryDetailPanel} from \"./queryHistoryComponents/QueryDetailPanel\";\nimport {QueryRecordsPanel} from \"./queryHistoryComponents/QueryRecordsPanel\";\n\nfunction TabPanel(props: QueryHistoryTabPanelProps) {\n    const {children, value, index, ...other} = props;\n    const styles = queryHistoryStyles();\n    return (\n        <div\n            className={clsx(styles.intermediateWrapper, value === index ? styles.showElement : styles.removeElement)}\n            aria-labelledby={`scrollable-auto-tab-${index}`}\n            {...other}\n        >\n            {value === index && children}\n        </div>\n    );\n}\n\nexport function QueryHistory(props: QueryHistoryProps) {\n    const {query, deleteQuery, submitQuery} = props;\n    const styles = queryHistoryStyles();\n    const [activeTab, setActiveTab] = useState(0);\n    const [generalError, setGeneralError] = useState(notificationData.makeEmpty());\n    const onChangeTab = useCallback((_, newValue: number) => {\n        setActiveTab(newValue);\n    }, []);\n    const submitUpdate = useCallback(async (request: QueryUpdateRequest) => {\n        try {\n            const response = (await axios.put(apiEndpoints.query.endpoints.queryUpdate.url, request)).data as QueryUpdateResponse;\n            const generalError = getGeneralError(response);\n            if (generalError) {\n                setGeneralError(notificationData.makeError(generalError));\n                return false;\n            }\n            setGeneralError(notificationData.makeEmpty());\n            return true;\n        } catch (e) {\n            setGeneralError(notificationData.makeError(getHTTPError(e)));\n            return false;\n        }\n    }, []);\n    const onDeleteQuery = useCallback(async () => {\n        const request: QueryUpdateRequest = {\n            type: QueryUpdateType.DELETE,\n            data: queryIntermediate.fromQuery(query),\n        };\n        if (await submitUpdate(request)) {\n            deleteQuery(query);\n        }\n    }, [query, deleteQuery, submitUpdate]);\n    const onSubmitQuery = useCallback(async () => {\n        const request: QueryUpdateRequest = {\n            type: QueryUpdateType.EXECUTE,\n            data: queryIntermediate.fromQuery(query)\n        };\n        // FIXME: submit this via a separate endpoint\n        if (await submitUpdate(request)) {\n            submitQuery(query);\n        }\n    }, [query, submitQuery, submitUpdate]);\n    return (\n        <>\n            <div>\n                <h1 className={styles.titleStyle}>{query.name}</h1>\n                <Paper className={styles.historyWrapper}>\n                    <div className={styles.tabsWrapper}>\n                        <Tabs\n                            value={activeTab}\n                            indicatorColor=\"secondary\"\n                            textColor=\"secondary\"\n                            onChange={onChangeTab}\n                            aria-label=\"disabled tabs example\"\n                        >\n                            <Tab label=\"Query History\"/>\n                            <Tab label=\"Query Detail\"/>\n                        </Tabs>\n                    </div>\n                    <div className={styles.tabPanelWrapper}>\n                        <TabPanel value={activeTab} index={0}>\n                            <QueryRecordsPanel query={query}/>\n                        </TabPanel>\n                        <TabPanel value={activeTab} index={1}>\n                            <QueryDetailPanel query={query} requestDelete={onDeleteQuery}\n                                              requestSubmit={onSubmitQuery}/>\n                        </TabPanel>\n                    </div>\n                </Paper>\n            </div>\n            <NotificationSnackBar data={generalError} onClose={() => setGeneralError(notificationData.makeEmpty())}/>\n        </>\n    );\n}","import {materialTableIcons} from \"@lion-frontend/shared/dist/utils/common-values\";\nimport {Button} from \"@material-ui/core\";\nimport AddCircleOutlineOutlinedIcon from \"@material-ui/icons/AddCircleOutlineOutlined\";\nimport HistoryOutlinedIcon from '@material-ui/icons/HistoryOutlined';\nimport MaterialTable, {Action} from \"material-table\";\nimport React, {memo, useState} from \"react\";\nimport {Redirect} from \"react-router-dom\";\nimport {routerEndpoints} from \"@lion-frontend/shared/dist/endpoints/router-endpoints\";\nimport {Query} from \"../../../models/query\";\nimport {queryStyles} from \"../../../styles/query-style\";\nimport {QueryListOption, QueryListProps} from \"../../../types/props/query-props\";\n\nconst tableColumns = [\n    {title: 'Name', field: 'name'},\n    {title: 'Source', field: 'source'},\n    {title: 'Schedule', field: 'schedule'}\n];\n\nexport const QueryList = memo((props: QueryListProps) => {\n    const styles = queryStyles();\n    const [option, setOption] = useState(QueryListOption.NONE);\n    const [query, setQuery] = useState<Query | null>(null);\n\n    const onClickNew = () => setOption(QueryListOption.NEW);\n\n\n    const tableActions: Action<Query>[] = [\n        {\n            icon: () => <HistoryOutlinedIcon color='secondary'/>,\n            tooltip: 'View History',\n            onClick: (e, query) => {\n                if (Array.isArray(query)) {\n                    throw new Error('onClick in material table should not involve multiple query instances');\n                }\n                setOption(QueryListOption.HISTORY);\n                setQuery(query);\n            }\n        }\n    ];\n    const renderedRedirectNew = (<Redirect to={routerEndpoints.queries.create.url}/>);\n    const renderedRedirectHistory = (<Redirect to={routerEndpoints.queries.history.urlBase + query?.id}/>);\n    const renderedList = (\n        <div>\n            <h1 className={styles.titleStyle}>All Queries</h1>\n            <div className={styles.buttonWrapper}>\n                <Button\n                    className={styles.buttonRightEnd}\n                    color=\"secondary\"\n                    startIcon={<AddCircleOutlineOutlinedIcon/>}\n                    onClick={onClickNew}\n                >\n                    Add New Query\n                </Button>\n            </div>\n            <MaterialTable\n                options={{\n                    toolbar: false,\n                    showTitle: false,\n                    search: false,\n                    actionsColumnIndex: -1,\n                    paginationType: 'stepped',\n                    pageSizeOptions: []\n                }}\n                columns={tableColumns}\n                actions={tableActions}\n                data={Array.from(props.queries.values())}\n                components={{\n                    Container: (props) => <div {...props}/>\n                }}\n                icons={materialTableIcons}\n            />\n        </div>\n    );\n\n    switch (option) {\n        case QueryListOption.NEW:\n            return renderedRedirectNew;\n        case QueryListOption.HISTORY:\n            return renderedRedirectHistory;\n        case QueryListOption.NONE:\n            return renderedList;\n        default:\n            throw new Error('Invalid ServerListOption value');\n    }\n});","import {NotificationSnackBar} from \"@lion-frontend/shared/dist/notification/NotificationSnackBar\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {getHTTPError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport React, {memo, ReactNode, useContext, useEffect, useState} from \"react\";\nimport {Redirect, useHistory, useParams} from \"react-router-dom\";\nimport {v4 as uuidv4} from 'uuid';\nimport {routerEndpoints} from \"@lion-frontend/shared/dist/endpoints/router-endpoints\";\nimport {Query} from \"../../models/query\";\nimport {globalStore} from \"../../states/global/context\";\nimport {GlobalActions} from \"../../states/global/types\";\nimport {QueryProps, QueryRouteType} from \"../../types/props/query-props\";\nimport {RouteParams} from \"../../../servers-management/src/props/server-props\";\nimport {QueryUpdateType} from \"../../types/requests/query-requests\";\nimport {loadQueriesAndSchemas} from \"./queries/load-queries\";\nimport {QueryCreate} from \"./queries/QueryCreate\";\nimport {QueryHistory} from \"./queries/QueryHistory\";\nimport {QueryList} from \"./queries/QueryList\";\n\n\n/**\n * View, modify and create queries\n */\nexport const QueriesTab = memo((props: QueryProps) => {\n    const {updateTitle} = props;\n    const selectedQueryID = useParams<RouteParams>()[routerEndpoints.users.edit.paramName];\n    const [alertMessage, setAlertMessage] = useState(notificationData.makeEmpty());\n    const history = useHistory();\n    const {state, dispatch} = useContext(globalStore);\n\n    useEffect(() => {\n        updateTitle(routerEndpoints.queries.name);\n    }, [updateTitle]);\n    useEffect(() => {\n        // this is to avoid memory leak\n        let mounted = true;\n        if (state.queries != null) {\n            return;\n        }\n        (async () => {\n            try {\n                const result = await loadQueriesAndSchemas(\n                    (newSchema) => dispatch({type: GlobalActions.SET_FULL_SCHEMAS, payload: newSchema}),\n                    (newQueries) => dispatch({type: GlobalActions.SET_FULL_QUERIES, payload: newQueries}),\n                    state.fullQuerySchemas ?? new Map<string, any>(),\n                    mounted,\n                );\n                if (mounted) {\n                    setAlertMessage(result);\n                }\n            } catch (e) {\n                setAlertMessage(notificationData.makeError(getHTTPError(e)));\n            }\n        })();\n        return () => {\n            mounted = false;\n        };\n    }, [state, dispatch]);\n\n    const queriesWithDefault = state.queries ?? new Map<string, Query>();\n    const onUpdateQueries = ({data, type}: { data: Query, type: QueryUpdateType }) => {\n        const newQueries = new Map(queriesWithDefault);\n        switch (type) {\n            case QueryUpdateType.DELETE: {\n                if (!data.id) {\n                    throw new Error('ID field is mandatory for delete');\n                }\n                newQueries.delete(data.id as string);\n                break;\n            }\n            case QueryUpdateType.ADD: {\n                const newItem = data.id ? data : {...data, id: uuidv4()};\n                newQueries.set(newItem.id as string, newItem);\n                break\n            }\n            case QueryUpdateType.EXECUTE: {\n                break\n            }\n            default:\n                throw new Error('Invalid update type');\n        }\n        dispatch({type: GlobalActions.SET_FULL_QUERIES, payload: newQueries});\n        setAlertMessage(notificationData.makeSuccess('Update servers successful'));\n    };\n\n    const onPerformDelete = (query: Query) => {\n        onUpdateQueries({\n            data: query,\n            type: QueryUpdateType.DELETE\n        });\n        history.replace(routerEndpoints.queries.url);\n    };\n    const onPerformAdd = (query: Query) => {\n        onUpdateQueries({data: query, type: QueryUpdateType.ADD});\n        history.replace(routerEndpoints.queries.url);\n    };\n    const onPerformSubmit = (query: Query) => {\n        onUpdateQueries({\n            data: query,\n            type: QueryUpdateType.EXECUTE\n        });\n        history.replace(routerEndpoints.queries.url);\n    };\n\n    // FIXME: make routing more consistent\n    let child: ReactNode;\n    switch (props.routeType) {\n        case QueryRouteType.LIST: {\n            child = <QueryList queries={queriesWithDefault}/>;\n            break;\n        }\n        case QueryRouteType.NEW: {\n            child = <QueryCreate addQuery={onPerformAdd}/>;\n            break;\n        }\n        case QueryRouteType.HISTORY: {\n            if (queriesWithDefault.size === 0) {\n                child = null;\n            } else {\n                const query = queriesWithDefault.get(selectedQueryID);\n                if (query == null) {\n                    child = <Redirect to={routerEndpoints.queries.url}/>\n                } else {\n                    child = <QueryHistory query={query} deleteQuery={onPerformDelete} submitQuery={onPerformSubmit}/>;\n                }\n            }\n            break;\n        }\n        default:\n            throw new Error('Invalid Queries Management Enum Prop');\n    }\n    return (\n        <>\n            <div>{child}</div>\n            <NotificationSnackBar data={alertMessage} onClose={() => setAlertMessage(notificationData.makeEmpty())}/>\n        </>\n    );\n});","import {commonPageStyles} from \"@lion-frontend/shared/dist/styles/common-style\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nexport const socialMediaStyles = makeStyles(theme => ({\n    ...commonPageStyles(theme),\n    root: {\n        width: '100%',\n    },\n    wrapperStyle: {\n        padding: theme.spacing(3)\n    },\n    listItemStyle: {\n        height: '80px'\n    },\n    authorizedTextStyle: {\n        textAlign: 'right'\n    },\n    imageStyle: {\n        marginRight: theme.spacing(3)\n    }\n}));\n","import {apiEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport io from 'socket.io-client'\n\nclass SocketSingleton {\n    private _socket: SocketIOClient.Socket | null = null;\n\n    get socket() {\n        if (!this._socket) {\n            this.createSocket();\n        }\n        if (!this._socket) {\n            throw new Error('Socket must not be null');\n        }\n        return this._socket as SocketIOClient.Socket;\n    }\n\n    createSocket = () => {\n        this._socket = io(process.env.NODE_ENV === 'production' ? `http://listen.online` : `http://localhost:3000`);\n    };\n\n    constructURL(provider: string) {\n        let base = apiEndpoints.socialMedia.endpoints.socialMediaAuth.url;\n        if (base.endsWith('/')) {\n            base = base.slice(0, -1);\n        }\n\n        const socketEndpoint = `${base}/${provider}?socketId=${this.socket.id}`\n\n        return (process.env.NODE_ENV === 'production' ?  `http://listen.online${socketEndpoint}` : `http://localhost:3000${socketEndpoint}`);\n    }\n}\n\nexport const socketConnection = new SocketSingleton();","import {getGeneralError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport {Button, ListItem, ListItemText} from \"@material-ui/core\";\nimport React, {Fragment, useCallback, useEffect, useRef} from \"react\";\nimport {SocialMediaSource} from \"../../../models/social-media-source\";\nimport {socialMediaStyles} from \"../../../styles/social-media-style\";\nimport {SocialMediaAuthResponse} from \"../../../types/responses/social-media-responses\";\nimport {socketConnection} from \"./socket-singleton\";\n\ninterface OAuthProps {\n    source: SocialMediaSource | null,\n\n    onAuthorized(name: string): void,\n\n    onError(error: string): void,\n}\n\n/**\n * A component to open and close popup and socket\n * source: https://codeburst.io/react-authentication-with-twitter-google-facebook-and-github-862d59583105\n * @param props\n * @constructor\n */\nexport function OAuthComponent(props: OAuthProps) {\n    const {source, onAuthorized, onError} = props;\n    const popup = useRef<Window | null>();\n    const interval = useRef<number | null>();\n    const styles = socialMediaStyles();\n\n    // need to avoid calling this function more than once\n    useEffect(() => {\n        if (!source) {\n            return;\n        }\n        const socket = socketConnection.socket;\n        socket.on(source.name, (response: SocialMediaAuthResponse) => {\n            popup.current?.close();\n            console.log(response)\n            const generalError = getGeneralError(response);\n            if (generalError) {\n                onError(generalError);\n                return;\n            }\n            if (!response.data.isAuthenticated) {\n                onError(`Fail to authenticate source ${source.name}`);\n                return;\n            }\n            onAuthorized(source.name);\n        });\n        return () => {\n            if (interval.current !== null) {\n                window.clearInterval(interval.current);\n                interval.current = null;\n            }\n        }\n    }, [onAuthorized, onError, source]);\n\n    const startAuth = useCallback(() => {\n        if (!source) {\n            return;\n        }\n        if (interval.current !== null) {\n            clearInterval(interval.current);\n            interval.current = null;\n        }\n        popup.current = ((() => {\n            const width = 600, height = 600\n            const left = (window.innerWidth / 2) - (width / 2)\n            const top = (window.innerHeight / 2) - (height / 2)\n            const url = socketConnection.constructURL(source.name);\n            console.log(url)\n            return window.open(url, '',\n                `toolbar=no, location=no, directories=no, status=no, menubar=no, \n                scrollbars=no, resizable=no, copyhistory=no, width=${width}, \n                height=${height}, top=${top}, left=${left}`\n            )\n        })());\n        interval.current = window.setInterval(() => {\n            const popupWindow = popup.current;\n            if (!popupWindow || popupWindow.closed || popupWindow.closed === undefined) {\n                if (interval.current !== null) {\n                    clearInterval(interval.current);\n                    interval.current = null;\n                }\n            }\n        }, 1000)\n    }, [source]);\n\n    if (!source) {\n        return <Fragment/>;\n    }\n    const notAuth = <Button color=\"secondary\"\n                            onClick={startAuth}>Authorize</Button>;\n    const auth = <ListItemText className={styles.authorizedTextStyle} primary={'Authorized'}/>;\n    return (\n        <Fragment>\n            <ListItem className={styles.listItemStyle} divider>\n                <img className={styles.imageStyle} src={source.imageURL} alt={source.name}\n                     width={'48px'}/>\n                <ListItemText primary={source.name}/>\n                {source.isAuthenticated ? auth : notAuth}\n            </ListItem>\n        </Fragment>\n    )\n}\n","import {apiEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport {NotificationSnackBar} from \"@lion-frontend/shared/dist/notification/NotificationSnackBar\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {getGeneralError, getHTTPError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport {List} from \"@material-ui/core\";\nimport axios from \"axios\";\nimport React, {memo, useCallback, useContext, useEffect, useState} from \"react\";\nimport {routerEndpoints} from \"@lion-frontend/shared/dist/endpoints/router-endpoints\";\nimport {SocialMediaSource} from \"../../models/social-media-source\";\nimport {socialMediaStyles} from \"../../styles/social-media-style\";\nimport {ViewCommonProps} from \"../../types/props/view-props\";\nimport {SocialMediaResponse} from \"../../types/responses/social-media-responses\";\nimport {OAuthComponent} from \"./social-media/oauth\";\nimport {globalStore} from \"../../states/global/context\";\nimport {GlobalActions} from \"../../states/global/types\";\n\nasync function loadSocialMedia(onSourcesLoaded: (socialMedia: Map<string, SocialMediaSource>) => void, mounted: boolean) {\n    const response = (await axios.get(apiEndpoints.socialMedia.endpoints.socialMediaList.url)).data as SocialMediaResponse;\n    const generalError = getGeneralError(response);\n    if (generalError) {\n        return notificationData.makeError(generalError);\n    }\n    if (mounted) {\n        const result = response.data.reduce((acc, curr) => {\n            acc.set(curr.name, curr);\n            return acc;\n        }, new Map<string, SocialMediaSource>());\n        onSourcesLoaded(result);\n    }\n    return notificationData.makeEmpty();\n}\n\n\ninterface SocialMediaProps extends ViewCommonProps {\n}\n\nexport const SocialMediaTab = memo((props: SocialMediaProps) => {\n    const [generalError, setGeneralError] = useState(notificationData.makeEmpty());\n    const {state, dispatch} = useContext(globalStore);\n    const {updateTitle} = props;\n    useEffect(() => {\n        updateTitle(routerEndpoints.socialMedia.name);\n    }, [updateTitle]);\n    useEffect(() => {\n        let mounted = true;\n        if (state.socialMedia != null) {\n            return;\n        }\n        (async () => {\n            try {\n                const result = await loadSocialMedia(\n                    (newSources) => dispatch({type: GlobalActions.SET_FULL_SOCIAL_MEDIA, payload: newSources}),\n                    mounted,\n                );\n                if (mounted) {\n                    setGeneralError(result);\n                }\n            } catch (e) {\n                setGeneralError(notificationData.makeError(getHTTPError(e)));\n            }\n        })();\n        return () => {\n            mounted = false;\n        };\n    }, [state.socialMedia, dispatch]);\n    const onAuthMediaSource = useCallback((name: string) => {\n        const socialMediaWithDefault = state.socialMedia ?? new Map<string, SocialMediaSource>();\n        const newMediaSource = new Map(socialMediaWithDefault);\n        const old = socialMediaWithDefault.get(name);\n        if (!old) {\n            return;\n        }\n        const newSource = {...old, isAuthenticated: true};\n        newMediaSource.set(name, newSource);\n        dispatch({type: GlobalActions.SET_FULL_SOCIAL_MEDIA, payload: newMediaSource});\n    }, [state.socialMedia, dispatch]);\n    const onAuthError = useCallback((error: string) => {\n        if (error) {\n            setGeneralError(notificationData.makeError(error));\n        }\n    }, []);\n    const styles = socialMediaStyles();\n    const socialMediaWithDefault = state.socialMedia ?? new Map<string, SocialMediaSource>();\n    const sources = [];\n    for (const source of socialMediaWithDefault.values()) {\n        sources.push(\n            <OAuthComponent\n                key={source.name}\n                source={source}\n                onAuthorized={onAuthMediaSource}\n                onError={onAuthError}\n            />\n        );\n    }\n    return (\n        <>\n            <div>\n                <h1 className={styles.titleStyle}>Available Sources</h1>\n                <small className={styles.helperTextStyle}>If available, click on \"Authorize\" will redirect to\n                    authorization\n                    pages of corresponding social media platforms.</small>\n                <List className={styles.root}>\n                    {sources}\n                </List>\n            </div>\n            <NotificationSnackBar data={generalError} onClose={() => setGeneralError(notificationData.makeEmpty())}/>\n        </>\n    );\n});\n","import {ServerRouteType} from \"@lion-frontend/servers-management/dist/props/server-props\";\nimport {\n    AppBar,\n    ButtonBase,\n    Divider,\n    Drawer,\n    IconButton,\n    List,\n    ListItem,\n    ListItemIcon,\n    ListItemText,\n    Toolbar,\n    Typography,\n    useTheme\n} from \"@material-ui/core\";\nimport {Explore, Help, Menu, People, Search, Share, Translate, Web} from \"@material-ui/icons\";\nimport clsx from \"clsx\";\nimport React, {memo, useContext, useState} from \"react\";\nimport {RouteProps} from \"react-router\";\nimport {BrowserRouter as Router, NavLink, Redirect, Route, Switch} from \"react-router-dom\";\nimport {routerEndpoints} from \"@lion-frontend/shared/dist/endpoints/router-endpoints\";\nimport {globalStore} from \"../states/global/context\";\nimport {appStyles} from \"../styles/app\";\nimport {QueryRouteType} from \"../types/props/query-props\";\nimport {ServersTab} from \"./adminViews/ServersTab\";\nimport {TranslatorTab} from \"./adminViews/TranslatorTab\";\nimport {UsersTab} from \"./adminViews/UsersTab\";\nimport {ApplicationsTab} from \"./userViews/ApplicationsTab\";\nimport {HelpTab} from \"./userViews/HelpTab\";\nimport {NotFoundTab} from \"./userViews/NotFoundTab\";\nimport {ProfileTab} from \"./userViews/ProfileTab\";\nimport {QueriesTab} from \"./userViews/QueriesTab\";\nimport {SocialMediaTab} from \"./userViews/SocialMediaTab\";\n\ninterface ExtendedRouteProps extends RouteProps {\n    isAuthenticated: boolean\n}\n\n\nconst PrivateRoute = memo(({isAuthenticated, children, ...rest}: ExtendedRouteProps) => {\n    return (\n        <Route\n            {...rest}\n            render={({location}) =>\n                isAuthenticated ? (\n                    children\n                ) : (\n                    <Redirect\n                        to={{\n                            pathname: \"/\",\n                            state: {from: location}\n                        }}\n                    />\n                )\n            }\n        />\n    );\n});\n\nexport function AuthorizedNav() {\n    const [title, setTitle] = useState(routerEndpoints.queries.name);\n    const [isOpen, toggleMenuOpen] = useState(false);\n    const {state} = useContext(globalStore);\n    const styles = appStyles();\n    const theme = useTheme();\n    const user = state.user;\n    if (user == null) {\n        throw new Error('user cannot be null');\n    }\n    return (\n        <Router>\n            <div className={styles.root}>\n                <AppBar className={clsx(styles.appBar, {[styles.appBarShift]: isOpen})} position={'fixed'}>\n                    <Toolbar>\n                        <IconButton\n                            className={styles.menuButton}\n                            color=\"inherit\"\n                            aria-label=\"open drawer\"\n                            edge=\"start\"\n                            onClick={() => toggleMenuOpen(!isOpen)}\n                        >\n                            <Menu/>\n                        </IconButton>\n                        <Typography variant=\"h6\" noWrap>\n                            {title}\n                        </Typography>\n                    </Toolbar>\n                </AppBar>\n                <nav className={styles.drawer}>\n                    <Drawer\n                        variant=\"persistent\"\n                        anchor=\"left\"\n                        open={isOpen}\n                        classes={{paper: styles.drawerPaper}}\n                        ModalProps={{keepMounted: true}}\n                    >\n                        <NavLink to={routerEndpoints.profile.url} key={routerEndpoints.profile.name}\n                                 className={styles.linkNoStyle} activeClassName={styles.linkActiveStyle}>\n                            <ButtonBase className={styles.nameCardWrapper}>\n                                <div className={styles.nameCard}>\n                                    <h2 className={styles.nameCardHeader}>Hello,</h2>\n                                    <h2 className={styles.nameCardHeader}\n                                        style={{color: theme.palette.secondary.main}}>{user.name}</h2>\n                                </div>\n                            </ButtonBase>\n                        </NavLink>\n                        <Divider/>\n                        <List>\n                            <NavLink to={routerEndpoints.queries.url} key={routerEndpoints.queries.name}\n                                     className={styles.linkNoStyle} activeClassName={styles.linkActiveStyle}>\n                                <ListItem button>\n                                    <ListItemIcon><Search/></ListItemIcon>\n                                    <ListItemText primary={routerEndpoints.queries.name}/>\n                                </ListItem>\n                            </NavLink>\n                            <NavLink to={routerEndpoints.socialMedia.url} key={routerEndpoints.socialMedia.name}\n                                     className={styles.linkNoStyle} activeClassName={styles.linkActiveStyle}>\n                                <ListItem button>\n                                    <ListItemIcon><Share/></ListItemIcon>\n                                    <ListItemText primary={routerEndpoints.socialMedia.name}/>\n                                </ListItem>\n                            </NavLink>\n                            <NavLink to={routerEndpoints.applications.url} key={routerEndpoints.applications.name}\n                                     className={styles.linkNoStyle} activeClassName={styles.linkActiveStyle}>\n                                <ListItem button>\n                                    <ListItemIcon><Explore/></ListItemIcon>\n                                    <ListItemText primary={routerEndpoints.applications.name}/>\n                                </ListItem>\n                            </NavLink>\n                        </List>\n                        <Divider/>\n                        {user.isAdmin && (\n                            <List>\n                                <NavLink to={routerEndpoints.servers.url} key={routerEndpoints.servers.name}\n                                         className={styles.linkNoStyle} activeClassName={styles.linkActiveStyle}>\n                                    <ListItem button>\n                                        <ListItemIcon><Web/></ListItemIcon>\n                                        <ListItemText primary={routerEndpoints.servers.name}/>\n                                    </ListItem>\n                                </NavLink>\n                                <NavLink to={routerEndpoints.users.url} key={routerEndpoints.users.name}\n                                         className={styles.linkNoStyle} activeClassName={styles.linkActiveStyle}>\n                                    <ListItem button>\n                                        <ListItemIcon><People/></ListItemIcon>\n                                        <ListItemText primary={routerEndpoints.users.name}/>\n                                    </ListItem>\n                                </NavLink>\n                                <NavLink to={routerEndpoints.translator.url} key={routerEndpoints.translator.name}\n                                         className={styles.linkNoStyle} activeClassName={styles.linkActiveStyle}>\n                                    <ListItem button>\n                                        <ListItemIcon><Translate/></ListItemIcon>\n                                        <ListItemText primary={routerEndpoints.translator.name}/>\n                                    </ListItem>\n                                </NavLink>\n                            </List>\n                        )}\n                        <Divider/>\n                        <List>\n                            <NavLink to={routerEndpoints.help.url} key={routerEndpoints.help.name}\n                                     className={styles.linkNoStyle} activeClassName={styles.linkActiveStyle}>\n                                <ListItem button>\n                                    <ListItemIcon><Help/></ListItemIcon>\n                                    <ListItemText primary={routerEndpoints.help.name}/>\n                                </ListItem>\n                            </NavLink>\n                        </List>\n                    </Drawer>\n                </nav>\n\n                <div className={clsx(styles.content, {[styles.contentShift]: isOpen})}>\n                    <Switch>\n                        <Route exact path={routerEndpoints.base.url}>\n                            <Redirect from={routerEndpoints.base.url} exact to={routerEndpoints.queries.url}/>\n                        </Route>\n                        <Route exact path={routerEndpoints.queries.url}>\n                            <QueriesTab\n                                key={routerEndpoints.queries.url}\n                                routeType={QueryRouteType.LIST}\n                                updateTitle={setTitle}\n                            />\n                        </Route>\n                        <Route exact path={routerEndpoints.queries.create.url}>\n                            <QueriesTab\n                                key={routerEndpoints.queries.create.url}\n                                routeType={QueryRouteType.NEW}\n                                updateTitle={setTitle}\n                            />\n                        </Route>\n                        <Route exact path={routerEndpoints.queries.history.urlDynamic}>\n                            <QueriesTab\n                                key={routerEndpoints.queries.history.urlDynamic}\n                                routeType={QueryRouteType.HISTORY}\n                                updateTitle={setTitle}\n                            />\n                        </Route>\n                        <Route exact path={routerEndpoints.socialMedia.url}>\n                            <SocialMediaTab updateTitle={setTitle}/>\n                        </Route>\n                        <Route exact path={routerEndpoints.applications.url}>\n                            <ApplicationsTab updateTitle={setTitle}/>\n                        </Route>\n                        <Route exact path={routerEndpoints.applications.create.url}>\n                            <ApplicationsTab updateTitle={setTitle}/>\n                        </Route>\n                        <Route exact path={routerEndpoints.applications.edit.urlDynamic}>\n                            <ApplicationsTab updateTitle={setTitle}/>\n                        </Route>\n                        <Route exact path={routerEndpoints.profile.url}>\n                            <ProfileTab updateTitle={setTitle}/>\n                        </Route>\n                        <Route exact path={routerEndpoints.help.url}>\n                            <HelpTab updateTitle={setTitle}/>\n                        </Route>\n                        <PrivateRoute exact isAuthenticated={user.isAdmin} path={routerEndpoints.servers.url}>\n                            <ServersTab\n                                // key={routerEndpoints.servers.url}\n                                routeType={ServerRouteType.LIST}\n                                updateTitle={setTitle}\n                            />\n                        </PrivateRoute>\n                        <PrivateRoute exact isAuthenticated={user.isAdmin} path={routerEndpoints.servers.create.url}>\n                            <ServersTab\n                                // key={routerEndpoints.servers.create.url}\n                                routeType={ServerRouteType.NEW}\n                                updateTitle={setTitle}\n                            />\n                        </PrivateRoute>\n                        <PrivateRoute exact isAuthenticated={user.isAdmin}\n                                      path={routerEndpoints.servers.edit.urlDynamic}>\n                            <ServersTab\n                                // key={routerEndpoints.servers.edit.urlDynamic}\n                                routeType={ServerRouteType.EDIT}\n                                updateTitle={setTitle}\n                            />\n                        </PrivateRoute>\n                        <PrivateRoute exact isAuthenticated={user.isAdmin} path={routerEndpoints.users.edit.urlDynamic}>\n                            <UsersTab\n                                // key={routerEndpoints.users.edit.urlDynamic}\n                                updateTitle={setTitle}\n                                isEdit={true}\n                            />\n                        </PrivateRoute>\n                        <PrivateRoute exact isAuthenticated={user.isAdmin} path={routerEndpoints.users.url}>\n                            <UsersTab\n                                // key={routerEndpoints.users.url}\n                                updateTitle={setTitle}\n                                isEdit={false}\n                            />\n                        </PrivateRoute>\n                        <PrivateRoute exact isAuthenticated={user.isAdmin} path={routerEndpoints.translator.url}>\n                            <TranslatorTab updateTitle={setTitle}/>\n                        </PrivateRoute>\n                        <Route><NotFoundTab/></Route>\n                    </Switch>\n                </div>\n            </div>\n        </Router>\n    );\n}\n\n","import {makeStyles, Theme} from \"@material-ui/core/styles\";\n\nexport const unauthorizedFrontStyles = makeStyles((theme: Theme) => ({\n    root: {\n        display: `flex`,\n        flexDirection: `column`,\n        maxHeight: `100vh`\n    },\n    content: {\n        height: `100%`,\n        overflowY: `auto`\n    },\n    toolbar: {\n        minHeight: 96,\n        alignItems: 'flex-start',\n        paddingTop: theme.spacing(1),\n        paddingBottom: theme.spacing(2),\n    },\n    fullWidthTitle: {\n        flexGrow: 1,\n        alignSelf: 'flex-end'\n    },\n    menuButtonWrapper: {\n        display: `flex`,\n        flexDirection: `row`\n    },\n    menuButton: {\n        alignSelf: 'center'\n    },\n    linkNoStyle: {\n        color: `inherit`,\n        textDecoration: `inherit`\n    }\n}));","import {makeStyles, Theme} from \"@material-ui/core/styles\";\n\nexport const loginStyles = makeStyles((theme: Theme) => ({\n    paper: {\n        padding: '2rem'\n    },\n    title: {\n        color: '#212121',\n        margin: '0 0 2rem 0'\n    },\n    form: {\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    fieldSeparation: {\n        marginBottom: '1rem'\n    },\n    functionalitySeparation: {\n        marginBottom: '2rem'\n    },\n    button: {\n        marginTop: `1rem`\n    },\n    container: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5)\n    }\n}));","import {apiEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport {NotificationSnackBar} from \"@lion-frontend/shared/dist/notification/NotificationSnackBar\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {joinBoolean, mutate} from \"@lion-frontend/shared/dist/utils/common-functions\";\nimport {getGeneralError, getHTTPError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport {Button, Container, TextField} from \"@material-ui/core\";\nimport axios from \"axios\";\nimport React, {useContext, useState} from \"react\";\nimport {useHistory} from \"react-router-dom\";\nimport {routerEndpoints} from \"@lion-frontend/shared/dist/endpoints/router-endpoints\";\nimport {globalStore} from \"../../states/global/context\";\nimport {GlobalActions} from \"../../states/global/types\";\nimport {loginStyles} from \"../../styles/login-style\";\nimport {LoginRequest} from \"../../types/requests/login-requests\";\nimport {LoginResponse} from \"../../types/responses/login-responses\";\n\nexport function LoginTab() {\n    // FIXME: Use StringDict instead\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [emailError, setEmailError] = useState('');\n    const [passwordError, setPasswordError] = useState('');\n    const [generalError, setGeneralError] = useState(notificationData.makeEmpty());\n\n    const {dispatch} = useContext(globalStore);\n\n    const styles = loginStyles();\n    const history = useHistory();\n\n    const onUpdateEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setEmail(e.target.value);\n    };\n    const onUpdatePassword = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setPassword(e.target.value);\n    };\n    const onSubmitForm = async () => {\n        const [mutSetEmailError, mutClearEmailError] = mutate(setEmailError);\n        const [mutSetPasswordError, mutClearPasswordError] = mutate(setPasswordError);\n        const [mutSetGeneralError, mutClearGeneralError] = mutate(setGeneralError);\n        try {\n            const request: LoginRequest = {\n                email,\n                password\n            };\n            const response = (await axios.post(apiEndpoints.general.endpoints.loginCredential.url, request)).data as LoginResponse;\n            const generalError = getGeneralError(response);\n            const fieldError = response.error?.fieldError;\n            const isError = joinBoolean([\n                generalError ? mutSetGeneralError(notificationData.makeError(generalError)) : mutClearGeneralError(notificationData.makeEmpty()),\n                fieldError?.email ? mutSetEmailError(fieldError.email) : mutClearEmailError(''),\n                fieldError?.password ? mutSetPasswordError(fieldError.password) : mutClearPasswordError('')\n            ]);\n            if (!isError) {\n                dispatch({type: GlobalActions.SET_USER, payload: response.data});\n                history.push(routerEndpoints.queries.url);\n            }\n        } catch (e) {\n            setGeneralError(notificationData.makeError(getHTTPError(e)));\n        }\n    };\n\n    return (\n        <Container maxWidth={'sm'} className={styles.container}>\n            <div className={styles.paper}>\n                <h1 className={styles.title}>Login</h1>\n                <form className={styles.form} noValidate>\n                    <TextField\n                        error={emailError !== ''}\n                        color={'secondary'}\n                        className={styles.fieldSeparation}\n                        id=\"standard-basic\"\n                        label={'Email'}\n                        helperText={emailError}\n                        onChange={onUpdateEmail}\n                    />\n                    <TextField\n                        error={passwordError !== ''}\n                        color={'secondary'}\n                        className={styles.functionalitySeparation}\n                        id=\"standard-basic\"\n                        label={'Password'}\n                        type={'password'}\n                        helperText={passwordError}\n                        onChange={onUpdatePassword}\n                    />\n                    <Button\n                        className={styles.button}\n                        color={'secondary'}\n                        variant=\"contained\"\n                        onClick={onSubmitForm}\n                    >SUBMIT</Button>\n                </form>\n            </div>\n            <NotificationSnackBar data={generalError} onClose={() => setGeneralError(notificationData.makeEmpty())}/>\n        </Container>\n    )\n}","import {apiEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport {NotificationSnackBar} from \"@lion-frontend/shared/dist/notification/NotificationSnackBar\";\nimport {notificationData} from \"@lion-frontend/shared/dist/states/snackbar-data\";\nimport {stringDict, StringDict} from \"@lion-frontend/shared/dist/states/string-dict\";\nimport {joinBoolean, mutate} from \"@lion-frontend/shared/dist/utils/common-functions\";\nimport {getGeneralError, getHTTPError} from \"@lion-frontend/shared/dist/utils/error-handlers\";\nimport {Button, Container, TextField} from \"@material-ui/core\";\nimport axios from \"axios\";\nimport React, {useContext, useState} from \"react\";\nimport {useHistory} from \"react-router-dom\";\nimport {routerEndpoints} from \"@lion-frontend/shared/dist/endpoints/router-endpoints\";\nimport {globalStore} from \"../../states/global/context\";\nimport {GlobalActions} from \"../../states/global/types\";\nimport {loginStyles} from \"../../styles/login-style\";\nimport {RegisterRequest} from \"../../types/requests/login-requests\";\nimport {RegisterResponse} from \"../../types/responses/login-responses\";\n\nconst usernameField = `name`;\nconst emailField = `email`;\nconst passwordField = `password`;\nconst secondPasswordField = 'repeatedPassword';\nconst invitationCodeField = `invitationCode`;\n\nexport function RegisterTab() {\n    const [inputs, setInputs] = useState<StringDict>({});\n    const [errors, setErrors] = useState<StringDict>({});\n    const [generalError, setGeneralError] = useState(notificationData.makeEmpty());\n    const {dispatch} = useContext(globalStore);\n    const styles = loginStyles();\n    const history = useHistory();\n\n    const [mutSetErrors, mutClearErrors] = mutate(setErrors);\n    const [mutSetGeneralError, mutClearGeneralError] = mutate(setGeneralError);\n\n    const onUpdateForm = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>, key: string) => {\n        const value = e.target.value as string;\n        setInputs(oldInputs => ({...oldInputs, [key]: value}))\n    };\n    const onVerifyForm = () => {\n        const isError = joinBoolean([\n            !stringDict.isValueNonempty(inputs, usernameField) ?\n                mutSetErrors((o: StringDict) =>\n                    stringDict.update(o, usernameField, 'Username must not be empty')) :\n                mutClearErrors((o: StringDict) =>\n                    stringDict.unset(o, usernameField)),\n            !stringDict.isValueNonempty(inputs, emailField) ?\n                mutSetErrors((o: StringDict) =>\n                    stringDict.update(o, emailField, 'Email must not be empty')) :\n                mutClearErrors((o: StringDict) =>\n                    stringDict.unset(o, emailField)),\n            !stringDict.isValueNonempty(inputs, passwordField) ?\n                mutSetErrors((o: StringDict) =>\n                    stringDict.update(o, passwordField, 'Password must not be empty')) :\n                mutClearErrors((o: StringDict) =>\n                    stringDict.unset(o, passwordField)),\n            !stringDict.isValueNonempty(inputs, secondPasswordField) ?\n                mutSetErrors((o: StringDict) =>\n                    stringDict.update(o, secondPasswordField, 'Enter again the password to confirm')) :\n                inputs[secondPasswordField] !== inputs[passwordField] ?\n                    mutSetErrors((o: StringDict) =>\n                        stringDict.update(o, secondPasswordField, 'Second password must match the first one')) :\n                    mutClearErrors((o: StringDict) =>\n                        stringDict.unset(o, secondPasswordField)),\n            !stringDict.isValueNonempty(inputs, invitationCodeField) ?\n                mutSetErrors((o: StringDict) =>\n                    stringDict.update(o, invitationCodeField, 'Invitation code must not be empty')) :\n                mutClearErrors((o: StringDict) =>\n                    stringDict.unset(o, invitationCodeField)),\n        ]);\n        return !isError;\n\n    };\n    const onSubmitForm = async () => {\n        if (!onVerifyForm()) {\n            return\n        }\n        try {\n            const request: RegisterRequest = {\n                name: inputs[usernameField],\n                password: inputs[passwordField],\n                invitationCode: inputs[invitationCodeField],\n                email: inputs[emailField]\n            };\n            const response = (await axios.post(apiEndpoints.general.endpoints.registerCredential.url, request))\n                .data as RegisterResponse;\n            const generalError = getGeneralError(response);\n            const fieldError = response.error?.fieldError;\n            const isError = joinBoolean([\n                generalError ?\n                    mutSetGeneralError(notificationData.makeError(generalError)) :\n                    mutClearGeneralError(notificationData.makeEmpty()),\n                fieldError?.password ?\n                    mutSetErrors((o: StringDict) => stringDict.update(o, passwordField, fieldError.password)) :\n                    mutClearErrors((o: StringDict) => stringDict.unset(o, passwordField)),\n                fieldError?.email ?\n                    mutSetErrors((o: StringDict) => stringDict.update(o, emailField, fieldError.email)) :\n                    mutClearErrors((o: StringDict) => stringDict.unset(o, emailField)),\n                fieldError?.invitationCode ?\n                    mutSetErrors((o: StringDict) => stringDict.update(o, invitationCodeField, fieldError.invitationCode)) :\n                    mutClearErrors((o: StringDict) => stringDict.unset(o, invitationCodeField)),\n                fieldError?.name ?\n                    mutSetErrors((o: StringDict) => stringDict.update(o, usernameField, fieldError.name)) :\n                    mutClearErrors((o: StringDict) => stringDict.unset(o, usernameField)),\n            ]);\n            if (!isError) {\n                history.push(routerEndpoints.queries.url);\n                dispatch({type: GlobalActions.SET_USER, payload: response.data});\n            }\n        } catch (e) {\n            setGeneralError(notificationData.makeError(getHTTPError(e)));\n        }\n    };\n\n    return (\n        <Container maxWidth={'sm'} className={styles.container}>\n            <div className={styles.paper}>\n                <h1 className={styles.title}>Register</h1>\n                <form className={styles.form} noValidate>\n                    <TextField\n                        error={stringDict.isValueNonempty(errors, usernameField)}\n                        color={'secondary'}\n                        className={styles.fieldSeparation}\n                        id=\"standard-basic\"\n                        label={'Username'}\n                        helperText={stringDict.getValueWithDefault(errors, usernameField)}\n                        onChange={e => onUpdateForm(e, usernameField)}\n                    />\n                    <TextField\n                        error={stringDict.isValueNonempty(errors, emailField)}\n                        color={'secondary'}\n                        className={styles.fieldSeparation}\n                        id=\"standard-basic\"\n                        label={'Email'}\n                        helperText={stringDict.getValueWithDefault(errors, emailField)}\n                        onChange={e => onUpdateForm(e, emailField)}\n                    />\n                    <TextField\n                        error={stringDict.isValueNonempty(errors, passwordField)}\n                        color={'secondary'}\n                        className={styles.fieldSeparation}\n                        id=\"standard-basic\"\n                        label={'Password'}\n                        type={'password'}\n                        helperText={stringDict.getValueWithDefault(errors, passwordField)}\n                        onChange={e => onUpdateForm(e, passwordField)}\n                    />\n                    <TextField\n                        error={stringDict.isValueNonempty(errors, secondPasswordField)}\n                        color={'secondary'}\n                        className={styles.fieldSeparation}\n                        id=\"standard-basic\"\n                        label={'Re-enter Password'}\n                        type={'password'}\n                        helperText={stringDict.getValueWithDefault(errors, secondPasswordField)}\n                        onChange={e => onUpdateForm(e, secondPasswordField)}\n                    />\n                    <TextField\n                        error={stringDict.isValueNonempty(errors, invitationCodeField)}\n                        color={'secondary'}\n                        className={styles.functionalitySeparation}\n                        id=\"standard-basic\"\n                        label={'Invitation Code'}\n                        helperText={stringDict.getValueWithDefault(errors, invitationCodeField)}\n                        onChange={e => onUpdateForm(e, invitationCodeField)}\n                    />\n                    <Button\n                        className={styles.button}\n                        color={'secondary'}\n                        variant=\"contained\"\n                        onClick={onSubmitForm}\n                    >SUBMIT</Button>\n                </form>\n            </div>\n            <NotificationSnackBar data={generalError} onClose={() => setGeneralError(notificationData.makeEmpty())}/>\n        </Container>\n    )\n}","import {pageEndpoints} from \"@lion-frontend/shared/dist/endpoints/api-endpoints\";\nimport {AppBar, Button, IconButton, Toolbar, Tooltip, Typography} from \"@material-ui/core\";\nimport OpenInNewOutlinedIcon from '@material-ui/icons/OpenInNewOutlined';\nimport React from \"react\";\nimport {BrowserRouter as Router, Link, Route, Switch} from \"react-router-dom\";\nimport {unauthorizedRouterEndpoints} from \"@lion-frontend/shared/dist/endpoints/router-endpoints\";\nimport {unauthorizedFrontStyles} from \"../styles/unauthorized-front-style\";\nimport {LoginTab} from \"./unauthorizedViews/LoginTab\";\nimport {RegisterTab} from \"./unauthorizedViews/RegisterTab\";\nimport {NotFoundTab} from \"./userViews/NotFoundTab\";\n\n\nexport function UnauthorizedNav() {\n    const styles = unauthorizedFrontStyles();\n    return (\n        <Router>\n            <div className={styles.root}>\n                <AppBar position=\"static\">\n                    <Toolbar className={styles.toolbar}>\n                        <Typography variant=\"h5\" className={styles.fullWidthTitle}>\n                            Listen Online: The Application\n                        </Typography>\n                        <div className={styles.menuButtonWrapper}>\n                            <Button color={'inherit'} className={styles.menuButton}>\n                                <Link className={styles.linkNoStyle}\n                                      to={unauthorizedRouterEndpoints.login.url}>Login</Link>\n                            </Button>\n                            <Button color={'inherit'} className={styles.menuButton}>\n                                <Link className={styles.linkNoStyle}\n                                      to={unauthorizedRouterEndpoints.register.url}>Register</Link>\n                            </Button>\n                            <Tooltip title={'project main page'}>\n                                <IconButton\n                                    className={styles.menuButton}\n                                    // edge={'start'}\n                                    color=\"inherit\"\n                                    onClick={() => window.open(pageEndpoints.projectMainPage.url, '_blank')}\n                                >\n                                    <OpenInNewOutlinedIcon/>\n                                </IconButton>\n                            </Tooltip>\n                        </div>\n                    </Toolbar>\n                </AppBar>\n                <div className={styles.content}>\n                    <Switch>\n                        <Route exact path={unauthorizedRouterEndpoints.base.url}>\n                            <LoginTab/>\n                        </Route>\n                        <Route exact path={unauthorizedRouterEndpoints.login.url}>\n                            <LoginTab/>\n                        </Route>\n                        <Route exact path={unauthorizedRouterEndpoints.register.url}>\n                            <RegisterTab/>\n                        </Route>\n                        <Route><NotFoundTab/></Route>\n                    </Switch>\n                </div>\n            </div>\n        </Router>\n    );\n}\n","export const AppTheme = {\n    palette: {\n        primary: {main: '#eceff1'},\n        secondary: {main: '#ed1250'}\n    },\n    typography: {\n        fontFamily: [\n            '-apple-system',\n            'BlinkMacSystemFont',\n            '\"Segoe UI\"',\n            'Roboto',\n            '\"Helvetica Neue\"',\n            'Arial',\n            'sans-serif',\n            '\"Apple Color Emoji\"',\n            '\"Segoe UI Emoji\"',\n            '\"Segoe UI Symbol\"',\n        ].join(',')\n    }\n};","import {createMuiTheme} from '@material-ui/core';\nimport {ThemeProvider} from '@material-ui/core/styles';\nimport React, {useContext} from 'react';\nimport {AuthorizedNav} from \"./components/AuthorizedNav\";\nimport {UnauthorizedNav} from \"./components/UnauthorizedNav\";\nimport {GlobalStateProvider, globalStore} from \"./states/global/context\";\nimport {AppTheme} from \"./styles/theme\";\n\n\nfunction App() {\n    const {state} = useContext(globalStore);\n    const isLoggedIn = state.user != null;\n    const $emptyMain = <UnauthorizedNav/>;\n    const $fullMain = <AuthorizedNav/>;\n    return (\n        <ThemeProvider theme={createMuiTheme(AppTheme)}>\n            {isLoggedIn ? $fullMain : $emptyMain}\n        </ThemeProvider>\n    );\n}\n\nexport default () => (\n    <GlobalStateProvider>\n        <App/>\n    </GlobalStateProvider>\n);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(\n            process.env.PUBLIC_URL,\n            window.location.href\n        );\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                        'worker. To learn more, visit https://bit.ly/CRA-PWA'\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: {'Service-Worker': 'script'}\n    })\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (\n                response.status === 404 ||\n                (contentType != null && contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log(\n                'No internet connection found. App is running in offline mode.'\n            );\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then(registration => {\n                registration.unregister();\n            })\n            .catch(error => {\n                console.error(error.message);\n            });\n    }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App/>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar api_endpoints_1 = require(\"./api-endpoints\");\nfunction r(url) {\n    return api_endpoints_1.APP_BASE_URL + url;\n}\nexports.routerEndpoints = {\n    base: {\n        url: api_endpoints_1.APP_BASE_URL\n    },\n    socialMedia: {\n        url: r(\"/soc\"),\n        name: \"Social Media\"\n    },\n    queries: {\n        url: r(\"/q\"),\n        name: \"Queries\",\n        create: {\n            url: r(\"/q/create\")\n        },\n        history: {\n            paramName: \"name\",\n            urlBase: \"/q/history/\",\n            urlDynamic: \"/q/history/:name\"\n        }\n    },\n    metaQueries: {\n        url: r(\"/mq\"),\n        name: \"Meta Queries\"\n    },\n    applications: {\n        url: r(\"/app\"),\n        name: \"Applications\",\n        edit: {\n            paramName: \"id\",\n            urlBase: \"/app/edit/\",\n            urlDynamic: \"/app/edit/:id\",\n        },\n        create: {\n            url: r(\"/app/create\")\n        }\n    },\n    servers: {\n        url: r(\"/ad-servers\"),\n        name: \"Servers\",\n        create: {\n            url: r(\"/ad-servers/create\")\n        },\n        edit: {\n            paramName: \"id\",\n            urlBase: \"/ad-servers/edit/\",\n            urlDynamic: \"/ad-servers/edit/:id\"\n        }\n    },\n    users: {\n        url: r(\"/ad-users\"),\n        name: \"Users\",\n        edit: {\n            paramName: \"name\",\n            urlBase: \"/ad-users/edit/\",\n            urlDynamic: \"/ad-users/edit/:name\"\n        }\n    },\n    help: {\n        url: r(\"/help\"),\n        name: \"Help\"\n    },\n    invalid: {\n        url: r(\"/404\")\n    },\n    translator: {\n        url: r(\"/translate\"),\n        name: \"Translator\"\n    },\n    profile: {\n        url: r(\"/profile\"),\n        name: \"Profile\"\n    }\n};\nexports.unauthorizedRouterEndpoints = {\n    base: {\n        url: api_endpoints_1.APP_BASE_URL\n    },\n    login: {\n        url: r(\"/login\")\n    },\n    register: {\n        url: r(\"/register\")\n    }\n};\n//# sourceMappingURL=router-endpoints.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.notificationData = {\n    makeError: function (message) {\n        return {\n            isError: true,\n            message: message\n        };\n    },\n    makeSuccess: function (message) {\n        return {\n            isError: false,\n            message: message\n        };\n    },\n    makeEmpty: function () {\n        return {\n            isError: true,\n            message: null\n        };\n    }\n};\n//# sourceMappingURL=snackbar-data.js.map","\"use strict\";\n// FIXME: Use lodash for type/value checking\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar emptyRegex = /^\\s*$/;\nfunction isStringEmpty(str) {\n    return (!str || 0 === str.length || emptyRegex.test(str));\n}\nexports.isStringEmpty = isStringEmpty;\nfunction isValidNumber(str) {\n    var result = str.trim();\n    if (result === '') {\n        return false;\n    }\n    if (!(/^[0-9,.]*$/.test(result))) {\n        return false;\n    }\n    return !isNaN(+result);\n}\nexports.isValidNumber = isValidNumber;\n// FIXME: Validate URL here\nfunction isValidURL(str) {\n    return !isStringEmpty(str);\n}\nexports.isValidURL = isValidURL;\nvar emailRegex = /\\S+@\\S+\\.\\S+/;\nfunction isValidEmail(str) {\n    return !isStringEmpty(str) && emailRegex.test(str);\n}\nexports.isValidEmail = isValidEmail;\nfunction isObjectEmpty(obj) {\n    return obj.constructor === Object && Object.keys(obj).length === 0;\n}\nexports.isObjectEmpty = isObjectEmpty;\n//# sourceMappingURL=value-checker.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ArrowUpwardOutlined_1 = __importDefault(require(\"@material-ui/icons/ArrowUpwardOutlined\"));\nvar FirstPageOutlined_1 = __importDefault(require(\"@material-ui/icons/FirstPageOutlined\"));\nvar KeyboardArrowLeftOutlined_1 = __importDefault(require(\"@material-ui/icons/KeyboardArrowLeftOutlined\"));\nvar KeyboardArrowRightOutlined_1 = __importDefault(require(\"@material-ui/icons/KeyboardArrowRightOutlined\"));\nvar LastPageOutlined_1 = __importDefault(require(\"@material-ui/icons/LastPageOutlined\"));\nvar react_1 = __importStar(require(\"react\"));\nexports.materialTableIcons = {\n    FirstPage: react_1.forwardRef(function (props, ref) { return react_1.default.createElement(FirstPageOutlined_1.default, __assign({}, props, { ref: ref })); }),\n    LastPage: react_1.forwardRef(function (props, ref) { return react_1.default.createElement(LastPageOutlined_1.default, __assign({}, props, { ref: ref })); }),\n    NextPage: react_1.forwardRef(function (props, ref) { return react_1.default.createElement(KeyboardArrowRightOutlined_1.default, __assign({}, props, { ref: ref })); }),\n    PreviousPage: react_1.forwardRef(function (props, ref) { return react_1.default.createElement(KeyboardArrowLeftOutlined_1.default, __assign({}, props, { ref: ref })); }),\n    SortArrow: react_1.forwardRef(function (props, ref) { return react_1.default.createElement(ArrowUpwardOutlined_1.default, __assign({}, props, { ref: ref })); }),\n};\n//# sourceMappingURL=common-values.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ServerUpdateType;\n(function (ServerUpdateType) {\n    ServerUpdateType[ServerUpdateType[\"ADD\"] = 0] = \"ADD\";\n    ServerUpdateType[ServerUpdateType[\"DELETE\"] = 1] = \"DELETE\";\n    ServerUpdateType[ServerUpdateType[\"UPDATE\"] = 2] = \"UPDATE\";\n})(ServerUpdateType = exports.ServerUpdateType || (exports.ServerUpdateType = {}));\nvar ServerRouteType;\n(function (ServerRouteType) {\n    ServerRouteType[ServerRouteType[\"LIST\"] = 0] = \"LIST\";\n    ServerRouteType[ServerRouteType[\"NEW\"] = 1] = \"NEW\";\n    ServerRouteType[ServerRouteType[\"EDIT\"] = 2] = \"EDIT\";\n})(ServerRouteType = exports.ServerRouteType || (exports.ServerRouteType = {}));\nvar ServerListOption;\n(function (ServerListOption) {\n    ServerListOption[ServerListOption[\"NEW\"] = 0] = \"NEW\";\n    ServerListOption[ServerListOption[\"DETAIL\"] = 1] = \"DETAIL\";\n    ServerListOption[ServerListOption[\"NONE\"] = 2] = \"NONE\";\n})(ServerListOption = exports.ServerListOption || (exports.ServerListOption = {}));\nvar ServerEditOption;\n(function (ServerEditOption) {\n    ServerEditOption[ServerEditOption[\"DELETE\"] = 0] = \"DELETE\";\n    ServerEditOption[ServerEditOption[\"SAVE\"] = 1] = \"SAVE\";\n    ServerEditOption[ServerEditOption[\"NONE\"] = 2] = \"NONE\";\n    ServerEditOption[ServerEditOption[\"BACK\"] = 3] = \"BACK\";\n})(ServerEditOption = exports.ServerEditOption || (exports.ServerEditOption = {}));\n//# sourceMappingURL=server-props.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar value_checker_1 = require(\"../utils/value-checker\");\nexports.stringDict = {\n    update: function (sd, key, value) {\n        var _a;\n        return __assign(__assign({}, sd), (_a = {}, _a[key] = value, _a));\n    },\n    unset: function (sd, key) {\n        var _a = sd, _b = key, value = _a[_b], newSD = __rest(_a, [typeof _b === \"symbol\" ? _b : _b + \"\"]);\n        return __assign({}, newSD);\n    },\n    isValueNonempty: function (sd, key) {\n        if (!sd.hasOwnProperty(key)) {\n            return false;\n        }\n        return !value_checker_1.isStringEmpty(sd[key]);\n    },\n    validate: function (sd, key, validator) {\n        if (!sd.hasOwnProperty(key)) {\n            return false;\n        }\n        return validator(sd[key]);\n    },\n    isValueEmpty: function (sd, key) {\n        return !exports.stringDict.isValueNonempty(sd, key);\n    },\n    getValueWithDefault: function (sd, key) {\n        return exports.stringDict.isValueNonempty(sd, key) ? sd[key] : '';\n    }\n};\n//# sourceMappingURL=string-dict.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getHTTPError(error) {\n    if (error.response) {\n        return \"\\n        Error happened at server:\\n        data: \" + error.response.data + \",\\n        status: \" + error.response.status + \"\\n        \";\n    }\n    else if (error.request) {\n        return \"\\n        Error happened during response:\\n        request: \" + error.request + \"\\n        \";\n    }\n    else {\n        return \"\\n        Error happened during request:\\n        message: \" + error.message + \"\\n        \";\n    }\n}\nexports.getHTTPError = getHTTPError;\nfunction getGeneralError(obj) {\n    if (!obj.error) {\n        return null;\n    }\n    if (!obj.error.generalError || obj.error.generalError.length === 0) {\n        return null;\n    }\n    return 'Error happened at server: \\n' + obj.error.generalError.join('\\n');\n}\nexports.getGeneralError = getGeneralError;\n//# sourceMappingURL=error-handlers.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar common_style_1 = require(\"@lion-frontend/shared/dist/styles/common-style\");\nvar styles_1 = require(\"@material-ui/core/styles\");\nexports.serverStyles = styles_1.makeStyles(function (theme) { return (__assign(__assign(__assign(__assign(__assign({}, common_style_1.commonPageStyles(theme)), common_style_1.errorButtonStyles(theme)), common_style_1.commonButtonStyles(theme)), common_style_1.formStyles(theme)), { detailPanelItemTitle: {\n        fontWeight: 500\n    }, detailPanelItemContent: {}, grid: {\n        maxWidth: '100%',\n    }, indentedGrid: {\n        padding: theme.spacing(2, 0, 2, 10)\n    }, indentedGridItem: {\n        marginLeft: theme.spacing(4)\n    } })); });\n//# sourceMappingURL=server-style.js.map","\"use strict\";\n//\n//\n//\n// DO NOT ADD ANY IMPORTS OUTSIDE OF THIS PACKAGE TO AVOID CIRCULAR DEPENDENCY\n//\n//\n//\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar APIMethod;\n(function (APIMethod) {\n    APIMethod[\"POST\"] = \"post\";\n    APIMethod[\"GET\"] = \"get\";\n    APIMethod[\"PUT\"] = \"put\";\n})(APIMethod = exports.APIMethod || (exports.APIMethod = {}));\nvar APIAuthLevel;\n(function (APIAuthLevel) {\n    APIAuthLevel[APIAuthLevel[\"NO_AUTH\"] = 0] = \"NO_AUTH\";\n    APIAuthLevel[APIAuthLevel[\"USER\"] = 1] = \"USER\";\n    APIAuthLevel[APIAuthLevel[\"ADMIN\"] = 2] = \"ADMIN\";\n})(APIAuthLevel = exports.APIAuthLevel || (exports.APIAuthLevel = {}));\nexports.APP_BASE_URL = \"/app\";\nfunction a(url) {\n    return exports.APP_BASE_URL + '/api' + url;\n}\nexports.pageEndpoints = {\n    projectMainPage: {\n        url: \"/\",\n        authorization: APIAuthLevel.NO_AUTH,\n        description: \"Redirect to main page. Note that this app has a different base url than the main page\"\n    },\n    projectAppPage: {\n        url: exports.APP_BASE_URL,\n        authorization: APIAuthLevel.NO_AUTH,\n        description: \"Redirect to this app\"\n    }\n};\nvar generalEndpoints = {\n    loginCredential: {\n        url: a(\"/auth/login\"),\n        method: APIMethod.POST,\n        body: {},\n        response: {},\n        authorization: APIAuthLevel.NO_AUTH,\n    },\n    registerCredential: {\n        url: a(\"/auth/register\"),\n        method: APIMethod.POST,\n        body: {},\n        response: {},\n        authorization: APIAuthLevel.NO_AUTH,\n    },\n    logOutCredential: {\n        url: a(\"/auth/logout\"),\n        method: APIMethod.GET,\n        authorization: APIAuthLevel.USER\n    }\n};\nvar serverEndpoints = {\n    serversList: {\n        url: a(\"/servers\"),\n        method: APIMethod.GET,\n        response: {},\n        authorization: APIAuthLevel.ADMIN\n    },\n    serverUpdate: {\n        url: a(\"/server/update\"),\n        method: APIMethod.PUT,\n        body: {},\n        response: {},\n        authorization: APIAuthLevel.ADMIN\n    },\n    serverRefresh: {\n        url: a(\"/server/refresh\"),\n        method: APIMethod.GET,\n        parameters: {},\n        response: {},\n        authorization: APIAuthLevel.ADMIN,\n    }\n};\nvar socialMediaEndpoints = {\n    socialMediaList: {\n        url: a(\"/social-media-platforms\"),\n        method: APIMethod.GET,\n        response: {},\n        authorization: APIAuthLevel.USER\n    },\n    socialMediaAuth: {\n        url: a('/social-media-socket'),\n        method: APIMethod.GET,\n        query: '',\n        parameters: {},\n        response: {},\n    }\n};\nvar queryEndpoints = {\n    queriesList: {\n        url: a(\"/queries\"),\n        method: APIMethod.GET,\n        response: {},\n        authorization: APIAuthLevel.USER\n    },\n    querySourcesList: {\n        url: a(\"/query/sources\"),\n        method: APIMethod.GET,\n        response: {},\n        authorization: APIAuthLevel.USER\n    },\n    queryFullSchema: {\n        url: a(\"/query/full-schema\"),\n        method: APIMethod.GET,\n        parameters: {},\n        response: {},\n        authorization: APIAuthLevel.USER,\n        description: \"get the full, unfilled schema from source\"\n    },\n    queryUpdate: {\n        url: a(\"/query/update\"),\n        method: APIMethod.PUT,\n        body: {},\n        response: {},\n        authorization: APIAuthLevel.USER\n    },\n    queryExecute: {\n        url: a('/query/execute'),\n        method: APIMethod.PUT,\n        body: {},\n        response: {},\n        authorization: APIAuthLevel.USER\n    },\n    queryHistoryRecordsList: {\n        url: a(\"/query/history-records\"),\n        method: APIMethod.GET,\n        parameters: {},\n        response: {},\n        authorization: APIAuthLevel.USER\n    },\n};\nvar usersEndpoints = {\n    usersList: {\n        url: a(\"/users\"),\n        method: APIMethod.GET,\n        response: {},\n        authorization: APIAuthLevel.ADMIN\n    },\n    userUpdate: {\n        url: a(\"/user/update\"),\n        method: APIMethod.PUT,\n        body: {},\n        response: {},\n        authorization: APIAuthLevel.ADMIN\n    },\n};\nvar applicationEndpoints = {\n    applicationList: {\n        url: a(\"/applications\"),\n        method: APIMethod.GET,\n        response: {},\n        authorization: APIAuthLevel.USER\n    },\n    applicationUpdate: {\n        url: a(\"/application/update\"),\n        method: APIMethod.PUT,\n        body: {},\n        response: {},\n        authorization: APIAuthLevel.USER\n    },\n};\nexports.apiEndpoints = {\n    general: {\n        baseURL: {\n            single: a(\"/auth\")\n        },\n        endpoints: generalEndpoints\n    },\n    server: {\n        baseURL: {\n            single: a(\"/server\"),\n            multiple: a(\"/servers\")\n        },\n        endpoints: serverEndpoints\n    },\n    socialMedia: {\n        baseURL: {\n            multiple: a(\"/social-media-platforms\")\n        },\n        endpoints: socialMediaEndpoints\n    },\n    query: {\n        baseURL: {\n            multiple: a(\"/queries\"),\n            single: a(\"/query\")\n        },\n        endpoints: queryEndpoints\n    },\n    user: {\n        baseURL: {\n            multiple: a(\"/users\"),\n            single: a(\"/user\")\n        },\n        endpoints: usersEndpoints\n    },\n    application: {\n        baseURL: {\n            multiple: a(\"/applications\"),\n            single: a(\"/application\")\n        },\n        endpoints: applicationEndpoints\n    }\n};\n//# sourceMappingURL=api-endpoints.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar core_1 = require(\"@material-ui/core\");\nvar colors_1 = require(\"@material-ui/core/colors\");\nvar styles_1 = require(\"@material-ui/core/styles\");\nexports.commonPageStyles = function (theme) { return core_1.createStyles({\n    titleStyle: {\n        margin: theme.spacing(0, 0, 2, 0),\n        color: '#212121',\n        height: \"2.5rem\"\n    },\n    helperTextStyle: {\n        display: 'block',\n        margin: theme.spacing(0, 0, 2, 0),\n        color: '#757575'\n    },\n}); };\nexports.errorButtonStyles = function (theme) { return core_1.createStyles({\n    errorButton: {\n        color: theme.palette.getContrastText(colors_1.blueGrey[700]),\n        backgroundColor: colors_1.blueGrey[700],\n        '&:hover': {\n            backgroundColor: colors_1.blueGrey[900],\n        },\n    },\n}); };\nexports.commonButtonStyles = function (theme) { return core_1.createStyles({\n    buttonWrapper: {\n        display: 'flex',\n        flexDirection: 'row'\n    },\n    buttonRightGap: {\n        marginRight: theme.spacing(2)\n    },\n    buttonRightEnd: {\n        marginLeft: 'auto'\n    },\n}); };\nexports.formStyles = function (theme) { return core_1.createStyles({\n    form: {\n        margin: theme.spacing(4, 0)\n    },\n}); };\nexports.snackBarStyles = styles_1.makeStyles(function (theme) { return ({\n    content: {\n        height: 'auto',\n        whiteSpace: 'pre-line'\n    },\n    success: {\n        color: colors_1.green[\"400\"]\n    }\n}); });\n//# sourceMappingURL=common-style.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar NotificationSnackBar_1 = require(\"@lion-frontend/shared/dist/notification/NotificationSnackBar\");\nvar snackbar_data_1 = require(\"@lion-frontend/shared/dist/states/snackbar-data\");\nvar error_handlers_1 = require(\"@lion-frontend/shared/dist/utils/error-handlers\");\nvar react_1 = __importStar(require(\"react\"));\nvar react_router_dom_1 = require(\"react-router-dom\");\nvar router_endpoints_1 = require(\"@lion-frontend/shared/dist/endpoints/router-endpoints\");\nvar server_props_1 = require(\"../props/server-props\");\nvar load_servers_1 = require(\"./servers/load-servers\");\nvar ServerEdit_1 = require(\"./servers/ServerEdit\");\nvar ServerList_1 = require(\"./servers/ServerList\");\n/**\n * Wrapper for all server functionality. Only this component should be used directly by other packages.\n */\nexports.ServerManagement = react_1.memo(function (props) {\n    var servers = props.data, onChange = props.onChange;\n    var paramName = react_router_dom_1.useParams()[router_endpoints_1.routerEndpoints.servers.edit.paramName];\n    var _a = __read(react_1.useState(snackbar_data_1.notificationData.makeEmpty()), 2), alertMessageData = _a[0], setAlertMessageData = _a[1];\n    react_1.useEffect(function () {\n        // this is to avoid memory leak\n        var mounted = true;\n        if (servers != null) {\n            return;\n        }\n        (function () { return __awaiter(void 0, void 0, void 0, function () {\n            var result, e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, load_servers_1.loadServers(onChange, mounted)];\n                    case 1:\n                        result = _a.sent();\n                        if (mounted) {\n                            setAlertMessageData(result);\n                        }\n                        return [3 /*break*/, 3];\n                    case 2:\n                        e_1 = _a.sent();\n                        setAlertMessageData(snackbar_data_1.notificationData.makeError(error_handlers_1.getHTTPError(e_1)));\n                        return [3 /*break*/, 3];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        }); })();\n        return function () {\n            mounted = false;\n        };\n    }, [servers, onChange]);\n    var serversWithDefault = servers !== null && servers !== void 0 ? servers : new Map();\n    var onUpdateServers = function (request) {\n        var newServers = new Map(serversWithDefault);\n        var item = request.data;\n        switch (request.type) {\n            case server_props_1.ServerUpdateType.ADD:\n            case server_props_1.ServerUpdateType.UPDATE: {\n                if (newServers.has(paramName)) {\n                    newServers.delete(paramName);\n                }\n                newServers.set(item.name, item);\n                break;\n            }\n            case server_props_1.ServerUpdateType.DELETE: {\n                newServers.delete(item.name);\n                break;\n            }\n            default:\n                setAlertMessageData(snackbar_data_1.notificationData.makeError('Invalid ServerUpdateType'));\n                return;\n        }\n        setAlertMessageData(snackbar_data_1.notificationData.makeSuccess('Successfully updated servers'));\n        console.log(newServers.size);\n        onChange(newServers);\n    };\n    var onPerformUpdate = function (server) { return onUpdateServers({ data: server, type: server_props_1.ServerUpdateType.UPDATE }); };\n    var onPerformDelete = function (server) { return onUpdateServers({ data: server, type: server_props_1.ServerUpdateType.DELETE }); };\n    var onPerformAdd = function (server) { return onUpdateServers({ data: server, type: server_props_1.ServerUpdateType.ADD }); };\n    var onCloseSnackBar = function () { return setAlertMessageData({ isError: false, message: null }); };\n    var child;\n    switch (props.routeType) {\n        case server_props_1.ServerRouteType.LIST: {\n            child = react_1.default.createElement(ServerList_1.ServerList, { servers: serversWithDefault });\n            break;\n        }\n        case server_props_1.ServerRouteType.EDIT: {\n            if (serversWithDefault.has(paramName)) {\n                child =\n                    react_1.default.createElement(ServerEdit_1.ServerEdit, { onSave: onPerformUpdate, server: serversWithDefault.get(paramName), onDelete: onPerformDelete });\n            }\n            else {\n                child = react_1.default.createElement(ServerList_1.ServerList, { servers: serversWithDefault });\n            }\n            break;\n        }\n        case server_props_1.ServerRouteType.NEW: {\n            child = react_1.default.createElement(ServerEdit_1.ServerEdit, { onSave: onPerformAdd });\n            break;\n        }\n        default:\n            throw new Error('Invalid Server Management Enum Prop');\n    }\n    return (react_1.default.createElement(react_1.default.Fragment, null,\n        react_1.default.createElement(\"div\", null, child),\n        react_1.default.createElement(NotificationSnackBar_1.NotificationSnackBar, { data: alertMessageData, onClose: onCloseSnackBar })));\n});\n//# sourceMappingURL=ServerManagement.js.map"],"sourceRoot":""}